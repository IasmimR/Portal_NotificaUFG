!function(){var a={"mobile.core.components.BaseList":"core.components.BaseList","mobile.core.components.Container":"core.components.Container","mobile.core.components.Image":"core.components.Image","mobile.core.components.TwitterFollow":"core.components.TwitterFollow","mobile.core.components.MenuButton":"core.components.MenuButton","mobile.core.components.Page":"core.components.Page","mobile.core.components.SimpleButton":"core.components.SimpleButton","mobile.core.components.SiteStructure":"core.components.SiteStructure"},b=define.getDefinition("resource.scriptLoader").value;if(!b)throw new Error("scriptLoader is not defined");a["wysiwyg.viewer.components.tpapps.TPAWidget"]="tpa.viewer.components.TPAWidget",a["wysiwyg.viewer.components.tpapps.TPASection"]="tpa.viewer.components.TPASection",a["wysiwyg.viewer.components.tpapps.TPAPlaceholder"]="tpa.viewer.components.TPAPlaceholder",a["wysiwyg.viewer.components.tpapps.TPA3DGallery"]="tpa.viewer.components.TPA3DGallery",a["wysiwyg.viewer.components.tpapps.TPA3DCarousel"]="tpa.viewer.components.TPA3DCarousel",a["wysiwyg.viewer.components.tpapps.TPAGluedWidget"]="tpa.viewer.components.TPAGluedWidget",define.Class.overrideName.multi(a)}(),function(){function a(a,b){var c,d=a.MAIN_MENU,e=a.SITE_STRUCTURE,f=function(){var a=[];return _.forEach(d.items,function(b){if(a.push(b.refId),b.items&&b.items.length>0)for(var c=0;c<b.items.length;c++)a.push(b.items[c].refId)}),a},g=function(a){var b=d.items[a];b.items&&b.items.length>0&&_.forEach(b.items,function(a,c){d.items.push(a),delete b.items[c]}),b.items=[],d.items.splice(a,1)},h=function(a){var b={};return _.find(d.items,function(c,d){return b.topIndex=d,_.find(c.items,function(c,d){return c.refId===a?(b.subIndex=d,!0):void 0})}),b},i=function(a){var b=_.findIndex(d.items,function(b){return b.refId===a});if(b>=0)g(b);else{var c=h(a);d.items[c.topIndex].items.splice(c.subIndex,1)}window.W.Data.markDirtyCompIdForLater("MAIN_MENU")};c=f();var j=function(){_.forEach(c,function(a){a||(i(a),LOG.reportError(wixErrors.MENU_CORRUPTION_BLANK_ID,"DataFixer","menuFixer_plugin"))}),_.pull(c,"",void 0)},k=function(){_.forEach(c,function(c){_.indexOf(b,c.slice(1))<0?(i(c),LOG.reportError(wixErrors.MENU_CORRUPTION_UNKNOWN_PAGE,"DataFixer","menuFixer_plugin",c)):null===a[c]&&LOG.reportError(wixErrors.MENU_CORRUPTION_NULL_PAGE,"DataFixer")})},l=function(){_.forEach(b,function(a){if(_.indexOf(c,"#"+a)<0){c.push("#"+a);var b={items:[],refId:"#"+a};d.items.push(b)}})},m=function(){_.contains(b,e.mainPage.slice(1))||(e.mainPage="#"+b[0],window.W.Data.markDirtyCompIdForLater("SITE_STRUCTURE"))};return{_menuIds:c,exec:function(){j(),k(),l(),m()}}}function b(){function b(a){var b=c({data:a});return b.data}function c(a,c){return a.data=a.data||{},a.data.document_data=a.data.document_data||{},a.data.theme_data=a.data.theme_data||{},a.data.component_properties=a.data.component_properties||{},b.plugins.forEach(function(b){a=b.exec(a,c)}),a}return b.plugins=[],b.plugins.push({exec:function(a){var b=a.data;return b.document_data.THEME_DATA&&(b.theme_data.THEME_DATA||(b.theme_data.THEME_DATA=b.document_data.THEME_DATA),delete b.document_data.THEME_DATA),a}}),b.plugins.push({exec:function(b,c){var d=b.data.document_data;if(!d.MAIN_MENU||!c)return b;if(window.W.Data){var e=new a(d,c);e.exec()}return b}}),b.plugins.push({exec:function(a){var b,c={toFix:["FlashComponent","SiteButton","Image"],newNames:["LinkableFlashComponent","LinkableButton","Image"],originalLink:["TextLink","Link"]},d=["href","text","target","icon","linkType"],e={oldValues:["same","other"],newValues:["_self","_blank"]},f=function(a){return _.filter(a,function(a){var b=!a.link,d=-1!==_.indexOf(c.toFix,a.type),e=!0,f=a.type===c.toFix[2];return f&&(e="2.0"!=a.metaData.schemaVersion),b&&d&&e},this)},g=function(a){return _.filter(a,function(a){return a.linkType&&-1!==_.indexOf(c.originalLink,a.type)},this)},h=function(a){return _.filter(a,function(a){return"PageLink"===a.type&&!a.pageId||"AnchorLink"===a.type&&!a.pageId||"AnchorLink"===a.type&&!a.anchorDataId||"DocumentLink"===a.type&&!a.docId},this)},i=function(a){var b=_.indexOf(c.toFix,a.type),e=c.newNames[b],f={type:e};_.reduce(a,function(a,b,c){return a[c]||-1!==_.indexOf(d,c)||(a[c]=b),a},f,this);var g=j(a,!0);return g&&(f.link=p(g.id),w[g.id]=g),a.type===f.type&&(f.metaData.schemaVersion="2.0"),f},j=function(a,b){var c=a.linkType||"",d=c.toLowerCase(),e=b?s():a.id;switch(d){case"page":return l(e,a);case"website":return k(e,a);case"email":return n(e,a);case"document":return m(e,a);case"login":return o(e,a);case"admin_login":return null;case"free_link":return null;case"":return null;default:return LOG.reportError(wixErrors.UNHANDLED_LINK_TYPE,"DataFixer.Link_Refactor_Plugin","createNewLinkItem",JSON.stringify(a)),null}},k=function(a,b){var c={};c.id=a,c.type="ExternalLink",c.target=q(b.target);var d=b.href;return d?(c.url=d,c):null},l=function(a,b){var c={};c.id=a,c.type="PageLink";var d=b.href;if(!d)return null;var e=d.lastIndexOf("/");return 0>e&&(e=d.lastIndexOf("|")),d=d.substr(e+1),c.pageId=p(d),c},m=function(a,b){var c,d,e={};e.type="DocumentLink",e.id=a;var f=b.href;return f?(c=f.substr(f.lastIndexOf("/")+1),d=c.indexOf("?dn="),-1!=d&&(c=c.substring(0,d)),e.docId=c,e.name=b.text,e):null},n=function(a,b){var c={};c.id=a,c.type="EmailLink";var d=b.href;if(!d||!d.toLowerCase)return null;0===d.toLowerCase().indexOf("mailto:")&&(d=d.substr("mailto:".length));var e=d.split("?");if(c.recipient=e[0],e[1]){var f=r(e[1]);f.subject&&(c.subject=f.subject),f.body&&(c.body=f.body)}return c},o=function(a,b){var c={};c.id=a,c.type="LoginToWixLink";var d=b.text;return d&&0===d.indexOf("{")&&(d=JSON.parse(d),c.postLoginUrl=d.postLoginUrl,c.postSignupUrl=d.postSignupUrl,c.dialog=d.type),c},p=function(a){return a?a&&0===a.indexOf("#")?a:"#"+a:null},q=function(a){var b,c=_.indexOf(e.oldValues,a);return b=-1!==_.indexOf(e.newValues,a)?a:-1!==c?e.newValues[c]:e.newValues[1]},r=function(a){for(var b,c={},d=/([^&=]+)=([^&]*)/g;b=d.exec(a);)c[b[1]]=b[2];return c},s=function(){var b,c=_.keys(a.data.document_data);do b=(new Date).getTime().toString(36)+"_"+Math.round(99999*Math.random()).toString(36),b=b.replace(/\s/g,"_");while(c[b]);return b},t=function(a){var b=a;0===a.indexOf("#")&&(b=a.substr(1)),window.W&&window.W.Data&&window.W.Data.markDirtyCompIdForLater(b)},u=a.data,v=u.document_data,w={},x=h(v);return _.each(x,function(a){window.W&&window.W.Data&&window.W.Data.markCorruptDataItemRef(a.id,a),delete v[a.id]},this),b=f(v),_.each(b,function(a){var b=i(a);b&&(v[a.id]=b,t(a.id))},this),b=g(v),_.each(b,function(a){var b=j(a);b&&(v[a.id]=b)},this),u.links_data=u.links_data||{},_.assign(u.links_data,w),a}}),b.plugins.push({exec:function(a){var b=a.structure;if(!b)return a;var c=[],d=W.Data.getDataByQuery("#SKINS");if(!d)return a;var e=d.get("components");return collectSkinlessComponents(b,c),_.forEach(c,function(a){var b=e[a.componentType];a.skin||LOG.reportError(wixErrors.NO_SKIN,"WViewManager","_fixMissingSkinsInCompNodes",{c1:a.componentType,c2:a.skin}),b&&(a.skin=b[0])}),a}}),collectSkinlessComponents=function(a,b){if(a.componentType||a.children){!a.componentType||a.skin&&"mobile.core.skins.InlineSkin"!==a.skin||b.push(a);var c=a.children||[],d=a.components||[],e=a.mobileComponents||[],f=_.union(c,d,e);_.forEach(f,function(a){collectSkinlessComponents(a,b)})}},{fix:b,FixPageJson:c}}define.resource("dataFixer",b())}(),define.Class.overrideName.multi({"mobile.core.skins.InlineSkin":"skins.core.InlineSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin","skins.viewer.gallerymatrix.PolaroidCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidCustomHeightSkin","skins.viewer.gallerymatrix.PolaroidDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidDisplayerCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomDisplayerCustomHeightSkin","wysiwyg.viewer.skins.dropmenu.TextOnlyMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.TextSeparatorsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SolidColorMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuIINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.dropmenu.OverlineMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateBasicMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.LinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateLinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.PointerMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.RibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.VerticalRibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.IndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateIndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ArrowRightMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SloppyBorderMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin"}),define.component("wysiwyg.common.components.DeadComponent",function(a){var b=a;b.resources(["W.Config"]),b.statics({IS_DEAD:!0,EDITOR_META_DATA:{general:{settings:!0,design:!1,animation:!1},mobile:{disablePropertySplit:!0}}}),b.skinParts({title:{type:"htmlElement",optional:!0},desc:{type:"htmlElement",optional:!0},desc2:{type:"htmlElement",optional:!0}}),b.inherits("core.components.base.BaseComp"),b.methods({initialize:function(a,b,c){c&&(this._messageToUser=c.messageToUserObj),b.removeAttribute("class"),this.__oldSkin=b.get("skin"),this.__oldStyleId=b.get("styleid"),this.__oldCompId=b.get("comp"),this.parent(a,b,c)},_onRender:function(a){var b=a.data.invalidations;if(b.isInvalidated([this.INVALIDATIONS.SKIN_CHANGE])&&(this.$view.setAttribute("skin",this.__oldSkin),this.$view.setAttribute("styleid",this.__oldStyleId),this.$view.setAttribute("comp",this.__oldCompId),this._messageToUser?this._setTextsFromArgs():this.resources.W.Config.env.$isEditorViewerFrame&&this.resources.W.Config.env.isInIframeInEditor()&&this._setTextsFromResources(window.top.W.Resources)),b.isInvalidated([this.INVALIDATIONS.WIDTH_REQUEST,this.INVALIDATIONS.HEIGHT_REQUEST,this.INVALIDATIONS.FIRST_RENDER])){var c=this.getRequestDimensions();this.$view.setStyles({width:c.width+"px",height:c.height+"px"})}},_setTextsFromArgs:function(){this._skinParts.title&&this._skinParts.title.set("html",this._messageToUser.title),this._skinParts.desc&&this._skinParts.desc.set("html",this._messageToUser.desc1),this._skinParts.desc2&&this._skinParts.desc2.set("html",this._messageToUser.desc2)},_setTextsFromResources:function(a){this._skinParts.title&&this._skinParts.title.set("html",a.get("EDITOR_LANGUAGE","COMP_DeadComponent_TITLE","Restoring This Element isnâ€™t Possible.")),this._skinParts.desc&&this._skinParts.desc.set("html",a.get("EDITOR_LANGUAGE","COMP_DeadComponent_DESC","Delete it to add something new in its place.")),this._skinParts.desc2&&this._skinParts.desc2.set("html",a.get("EDITOR_LANGUAGE","COMP_DeadComponent_DESC2","*Site visitors wonâ€™t see this message."))},isDataTypeValid:function(){return!0},isDuplicatable:function(){return!1}})}),define.component("wysiwyg.common.components.InfoTip",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.skinParts({content:{type:"htmlElement"}}),b.resources(["W.Utils"]),b.states({hidden:["hidden","visible"]}),b.binds(["initialize","_callTip","_showTip","_mouseOut","_mouseIn","_timerToClose","_closeToolTipCmd","_showToolTipCmd","_stayInWindowBounds"]),b.fields({_mouseInside:!1,_onCallerMouseMoveWasCalled:!1,_shouldShowTooltipAfterTimout:!1,_tipToShow:"",_defaultShowTimer:500,_showTimer:500}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.tipNode=this.getViewNode(),this.tipNode.addEvent("click",this._handleEvent),this.tipNode.addEvent("mouseleave",this._mouseOut),this.tipNode.addEvent("mouseenter",this._mouseIn),this.tipNode.addEvent("mousedown",this._mouseDown),document.addEvent("keyup",this._mouseOut),this.setState("hidden")},_closeToolTipCmd:function(){this._tipToShow="",this._hideToolTipTimeOut=setTimeout(function(){this._mouseInside||this._closeTip()}.bind(this),150)},_showToolTipCmd:function(a,b){this._shouldShowTooltipAfterTimout=!0,this._tipToShow=a.id?a.id:a.html,a.showTimer&&(this._showTimer=a.showTimer),clearTimeout(this._hideToolTipTimeOut),window.setTimeout(function(){var c=a.id?a.id:a.html;this._shouldShowTooltipAfterTimout&&this._tipToShow===c&&this._callTip(a,b)}.bind(this),this._showTimer)},_handleEvent:function(a){var b=a.target;b.get("href")&&a.preventDefault();var c=this.getLogic(),d=b.get("action");d&&c[d].bind(c)(b)},_setToolTipValues:function(a){this._skinParts.content.set("html",a)},_getToolTipCallerNode:function(a){return"element"==typeOf(a.source)?a.source:a.source.getViewNode()},_callTip:function(a,b){this._resetToolTip(),this._setToolTipValues(a.content),this._showTip(this._getToolTipCallerNode(b))},_resetToolTip:function(){this._skinParts.content.empty()},_showTip:function(a){var b=this.getViewNode(),c=this._getPosition(a,b);b.setStyles({top:c.y,left:c.x[0],right:c.x[1]}),this.removeState("hidden","hidden"),this._activateTimerToClose(b,a)},_activateTimerToClose:function(){this._numOfTimerCalls++,this.resources.W.Utils.callLater(this._closeTipByTimeout,null,this,3e3)},_closeTipByTimeout:function(){this._numOfTimerCalls--,0===this._numOfTimerCalls&&this._closeTip()},_timerToClose:function(){var a;this.onCallerMove=function(){this._onCallerMouseMoveWasCalled=!0,$(document.body).removeEvent("mousemove",this.onCallerMove)}.bind(this),$(document.body).addEvent("mousemove",this.onCallerMove),this.checkIfOut=function(){(this._mouseInside||!this._onCallerMouseMoveWasCalled)&&this.createTimer()}.bind(this),this.createTimer=function(){a=setTimeout(this.checkIfOut,3e3)},this.createTimer()},_getPosition:function(a,b){var c={x:0,y:0},d={x:0,y:0};W.Config.env.$isEditorFrame&&document!==a.ownerDocument&&(c=W.Preview.getPreviewPosition(),d=W.Preview.getPreviewSite().getScroll());var e=a.getPosition(),f=a.getHeight(),g=a.getWidth(),h=e.y+c.y-d.y,i=e.x+c.x-d.x,j=b.getHeight(),k=b.getWidth(),l=i-k/2;this._top=h-j,this._left=l,this._right="auto",this._stayInWindowBounds(f,g,h,i,j);var m=0,n=0;if(b.offsetParent){var o=b.offsetParent.getPosition();m=o.y,n=o.x}return this._top=this._top-m,this._left=this._left-n,this._right=this._right+n,{x:[this._left,this._right],y:this._top}},_stayInWindowBounds:function(a,b,c,d,e){var f=window.innerWidth,g=window.innerHeight;if(this._top-document.body.getScroll().y<0){var h=c+e;h>g+document.body.getScroll().y+e&&(h=0>c?c:document.body.getScroll().y),this._top=h>0?h:0}this._left<0?this._left=d:this._left>f&&(this._left="auto",this._right=d+b)},_setState:function(a,b){a?this.setState(b):this.removeState(b)},_closeTip:function(){this._shouldShowTooltipAfterTimout=!1,this._onCallerMouseMoveWasCalled=!1,this.setState("hidden"),this.getViewNode().setStyles({top:0,left:0})},_mouseOut:function(){this._mouseInside=!1,this._closeTip()},_mouseIn:function(){this._mouseInside=!0},_mouseDown:function(a){a.stopPropagation()},dispose:function(){this.tipNode.removeEvent("click",this._handleEvent),this.tipNode.removeEvent("mouseleave",this._mouseOut),this.tipNode.removeEvent("mouseenter",this._mouseIn),this.tipNode.removeEvent("mousedown",this._mouseDown),document.removeEvent("keyup",this._mouseOut),this.parent()}})}),define.component("wysiwyg.common.components.QuickTour",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.utilize(["core.managers.components.ComponentBuilder"]),b.resources(["W.Utils","W.Resources"]),b.binds(["_handleWindowResize"]),b.fields({CLOSE_BUTTON_LANGUAGE_KEY:"",QUICK_TOUR_ITEM_TYPE:"wysiwyg.editor.components.QuickTourItem",QUICK_TOUR_ITEM_SKIN:"wysiwyg.editor.components.QuickTourItemSkin"}),b.methods({initialize:function(a,b,c){c=c||{},this.parent(a,b,c),this._initSlidesData(),this._currentSlideIndex=-1,window.addEvent(Constants.CoreEvents.RESIZE,this._handleWindowResize)},_initSlidesData:function(){},_onRender:function(a){var b=a.data.invalidations;b.isInvalidated([this.INVALIDATIONS.FIRST_RENDER])&&(this.resources.W.Commands.registerCommandAndListener("WEditorCommands.WSetEditMode",this,this._onSetEditorMode,null),this.resources.W.Commands.registerCommandAndListener("WEditorCommands.SetViewerMode",this,this._onSetViewerMode,null),this._previousBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this._skinParts.closeBtn.on("click",this,this._onCloseBtnClick),this._skinParts.closeBtn.innerHTML=this._translate(this.CLOSE_BUTTON_LANGUAGE_KEY),this._setSlide(0))},_setFocusRectangle:function(a,b,c,d,e){var f=this.resources.W.Utils.getWindowSize(!0);e&&(e=parseInt(e,10),a-=e,b-=e,c+=2*e,d+=2*e),this._skinParts.overlay.setStyle("border-left-width",Math.max(0,a)),this._skinParts.overlay.setStyle("border-top-width",Math.max(0,b)),this._skinParts.overlay.setStyle("border-right-width",Math.max(0,f.width-a-c)),this._skinParts.overlay.setStyle("border-bottom-width",Math.max(0,f.height-b-d)),this._skinParts.frame.setStyle("top",b+"px"),this._skinParts.frame.setStyle("left",a+"px"),this._skinParts.frame.setStyle("width",c+"px"),this._skinParts.frame.setStyle("height",d+"px")},_clearCurrentSlide:function(){this._currentSlide&&this._currentSlide.dispose(),this._currentSlideIndex=-1},_setSlide:function(a){if(clearTimeout(this._handleWindowResizeTO),this._clearCurrentSlide(),this._setFocusRectangle(0,0,0,0),a>=0&&a<this.SLIDES_DATA.length){if(this._currentSlide=this._createSlide(this.SLIDES_DATA[a],a),!this._currentSlide)return this._setSlide(a+1),void 0;this.SLIDES_DATA[a].onSlideDisplay&&this.SLIDES_DATA[a].onSlideDisplay(this,this._currentSlide),this._skinParts.slidesWrapper.appendChild(this._currentSlide),this._currentSlideIndex=a,a===this.SLIDES_DATA.length-1?this._skinParts.closeBtn.collapse():this._skinParts.closeBtn.uncollapse()}else this._onCloseBtnClick()},_createSlide:function(a,b){var c,d,e=this._getTargetElementData(b);return e?(e.element?this._setFocusRectangle(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,10):this._setFocusRectangle(0,0,0,0),c=this._createQuickTourItem(a,e),(d=c&&c.$logic)?(d.on("nextClick",this,function(){this._setSlide(this._currentSlideIndex+1)}),d.on("itemClick",this,function(a){var b=a.data.index;this._setSlide(b)}),c):void 0):null},_createQuickTourItem:function(a,b){var c=new Element("div"),d=new this.imports.ComponentBuilder(c);return d.withType(this.QUICK_TOUR_ITEM_TYPE).withSkin(this.QUICK_TOUR_ITEM_SKIN).withArgs({slideIndex:_.findIndex(this.SLIDES_DATA,{id:a.id}),numOfSlides:this.SLIDES_DATA.length,slideData:a,targetElement:b.element,targetBounds:b.bounds}).create(),c},_getTargetElementData:function(a){var b,c=this.SLIDES_DATA[a];if(c)return b=c.getSlideElement&&c.getSlideElement(this)||{element:null,bounds:{x:0,y:0,w:0,h:0}},b.element&&b.bounds&&(b.bounds.x+=b.element.getPosition().x,b.bounds.y+=b.element.getPosition().y,b.bounds.w+=b.element.getWidth(),b.bounds.h+=b.element.getHeight(),c.frameRelBounds&&(b.bounds.x+=c.frameRelBounds.x||0,b.bounds.y+=c.frameRelBounds.y||0,b.bounds.w+=c.frameRelBounds.w||0,b.bounds.h+=c.frameRelBounds.h||0)),b},_onCloseBtnClick:function(){this.dispose()},getMainEditorBar:function(){return W.Editor.getEditorUI().getSkinPart("mainEditorBar")},_onSetEditorMode:function(){this._onCloseBtnClick()},_onSetViewerMode:function(){this._onCloseBtnClick()},_handleWindowResize:function(){clearTimeout(this._handleWindowResizeTO),this.$view.setStyle("opacity",.01),this._handleWindowResizeTO=setTimeout(function(){this._setSlide(this._currentSlideIndex),this.$view.tween("opacity",1)}.bind(this),500)},dispose:function(){document.body.style.overflow=this._previousBodyOverflow,window.scrollTo(0,0),window.removeEvent(Constants.CoreEvents.RESIZE,this._handleWindowResize),this.exterminate()},_translate:function(a){return this.resources.W.Resources.get("EDITOR_LANGUAGE",a)}})}),define.component("wysiwyg.common.components.QuickTourItem",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.resources(["W.Resources"]),b.methods({initialize:function(a,b,c){c=c||{},this.parent(a,b,c),this.$view.setStyle("opacity",0),this._slideIndex=c.slideIndex,this._numOfSlides=c.numOfSlides,this._slideData=c.slideData,this._targetBounds=c.targetBounds},_onRender:function(a){var b=a.data.invalidations;b.isInvalidated([this.INVALIDATIONS.FIRST_RENDER])&&(this._renderTitleText(),this._renderBodyText(),this._renderNextButton(),this._renderItemPosition(),this._renderNavigation(),this._renderArrow(),this.$view.tween("opacity",0,1))},_renderTitleText:function(){this._skinParts.title.set("html",this._translate(this.TITLE_PATTERN.replace("%0%",this._slideData.id)))},_renderBodyText:function(){var a=this._translate(this.BODY_PATTERN.replace("%0%",this._slideData.id));a?this._skinParts.body.set("html",a):this._skinParts.body.collapse()},_renderNextButton:function(){var a=this._translate(this.BUTTON_LABEL_PATTERN.replace("%0%",this._slideData.id));a&&""!==a?(this._skinParts.nextButton.on("click",this,this._onNextBtnClick),this._skinParts.nextButton.setLabel(a)):this._skinParts.nextButton.collapse(),this._skinParts.nextButton.render()},_renderItemPosition:function(){this._slideData.fixedPos?(this.$view.setStyle("left",this._slideData.fixedPos.x+"px"),this.$view.setStyle("top",this._slideData.fixedPos.y+"px")):this._slideData.relPos&&(this.$view.setStyle("left",this._slideData.relPos.x+this._targetBounds.x+"px"),this.$view.setStyle("top",this._slideData.relPos.y+this._targetBounds.y+"px"))},_renderNavigation:function(){var a,b;for(b=0;b<this._numOfSlides;b++)a=new Element("li"),a.insertInto(this._skinParts.navList),a.on(Constants.CoreEvents.CLICK,this,this._onNavigationItemClick),b===this._slideIndex&&a.addClass("selected")},_renderArrow:function(){if(this._slideData.arrowData){var a=this._slideData.arrowData.curve,b=this._skinParts.arrowContainer,c=this.$view.getPosition(),d={x:c.x+this._slideData.arrowData.relStart.x,y:c.y+this._slideData.arrowData.relStart.y},e={x:this._targetBounds.x+this._slideData.arrowData.relEnd.x,y:this._targetBounds.y+this._slideData.arrowData.relEnd.y},f={x:Math.min(d.x,e.x),y:Math.min(d.y,e.y),w:Math.abs(e.x-d.x),h:Math.abs(e.y-d.y)};b.setStyle("left",f.x),b.setStyle("top",f.y),b.setStyle("width",f.w),b.setStyle("height",f.h),this._drawArrow(d.x-f.x,d.y-f.y,e.x-f.x,e.y-f.y,a)}},_drawArrow:function(a,b,c,d,e){var f=this._skinParts.arrowContainer.getElementById("arrowLine"),g=10;a+=c>a?g:-g,c+=c>a?-g:g,b+=d>b?g:-g,d+=d>b?-g:g;var h=c-a,i=d-b,j=0,k=0;e>0?j=h*e:0>e&&(k=-i*e);var l="m%x1%,%y1% c0,0 %cX%,%cY% %xDiff%,%yDiff%";l=l.replace("%x1%",a.toString()).replace("%y1%",b.toString()).replace("%xDiff%",h.toString()).replace("%yDiff%",i.toString()).replace("%cX%",j.toString()).replace("%cY%",k.toString()),f.setAttribute("d",l),f.setAttribute("marker-end","url(#triangle)")},_onNavigationItemClick:function(a){var b=Array.prototype.slice.call(a.target.parentNode.children),c=b.indexOf(a.target);this.trigger("itemClick",{index:c})},_onNextBtnClick:function(){this.trigger("nextClick",null)},_translate:function(a,b){return this.resources.W.Resources.get("EDITOR_LANGUAGE",a,b)},dispose:function(){this._targetElement=null,this._slideData=null,this.exterminate()}})}),define.Class("wysiwyg.common.utils.AnchorManager",function(a){var b=a;b.utilize(["wysiwyg.common.utils.ScrollAnimation"]),b.resources(["W.Commands","W.Data"]),b.binds(["_scrollToLocation"]),b.statics({SCROLL_DURATION_MS:700}),b.methods({initialize:function(a){this._scrollAnimation=new this.imports.ScrollAnimation,this.resources.W.Commands.registerCommandAndListener("WViewerCommands.SamePageScrollAnchor",this,this._scrollToLocation),this.resources.W.Commands.registerCommandAndListener("WViewerCommands.PageChangeComplete",this,this._scrollToLocation),this._viewerManager=a},increaseNumberOfAnchors:function(){this._numberOfAnchors||(this._numberOfAnchors=0),this._numberOfAnchors++},getNumberOfAnchors:function(){return this._numberOfAnchors||0},_scrollToLocation:function(){var a,b,c=sessionStorage.getItem("anchorDataId");return c?(a="SCROLL_TO_TOP"===c?0:"SCROLL_TO_BOTTOM"===c?document.body.scrollHeight:this._calculateAnchorYOffset(c),b=this._scrollAnimation.smoothScrollTo(a,this.SCROLL_DURATION_MS),sessionStorage.removeItem("anchorDataId"),b):null},_calculateAnchorYOffset:function(a){var b=this._getAnchorLogicByDataId(a),c=this._viewerManager.getHeaderContainer().getLogic(),d=c.isFixedPositioned(),e=d?c.getHeight():0,f=d?c.getPosition().y:0,g=f+e;return b?b.getGlobalPosition().y-g:0},_getAnchorLogicByDataId:function(a){var b=this.resources.W.Data.getDataByQuery("#"+a),c=b?b.get("compId"):null,d=this._viewerManager.getCompByID(c),e=this._viewerManager.getCompByID("mobile_"+c);return d?d.getLogic():e?e.getLogic():null}})}),define.Class("wysiwyg.common.utils.ScrollAnimation",function(a){var b=a;b.binds(["_scrollToNextPosition"]),b.statics({DEFAULTS:{DURATION:1e3,STEP_INTERVAL:16,EASING:"easeInOutExpo"},EASING:{easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}}}),b.methods({smoothScrollTo:function(a,b){return this._clearExistingScroll(),this._defered=Q.defer(),this._animationData={timeLapsed:0,startLocation:window.pageYOffset||document.documentElement.scrollTop,offset:a,realOffset:Math.min(a,this._getMaxPossibleScroll()),duration:b||this.DEFAULTS.DURATION,intervalObject:window.setInterval(this._scrollToNextPosition,this.DEFAULTS.STEP_INTERVAL)},this._defered.promise},_scrollToNextPosition:function(){var a=this._calculateNextPosition();window.scrollTo(0,a),this._animationData.timeLapsed>this._animationData.duration&&(window.clearInterval(this._animationData.intervalObject),this._defered.resolve(this._animationData))},_calculateNextPosition:function(a){return this._animationData.timeLapsed+=this.DEFAULTS.STEP_INTERVAL,this.EASING[a||this.DEFAULTS.EASING](this._animationData.timeLapsed,this._animationData.startLocation,this._animationData.realOffset-this._animationData.startLocation,this._animationData.duration)},_getMaxPossibleScroll:function(){return document.body.scrollHeight-(window.innerHeight||document.documentElement.clientHeight)},_clearExistingScroll:function(){this._animationData&&this._animationData.intervalObject&&window.clearInterval(this._animationData.intervalObject)}})}),define.component("wysiwyg.common.components.anchor.viewer.Anchor",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.resources(["W.Config","W.Viewer","W.Commands","W.Data"]),b.dataTypes(["Anchor"]),b.binds(["_setCompSize"]),b.utilize(["wysiwyg.common.utils.ScrollAnimation"]),b.states({visibility:["hidden","visible"]}),b.skinParts({}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._registerEvents()},_onRender:function(a){var b=a.data.invalidations;b.isInvalidated([this.INVALIDATIONS.FIRST_RENDER])&&(this._toggleVisibility(),this._setCompSize())},isRenderNeeded:function(a){var b=[this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.FIRST_RENDER];return a.isInvalidated(b)},_setCompSize:function(){this._setViewerWidth(),this._adjustToScreenWidth()},_setViewerWidth:function(){this._docWidth=this.resources.W.Viewer.getDocWidth(),this._clientWidth=document.body.clientWidth},_adjustToScreenWidth:function(){var a,b,c;this.resources.W.Config.env.isViewingSecondaryDevice()?(a=this._docWidth,b=0,c=a-this.getSelectableWidth()):(a=document.body.clientWidth,b=this._getDiff(),c=this._clientWidth-this.getSelectableWidth()),c-=this._getRulerWidth(),this.setWidth(a-2),this.$view.style.left=b+"px",this._skinParts.anchorFrame.style.left=c+"px"},_getDiff:function(){var a=(this._docWidth-this._clientWidth)/2;return a>=0?0:a},isInViewer:function(){return this.resources.W.Config.env.isPublicViewer()||this.resources.W.Config.env.isEditorInPreviewMode()},_toggleVisibility:function(){this.setState(this.isInViewer()?"hidden":"visible")},getShowOnAllPagesChangeability:function(){return!1},canBeDraggedIntoContainer:function(){return!1},_getRulerWidth:function(){return 0},dispose:function(){this._unregisterEvents(),this.parent()},_registerEvents:function(){window.addEvent("resize",this._setCompSize)},_unregisterEvents:function(){window.removeEvent("resize",this._setCompSize)}})}),define.dataSchema("Anchor",{name:{type:"string"},compId:{type:"string"}}),define.resource("anchorSkinMap",{"wysiwyg.common.components.anchor.viewer.skins.AnchorSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.anchor.viewer.skins.AnchorSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"}]),b.html('<hr skinPart="line"><div skinPart="anchorFrame"><div skinPart="anchorName"></div></div>'),b.css(["{height: 21px;}","[state~=visible] {visibility: visible !important;}","[state~=hidden] {visibility: hidden !important;}","%line% {border-top: 1px solid #35EAFF; margin: 0; border-bottom: 0px; width: 100%; position: absolute;}","%anchorFrame% {height: 21px; width: 122px; position: absolute; overflow: hidden; background: transparent url([tdr]anchor_sprite.png) no-repeat 0 0;}","%anchorName% {width: 75px; position: absolute; left: 35px; overflow: hidden; line-height: 21px; text-align: left; text-overflow: ellipsis; white-space: nowrap; font-size: 12px;}"])
}),define.component("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a){var b=a;b.resources(["W.Data","W.Config"]),b.inherits("core.components.base.BaseComp"),b.propertiesSchemaType("AreaTooltipProperties"),b.dataTypes(["AreaTooltip"]),b.skinParts({tooltip:{type:"htmlElement"},content:{type:"htmlElement"},arrow:{type:"htmlElement"},tooltipArea:{type:"htmlElement"}}),b.statics({_useWidthOverMinWidth:!0}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_onRender:function(a){var b=a.data.invalidations,c=[this.INVALIDATIONS.FIRST_RENDER],d=[this.INVALIDATIONS.DATA_CHANGE];b.isInvalidated(c)?(this._onFirstRender(),this._onDataChange(this.getDataItem())):b.isInvalidated(d)&&this._onDataChange(this.getDataItem()),this._onEachRender()},_onFirstRender:function(){},_onDataChange:function(){this._initializeTooTip(this.getViewNode(),this.getDataItem().get("tooltipText"),this.getComponentProperties().get("tooltipPosition"))},_onEachRender:function(){W.Config.env.isPublicViewer()||W.Config.env.isEditorInPreviewMode()?this.$view.removeClass("highligthed"):this.$view.addClass("highligthed")},_initializeTooTip:function(a,b,c){var d=(this._skinParts.tooltip,this);b&&b.trim().length>0&&(a.removeEvents("mouseover"),a.removeEvents("mouseout"),a.addEvent("mouseover",function(){d._showToolTipCmd({source:d._skinParts.tooltipArea,content:b,position:c})}),a.addEvent("mouseout",function(){d._closeToolTipCmd()}))},_showToolTipCmd:function(a){this._skinParts.content.innerHTML=a.content,this._skinParts.tooltip.style.display="block",this._setPosition(a.position),this._skinParts.tooltip.style.display="none",this._skinParts.tooltip.style.display="block"},_closeToolTipCmd:function(){this._skinParts.tooltip.style.display="none",this._skinParts.arrow.className="arrow",this._skinParts.content.removeClass("left")},_setPosition:function(a){this._skinParts.arrow.addClass(a);var b=14;"right"===a&&this._skinParts.tooltip.set("styles",{left:this.$view.clientWidth+b,top:this.$view.offsetHeight/2-this._skinParts.content.offsetHeight/2}),"top"===a&&this._skinParts.tooltip.set("styles",{left:0,top:-this._skinParts.content.offsetHeight-b}),"left"===a&&(this._skinParts.tooltip.set("styles",{left:-(400+b),top:this.$view.offsetHeight/2-this._skinParts.content.offsetHeight/2}),this._skinParts.content.addClass("left")),"bottom"===a&&this._skinParts.tooltip.set("styles",{left:0,top:this.$view.offsetHeight+b})}})}),define.dataSchema("AreaTooltip",{tooltipText:{type:"string","default":"I'm tooltip sample text"}}),define.dataSchema("AreaTooltipProperties",{tooltipPosition:{type:"string","default":"right"}}),define.resource("areatooltipSkinMap",{"wysiwyg.common.components.areatooltip.viewer.skins.AreaTooltipSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.areatooltip.viewer.skins.AreaTooltipSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"bgcolor",type:Constants.SkinParamTypes.OTHER,defaultValue:"#fffedf"},{id:"txtcolor",type:Constants.SkinParamTypes.OTHER,defaultValue:"#656565"},{id:"fnt",type:Constants.SkinParamTypes.OTHER,defaultValue:'font-family: "Helvetica Neue","HelveticaNeueW01-55Roma","HelveticaNeueW02-55Roma","HelveticaNeueW10-55Roma", Helvetica, Arial,sans-serif; font-size:12px; line-height:16px; '},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"5px"},{id:"max",type:Constants.SkinParamTypes.OTHER,defaultValue:"min-height:10px; min-width:10px; max-width:300px;"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<div skinpart="tooltip"><div skinpart="content" class="content"></div><div skinpart="arrow" class="arrow"></div></div><div skinpart="tooltipArea">&nbsp;</div>'),b.css(["%tooltip% { display:none; position:absolute; width:400px; z-index:999; white-space: pre-line;  }",".highligthed { border: 1px dashed #35eaff; }","%content% { [fnt][rd][shd][max] color:[txtcolor]; background:[bgcolor]; padding: 20px 10px; top:0px; left: 0px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25); border: 1px solid #999; background-image: -moz-linear-gradient(bottom, rgba(207, 229, 250, 0.1) 0px, #ffffff 10px); background-image: -webkit-linear-gradient(bottom, rgba(207, 229, 250, 0.1) 0px, #ffffff 10px);  background-image: -o-linear-gradient(bottom, rgba(207, 229, 250, 0.1) 0px, #ffffff 10px);  background-image: linear-gradient(bottom, rgba(207, 229, 250, 0.1) 0px, #ffffff 10px); background-position: bottom; max-width: 400px; position: relative; display: inline-block; overflow:hidden; }"," .content.left { float:right; }","%tooltip% .arrow { position:absolute; bottom:-6px; left:1px; width: 14px; height: 9px; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAJCAYAAAACTR1pAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHnkAACAowAA+fwAAIUxAAB7UAAA8o4AADYdAAAXwFwj+n8AAADpSURBVHjahMuxSsNwFMXhC65OnXwG38C1z9AH8A3cbohzB+kTdPD8UwQRRHBzqAgnLVLaRQuhg9JF0FBNI5JmaC1cp0IJSR3O9DufmJmYmbRuRrfzfG3Z0io3ev1cKdg0M5ENVDBw91FUheb52vwg/FCwXoQ1zzF5ibO8DF48TJ4VvFRQilAUPG5eDd6LaDpb5J5jouBBFRTPhY/dp7d0G55dD6cKnmw+pVDBQz8Is9nPyrKlWX8SJ57jWMG9/6Ao2EI3+koWv3ba6X0reLTdd8F9v9OL23fjVMHzQtsJRcGGgqmCtTL4NwB6/GFE7nUY+wAAAABJRU5ErkJggg==) }","%tooltip% .arrow.right {  top: 50%; height: 15px; left: -8px; margin-top: -6px; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOCAYAAAD9lDaoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHnkAACAowAA+fwAAIUxAAB7UAAA8o4AADYdAAAXwFwj+n8AAADYSURBVHjaYvj//z8DIcxAlKKyuQdwYaGyuQfmd605tR6XgoTyeQfezNt95crbr3/+o0tqlc87eLRl+fGnt55//vr55///n3/+hyviKZt7oKty/sHPu84/egeTRFYUUrng0PO5u668fvnx1390BTBF72Zsu/juzZffWBXAFAmVzT0wp2rBofeHrz1/g0sRDFuWzztwsWPVybt3X375iksRQ9ncA8xlcw/kl8878GbR3msX3n79g1URDEuUzT2wtHL+wWenbr/6hS/EGcrmHnAqm3ughai4AwwAZodhRLN81mcAAAAASUVORK5CYII=); }","%tooltip% .arrow.bottom { height: 15px; top: -2px; left: 8px; margin-top: -6px; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAJCAYAAAACTR1pAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHnkAACAowAA+fwAAIUxAAB7UAAA8o4AADYdAAAXwFwj+n8AAADkSURBVHjajMuxSsNQFIfxC65OnXwG38C1z9AH8A3cTohzh9In6NBzEwQRRHBzaBFOKqW0iwZCBqWLoKGaRuQ2w62Bv1OhXBrt8E0fPwVAEYtbg1gKYmm5D4ACoFQN7Pfu4sIPRxmxHO4LT87D0Ve++gEPkk9i6e4DDzwt8UOa5cYCi+81/CAyxHL8HzzrXE/nxgKbBo+vhaej8V/wyNOSzxerchsaC7SvJm/EcloHLy/u0ycXGQs8Z6b0tOTE0nBh0w+i92VZYRc0FtDDJCGWwIXt2cvHug4ZCyzLCt2b2e0G/g4A3jNhRL2nlJIAAAAASUVORK5CYII=); }","%tooltip% .arrow.left {  top: 50%; height: 15px; right: -13px; left:auto; margin-top: -6px;  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOCAYAAAD9lDaoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHnkAACAowAA+fwAAIUxAAB7UAAA8o4AADYdAAAXwFwj+n8AAADnSURBVHjajNExSgNhFATgH2ytUnkGb2DrGTyAN7CbZa1TSE5g4ewGQQQR7CwShNmIiGk0sKRQ0gi6RDcrstkiMfBsTBHyB1NM9xVv5jkzc//FgaqD2gXlVsV1Xz6mYZy8gzoDteVF5cRsVM3s9Kb/FETKQR2A2lhC8wyG4+ro4mEQROqB2vGieW77WX7Y7HyBOgFV86JyYpaPf+z4uleAKrxo+D01ttLPsNnJQO0todbjaxHGSQmqAWpz4abnrKzq5/dvQZTcgdpeaDeqZha10/Sv/r53p8Zl9wpUDKq2cvG1frcO+h0A2R9hRIFR27IAAAAASUVORK5CYII=); }"," { background-color: rgba(0, 0, 0, 0); zoom:1; display:block; }","p {display:block; margin:0; }","strong, b, i, big { font-size:12px; }","%tooltipArea% { width:100%; height:100%; zoom:1; display:block; position:absolute; background:url([tdr]transparent.gif) repeat; }"])}),define.component("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.propertiesSchemaType("BackOfficeTextProperties"),b.dataTypes(["BackOfficeText"]),b.resources(["W.Resources","W.Data","W.Config"]),b.skinParts({label:{type:"htmlElement"}}),b.fields({EDITOR_META_DATA:{general:{settings:!0,design:!0}},_canFocus:!0,_triggers:["click"]}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_onRender:function(a){var b=a.data.invalidations,c=this.getDataItem();c&&b.isInvalidated([this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.STYLE_PARAM_CHANGE,this.INVALIDATIONS.SKIN_CHANGE])&&(this._skinParts.label.innerHTML=this._getGlobalValue(c.get("key")),this._setTextAlignment(),this._setTextMargin())},_getGlobalValue:function(a){var b=this._getLanguage(),c=!!window.componentGlobals,d=c&&!!window.componentGlobals.backOfficeText,e=d&&!!window.componentGlobals.backOfficeText[b],f=d&&!!window.componentGlobals.backOfficeText.en,g=e&&!!window.componentGlobals.backOfficeText[b][a],h=f&&!!window.componentGlobals.backOfficeText.en[a];return d&&e&&g?window.componentGlobals.backOfficeText[b][a]:d&&f&&h?window.componentGlobals.backOfficeText.en[a]:this._isWixUser()?a:""},_setTextAlignment:function(){var a=this.getComponentProperty("align");this._skinParts.label.setStyle("text-align",a)},_setTextMargin:function(){var a=this.getComponentProperty("margin"),b=this.getComponentProperty("align");"left"===b?(this._skinParts.label.setStyle("padding-right",""),this._skinParts.label.setStyle("padding-left",a+"px")):"right"===b?(this._skinParts.label.setStyle("padding-left",""),this._skinParts.label.setStyle("padding-right",a+"px")):(this._skinParts.label.setStyle("padding-left",""),this._skinParts.label.setStyle("padding-right",""))},_isWixUser:function(){var a,b=function(a,b){return a.indexOf(b)===a.length-b.length},c=function(a){return a&&b(a,"@wix.com")};return a=this.resources.W.Config.getUserEmail(),c(a)},_getLanguage:function(){return window.userApi?window.userApi.getLanguage():"en"}})}),define.dataSchema("BackOfficeText",{key:{type:"string"}}),define.dataSchema("BackOfficeTextProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the text"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.resource("backofficetextSkinMap",{"wysiwyg.common.components.backofficetext.viewer.skins.BackOfficeTextSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.backofficetext.viewer.skins.BackOfficeTextSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"txth",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_15"},{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_15"},{id:"fnt",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5"},{id:"trans",type:Constants.SkinParamTypes.TRANSITION,defaultValue:"color 0.4s ease 0s"}]),b.html('<div skinPart="label"></div>'),b.css(["%label%   { [fnt] color:[txt]; white-space:nowrap; [trans] }",":hover %label%   { color:[txth]; [trans] }"])}),define.component("wysiwyg.common.components.basicmenu.viewer.BasicMenu",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.dataTypes(["Menu","MenuDataRef"]),b.traits(["wysiwyg.common.components.basicmenu.viewer.traits.MenuElementsParser","wysiwyg.common.components.basicmenu.viewer.traits.BasicMenuDataHandler","wysiwyg.common.components.basicmenu.viewer.traits.MenuDomBuilder"]),b.utilize(["wysiwyg.common.utils.LinkRenderer"]),b.resources(["W.Viewer","W.Data"]),b.skinParts({menuContainer:{type:"htmlElement"}}),b.statics({ASPECT_RATIO_LIMIT:0}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._linkRenderer=new this.imports.LinkRenderer,this._menuDataItem=null},_onRender:function(a){this._isFirstDataChange(a)&&this._handleFirstDataChange(),(this._hasSkinChanged(a)||this._hasCompBeenDisplayed(a))&&this._handleSkinChange()},getItemLabel:function(){},getSelectedLinkId:function(){},_isFirstDataChange:function(a){var b=this._getDataChange(a);return!(!this._isFirstRender(a)||!b)},_isFirstRender:function(a){return!!a.data.invalidations.getInvalidationByType(this.INVALIDATIONS.FIRST_RENDER)},_handleSkinChange:function(){if(!this._skinParts.menuItem)throw new Error("Skin did not supply menuItem skinpart");this._skinParts.menuItem=this._skinParts.menuItem.cloneNode(!0),this._menuContainer=this._skinParts.menuContainer,this.buildItemList(),this._renderLinks(this._menuContainer.getChildren(),this._menuDataNP.get("items")),this._handleAspectRatioLimit()},_handleAspectRatioLimit:function(){this._skinParts.limitAspectRatio&&this.ASPECT_RATIO_LIMIT&&(this._sizeLimits=this._sizeLimits||{},this._sizeLimits.maxH=this.getWidth()*this.ASPECT_RATIO_LIMIT)},setWidth:function(a){this.parent(a),this._handleAspectRatioLimit()},_renderLinks:function(a,b){_.forEach(b,function(a){if(this.isItemVisible(a)){var b=a.get("link");if(b){var c=this.resources.W.Data.getDataByQuery(b),d=this._getViewNodesByLinkId(b);_.forEach(d,function(b){var d=this.getLabelElement(b);d&&this._linkRenderer.renderLink(d,c,this);var e=a.get("items"),f=this.getListElement(b).getChildren();f.length&&e.length&&this._renderLinks(f,e)},this)}}},this)},_hasSkinChanged:function(a){return!!a.data.invalidations.getInvalidationByType(this.INVALIDATIONS.SKIN_CHANGE)},_hasCompBeenDisplayed:function(a){return!!a.data.invalidations.getInvalidationByType(this.INVALIDATIONS.DISPLAY)},_getDataChange:function(a,b){var c,d=a.data.invalidations.getInvalidationByType(this.INVALIDATIONS.DATA_CHANGE);return _(d).find(function(a){return c="core.managers.data.PropertiesItem"===a.dataItem.$className,b?c:!c})},_getPropertyChange:function(a){return this._getDataChange(a,!0)}})}),define.dataSchema("BasicMenuItem",{link:"ref",items:"list",label:"string"}),define.dataSchema("MenuDataRef",{menuRef:{type:"ref","default":"#MAIN_MENU"}}),define.resource("basicmenuSkinMap",{"wysiwyg.common.components.basicmenu.viewer.skins.BasicMenuSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!0,index:0}}),define.skin("wysiwyg.common.components.basicmenu.viewer.skins.BasicMenuSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!0,index:0}),b.skinParams([]),b.html('<ol skinpart="menuContainer"></ol>'),b.css(["li a {white-space:nowrap;}"])}),define.Class("wysiwyg.common.components.basicmenu.viewer.traits.BasicMenuDataHandler",function(a){var b=a;b.methods({initialize:function(){this._menuDataNP=null},_handleFirstDataChange:function(){var a=this.getDataItem(),b=a.get("id");if("#"!==b[0]&&(b="#"+b),"#MAIN_MENU"===b)this._menuDataNP=this._createMenuNonPersistentData(a),this._migrateData(a);else{var c=a.get("menuRef");"#MAIN_MENU"===c?(this._mainMenuData=this.resources.W.Data.getDataByQuery(c),this._menuDataNP=this._createMenuNonPersistentData(this._mainMenuData)):this._menuDataNP=this.resources.W.Data.getDataByQuery(c)}},_createMenuNonPersistentData:function(a){var b=this._createNonPersistentRawData(a);return this.resources.W.Data.createDataItem(b)},_createNonPersistentRawData:function(a){var b=this.createLinkDataItem(a),c=this.getItemLabel(a),d=this._createItemsData(a.get("items"));return{type:"BasicMenuItem",items:d,label:c,link:b?"#"+b.id:null}},_getHrefValue:function(a){return a.get("refId")},createLinkDataItem:function(a){var b=this._getHrefValue(a);return this.resources.W.Data.addDataItemWithUniqueId("",{type:"PageLink",pageId:b})},_createItemsData:function(a){var b=[];return _(a).forEach(function(a){b.push(this._createMenuNonPersistentData(a))},this),b},_migrateData:function(a){var b=a.get("id");a=this._createMenuData(b),this.setDataItem(a)},_createMenuData:function(a){var b={type:"MenuDataRef",menuRef:a};return this.resources.W.Data.createDataItem(b)}})}),define.Class("wysiwyg.common.components.basicmenu.viewer.traits.MenuDomBuilder",function(a){var b=a;b.methods({buildItemList:function(){this._menuContainer.set("html",""),this._buildMenuDomAccordingToData(this._menuDataNP.get("items"),this._menuContainer),this._renderLinks(this._menuContainer.getChildren(),this._menuDataNP.get("items")),this._setMenuMinHeight(),this._setSelectedButton(this.getSelectedLinkId()),this._menuContainer.on("click",this,this._onMenuClicked)},_onMenuClicked:function(a){var b,c,d=a.target,e="li"===d.tagName.toLowerCase()?d:d.getParent("li"),f=e.get("linkId");f&&"undefined"!==f&&(b=this.resources.W.Data.getDataByQuery(f),c=b.get("pageId").substring(1),this.resources.W.Viewer.goToPage(c))},_buildMenuDomAccordingToData:function(a,b){for(var c,d,e=0;e<a.length;e++){var f=a[e];this.isItemVisible(f)&&(c=this._buildItem(f,b),d=this.getListElement(c),f.get("items").length?this._buildMenuDomAccordingToData(f.get("items"),d):this._markEmptySubMenu(d))}},_markEmptySubMenu:function(a){a.addClass("emptySubMenu")},isItemVisible:function(){return!0},_buildItem:function(a,b){var c=this._getElementInstanceAccordingToTemplate(b),d=this.parseElement(c);return this._arrangeLabel(d.label,a),this._arrangeList(d.list),this._arrangeLinkAttribute(d.item,a.get("link")),this._arrangeItem(d.item,b),d.item},_getElementInstanceAccordingToTemplate:function(a){var b;b=a.hasClass("subMenu")&&this._skinParts.subMenuItem?this._skinParts.subMenuItem.outerHTML:this._skinParts.menuItem.outerHTML;var c=new Element("div",{html:b});return c.getFirst()},_arrangeLabel:function(a,b){var c=this.getLabelElemTag(b),d=this.getLabelElemParams(b,c);a.setProperties(d),a.tagName.toLowerCase()!==c&&this._replaceElementTag(a,c)},getLabelElemTag:function(){return"a"},getLabelElemParams:function(a){return{html:a.get("label"),"class":"label"}},_replaceElementTag:function(a,b){var c=_.map(a.attributes,function(a){return a.nodeName}),d=_.map(a.attributes,function(a){return a.nodeValue}),e=_.zipObject(c,d);e.html=a.innerHTML,new Element(b,e).replaces(a)},_arrangeList:function(a){a.addClass("subMenu")},_arrangeItem:function(a,b){a.removeAttribute("skinpart"),a.insertInto(b),b.hasClass("subMenu")&&a.setStyle("line-height",a.getHeight())},_arrangeLinkAttribute:function(a,b){a.setAttribute("linkId",b)},_setMenuMinHeight:function(){var a=this.getLabelElement(this._menuContainer.getFirst());if(a){var b=a.getHeight();this.setMinH(b)}},getLabelElementsIdentifiers:function(){return["a"]},_setSelectedButton:function(a){if(this._menuContainer&&a){var b=this._menuContainer.getElements("li.selected, li.selectedContainer");_.forEach(b,function(a){a.hasClass("selected")?a.removeClass("selected"):a.removeClass("selectedContainer")});var c=this._getViewNodesByLinkId(a);_.forEach(c,function(a){a.addClass("selected"),_.forEach(a.getParents("li"),function(a){a.addClass("selectedContainer")})})}},_getViewNodesByLinkId:function(a){return this._menuContainer.getElements('li[linkId="'+a+'"]')},_getViewNodesByHref:function(a){return a="#"===a[0]?a.substring(1):a,_.filter(this._menuContainer.getElements("li"),function(b){return this._getButtonIdentifier(b)===a},this)},_getButtonIdentifier:function(a){var b=this.getLabelElement(a);return b&&b.getAttribute("href")}})}),define.Class("wysiwyg.common.components.basicmenu.viewer.traits.MenuElementsParser",function(a){var b=a;b.methods({parseElement:function(a){var b={};return b.item="li"===a.tagName.toLowerCase()?a:a.getElement("li"),b.label=a.getElement("a"),b.list=a.getElement("ol"),b},getLabelElement:function(a){for(var b,c=a.getChildren(),d="label",e=0;e<c.length;e++){var f=c[e];if("ol"===f.tagName.toLowerCase())return null;if(f.hasClass(d))return f;if(f.getChildren().length&&(b=this.getLabelElement(f)))return b}return null},getListElement:function(a){for(var b,c=a.getChildren(),d=0;d<c.length;d++){var e=c[d];if("ol"===e.tagName.toLowerCase())return e;if(e.getChildren().length&&(b=this.getListElement(e)))return b}return null}})}),define.component("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.skinParts({content:{type:"htmlElement"},searchDomainContainer:{type:"htmlElement"},frmSearchDomain:{type:"htmlElement"},txtDomain:{type:"htmlElement"},suffixSelectionWrapper:{type:"htmlElement"},selectedSuffixWrapper:{type:"htmlElement"},selectedSuffix:{type:"htmlElement"},suffixDropdown:{type:"htmlElement"},searchDomainButton:{type:"htmlElement"},loaderOverlay:{type:"htmlElement"},loader:{type:"htmlElement"},buyDomainContainer:{type:"htmlElement"},availableDomainName:{type:"htmlElement"},availableDomainPrice:{type:"htmlElement"},btnBuyAvailableDomain:{type:"htmlElement"},searchAgain:{type:"htmlElement"},error:{type:"htmlElement"},alternativeDomainsContainer:{type:"htmlElement"},alternativeDomains:{type:"htmlElement"},frmBuyDomain:{type:"htmlElement"},txtBuyDomainValue:{type:"htmlElement"},tmplDomainSuggestion:{type:"htmlElement"}}),b.states({topBar:["topBar-search","topBar-buy"],suffixMenu:["suffixMenu-closed","suffixMenu-open"],loader:["loader-off","loader-on"],error:["error-off","error-on"],altDomains:["altDomains-hide","altDomains-show"],inputPlaceholder:["inputPlaceholder-off","inputPlaceholder-on"]}),b.statics({_errorMessages:{UNKNOWN_ERROR:"An unknown error occurred.",INVALID_CHARS:"Domain contains invalid characters. Please try again.",TOO_SHORT:"Domain name is too short.",TOO_LONG:"Domain name is too long.",DOMAIN_UNAVAILABLE:"The domain {{domainName}} is not available."},_domainPrices:{com:14.95,"co.uk":13.95,biz:15.95,info:14.95,org:14.95,net:14.95},_maxDomainLength:63,_serviceUrl:"https://premium.wix.com/wix/api/checkDomainNameAvailableAPI",_defaultRefCode:99,_buyDomainUrl:"https://premium.wix.com/wix/api/domainDirectPurchaseForm?referralAdditionalInfo=Da_{{refCode}}"}),b.binds(["_openSuffixDropdown","_closeSuffixDropdown","_onDomainInputKeyDown","_onSearchDomainClicked","_onDomainDataReceived","_onSelectSuffix","_displaySearchPanel","_onBuyAvailableDomainClicked","_onBuySuggestedDomainClicked"]),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.EDITOR_META_DATA={general:{settings:!1,design:!1}}},isRenderNeeded:function(a){var b=[this.INVALIDATIONS.SKIN_CHANGE,this.INVALIDATIONS.STYLE_PARAM_CHANGE,this.INVALIDATIONS.DISPLAY,this.INVALIDATIONS.FIRST_RENDER];return a.isInvalidated(b)},_onRender:function(){this._addSearchDomainFormToDOM(),Modernizr.input.placeholder||this._setupInputPlaceholderText(this._skinParts.txtDomain),this._bindEvents(),this._displaySearchPanel()},_bindEvents:function(){var a=this._skinParts;a.frmSearchDomain.addEvent("submit",this._onSearchDomainClicked),a.searchAgain.addEvent("click",this._displaySearchPanel),a.btnBuyAvailableDomain.addEvent("click",this._onBuyAvailableDomainClicked),a.alternativeDomains.addEvent("click",this._onBuySuggestedDomainClicked),a.txtDomain.addEvent("keydown",this._onDomainInputKeyDown),a.suffixDropdown.addEvent("click",this._onSelectSuffix),$(a.suffixSelectionWrapper).addEvents({mouseenter:this._openSuffixDropdown,mouseleave:this._closeSuffixDropdown})},_addSearchDomainFormToDOM:function(){this._skinParts.searchDomainContainer.grab(this._skinParts.frmSearchDomain,"top"),this._skinParts.frmSearchDomain.setStyle("display","block")},_validateDomainValue:function(){var a=this._getDomainInputValue().trim();if(!a)return this._hideError(),!1;var b=this._skinParts&&this._skinParts.txtDomain?this._skinParts.txtDomain.get("placeholder"):"";if(a==b)return this._hideError(),!1;var c=/^[\.-]|[\.-]$/i.test(a),d=/[\-\.]{2,}/i.test(a),e=!/^([a-z0-9\-\.]+)$/i.test(a);return c||d||e?(this._showError(this._errorMessages.INVALID_CHARS),!1):(a=a.split(".")[0].trim(),a.length<3?(this._showError(this._errorMessages.TOO_SHORT),!1):a.length>63?(this._showError(this._errorMessages.TOO_LONG),!1):!0)},_onBuyAvailableDomainClicked:function(){var a=this._skinParts.availableDomainName.innerHTML,b=this._defaultRefCode;this._submitBuyNowForm(a,b)},_onBuySuggestedDomainClicked:function(a){if(a&&a.target&&a.target.get("data-domain")){var b=a.target.get("data-domain"),c=a.target.get("data-refCode");this._submitBuyNowForm(b,c)}},_submitBuyNowForm:function(a,b){b=b||this._defaultRefCode,a=a||this._getFullDomainValue(),this._skinParts.txtBuyDomainValue.value=a,this._skinParts.frmBuyDomain.setAttribute("action",this._buyDomainUrl.replace("{{refCode}}",""+b)),$(this._skinParts.frmBuyDomain).submit()},_onSearchDomainClicked:function(){return this._validateDomainValue()?(this._blurDomainInput(),this._showLoader(),this._getDomainData().done(this._onDomainDataReceived),!1):(this._hideDomainSuggestionsList(),!1)},_getDomainData:function(){{var a=Q.defer();new Request.JSONP({method:"get",url:this._serviceUrl,data:{domainName:this._getFullDomainValue()},onSuccess:function(b){a.resolve(JSON.parse(b))}}).send()}return a.promise},_onDomainDataReceived:function(a){return this._hideLoader(),this._hideDomainSuggestionsList(),a&&a.domainName?(a.available?(this._displayBuyNowPanel(a.domainName),this._hideError()):(this._displayUnavailableDomainMessage(a.domainName),a.suggestions=a.suggestions||[],a.otherSuggestions&&a.otherSuggestions.length&&a.suggestions.combine(a.otherSuggestions),a.suggestions.length&&this._renderDomainSuggestions(a.suggestions,a.domainName)),this.invalidate("sizeChange"),void 0):(this._showError(this._errorMessages.UNKNOWN_ERROR),void 0)},_displaySearchPanel:function(){this.setState("topBar-search","topBar"),this._clearDomainInputValue()},_displayBuyNowPanel:function(a){this._skinParts.availableDomainName.innerHTML=this._getShortenedDomainName(a),this._skinParts.availableDomainPrice.innerHTML="$"+this._getDomainPrice(a),this.setState("topBar-buy","topBar")},_displayUnavailableDomainMessage:function(a){var b=this._errorMessages.DOMAIN_UNAVAILABLE.replace("{{domainName}}",this._getShortenedDomainName(a));this._showError(b)},_onDomainInputKeyDown:function(){var a=this._getDomainInputValue(),b=a.length;0===b?(this._hideDomainSuggestionsList(),this._hideError()):b>this._maxDomainLength&&this._setDomainInputValue(a.substr(0,this._maxDomainLength))},_renderDomainSuggestions:function(a,b){if(a&&a.length){for(var c="",d=0;d<a.length;++d)c+=this._renderSingleDomainSuggestion(a[d],b);this._showDomainSuggestionsList(c)}},_renderSingleDomainSuggestion:function(a,b){var c=this._skinParts.tmplDomainSuggestion.innerHTML;a.domainPrice="$"+this._getDomainPrice(a.domainName),a.refCode=this._getRefCode(a.domainName,b);var d=c.replace(/\{\{([^}]+)\}\}/g,function(b,c){return a[c]||""});return d},_openSuffixDropdown:function(){this.setState("suffixMenu-open","suffixMenu")},_closeSuffixDropdown:function(){this.setState("suffixMenu-closed","suffixMenu")},_onSelectSuffix:function(a){this._closeSuffixDropdown();var b=a.target.innerHTML;this._setSuffix(b)},_getSuffix:function(){return this._skinParts.selectedSuffix.innerHTML},_setSuffix:function(a){this._skinParts.selectedSuffix.innerHTML=a},_showLoader:function(){this.setState("loader-on","loader")},_hideLoader:function(){this.setState("loader-off","loader")},_showError:function(a){this._skinParts.error.innerHTML=a,this.setState("error-on","error"),this.invalidate("sizeChange")},_hideError:function(){this.setState("error-off","error"),this.invalidate("sizeChange")},_showDomainSuggestionsList:function(a){this._skinParts.alternativeDomains.innerHTML=a,this.setState("altDomains-show","altDomains"),this.invalidate("sizeChange")},_hideDomainSuggestionsList:function(){this.setState("altDomains-hide","altDomains"),this.invalidate("sizeChange")},_getDomainInputValue:function(){return this._skinParts.txtDomain.value},_setDomainInputValue:function(a){this._skinParts.txtDomain.value=a||""},_clearDomainInputValue:function(){this._setDomainInputValue(""),this._skinParts.txtDomain.setAttribute("tabIndex",0);try{this._skinParts.txtDomain.focus()}catch(a){}},_blurDomainInput:function(){this._skinParts&&this._skinParts.txtDomain&&this._skinParts.txtDomain.blur()},_getFullDomainValue:function(){return this._getDomainInputValue().split(".")[0].trim()+this._getSuffix()},_getShortenedDomainName:function(a){var b=this._parseDomainInfo(a);return b.name.length>22?(b.name=b.name.substr(0,22),b.name+"..."+b.suffix):a},_getDomainPrice:function(a){var b=this._parseDomainInfo(a).suffix,c=this._domainPrices[b]||this._domainPrices.com;return c},_getRefCode:function(a,b){return a=this._parseDomainInfo(a),b=this._parseDomainInfo(b),a.name==b.name&&a.suffix!=b.suffix?98:a.name!=b.name&&a.suffix==b.suffix?97:99},_parseDomainInfo:function(a){var b=a.split("."),c=b.shift(),d=b.join(".");return{name:c,suffix:d,fullDomain:a}},_setupInputPlaceholderText:function(a){var b=a.get("placeholder");a.addEvent("focus",function(){a.value==b&&(a.value="",this.setState("inputPlaceholder-off","inputPlaceholder"))}.bind(this)),a.addEvent("blur",function(){a.value||(a.value=b,this.setState("inputPlaceholder-on","inputPlaceholder"))}.bind(this)),a.fireEvent("blur")}})}),define.resource("domainsearchbarSkinMap",{"wysiwyg.common.components.domainsearchbar.viewer.skins.DomainSearchBarSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.domainsearchbar.viewer.skins.DomainSearchBarSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"1px"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"trans",type:Constants.SkinParamTypes.TRANSITION,defaultValue:"all 0.4s ease 0s"},{id:"$BorderRadius",type:Constants.SkinParamTypes.BORDER_RADIUS,noshow:!0,defaultValue:"6px"},{id:"$BorderRadiusLeftOnly",type:Constants.SkinParamTypes.BORDER_RADIUS,mutators:["square",["tl","bl"]],noshow:!0,defaultParam:"$BorderRadius"}]),b.html('<div skinpart="content"><div class="topBar"><div skinpart="searchDomainContainer"><div skinpart="loaderOverlay"></div><div skinpart="loader"></div></div><div skinpart="buyDomainContainer"><div class="availableIcon"></div> <p skinpart="availableDomainName">test-domain-text.com</p><p class="availableLabel">is available</p><div skinpart="availableDomainPrice">$0.99</div> <a skinpart="btnBuyAvailableDomain">Buy Now</a> <div skinpart="searchAgain">Search Again</div></div></div><div skinpart="error">The domain yotam.com is not available.</div><div skinpart="alternativeDomainsContainer"><p>Check out these available domains:</p><ul skinpart="alternativeDomains"></ul></div><form skinpart="frmBuyDomain" method="POST" action="https://premium.wix.com/wix/api/domainDirectPurchaseForm?referralAdditionalInfo=Da_99"><input skinpart="txtBuyDomainValue" type="hidden" name="domainName" /> </form><div skinpart="tmplDomainSuggestion"><li><div class="altDomainInfo"><div class="altDomainName">{{domainName}}</div><div class="altDomainPrice">{{domainPrice}}</div></div><div class="btnBuyAltDomain" data-domain="{{domainName}}" data-refCode="{{refCode}}">Buy Now</div></li></div><form skinpart="frmSearchDomain" action="" method="GET"><div class="domainInputWrapper"><input type="text" skinpart="txtDomain" name="txtDomain" autofocus placeholder="Search for the domain you want" value="" /></div><div skinpart="suffixSelectionWrapper"><div skinpart="selectedSuffixWrapper"><span skinpart="selectedSuffix">.com</span><span class="selectionArrow"></span></div><ul skinpart="suffixDropdown"><li>.com</li><li>.co.uk</li><li>.biz</li><li>.info</li><li>.org</li><li>.net</li></ul></div><div class="searchDomainButtonWrapper"><input type="submit" value="Search" skinpart="searchDomainButton" data-refCode="99" /></div></form></div>'),b.css(['%content% { font-family: "Helvetica Neue", "HelveticaNeueW01-55Roma", "HelveticaNeueW02-55Roma", "HelveticaNeueW10-55Roma", Helvetica, Arial, sans-serif; font-size: 21px; }',":after { display:none; content:url([tdr]search-btn-hover.png) url([tdr]ajax-loader.gif) url([tdr]yes-icon.png) url([tdr]no-icon.png) url([tdr]buy-button.png) url([tdr]buy-button-hover.png) url([tdr]search-again-arrow.png); }","%.topBar% { border:[brw] solid #cfcfcf; [$BorderRadius]; background-color: #f5f5f5; height: 115px; }","%searchDomainContainer% { display: none; position: relative; margin: 30px 15px; height: 53px; background-color: white; border:[brw] solid #cfcfcf; [$BorderRadius] }","[state~=topBar-search] %searchDomainContainer% { display: block; }","%frmSearchDomain% { display: none; }","%.domainInputWrapper% { position:absolute; right:0; bottom:0; left:0; right: 258px; padding: 0 15px; }","%txtDomain% { border: 0; height: 53px; line-height: 49px; font-size: 21px; width: 100% }","[state~=inputPlaceholder-on] %txtDomain% { color: #aaa; }","%suffixSelectionWrapper% { position: relative; float: right; margin-right: 174px; width: 82px; border-right: [brw] solid #cfcfcf; border-left: [brw] solid #cfcfcf; line-height: 53px; height: 53px; text-align: center; color: #a9a9a9; cursor: pointer; }","%.selectionArrow% { display: inline-block; background:url([tdr]triangle-selector.png); width: 12px; height: 6px; position: relative; top: -3px; left: 4px; }","%selectedSuffixWrapper%:hover { background-color: #e7f3ff; }","%suffixDropdown% { z-index: 1; height: 0px; [trans]; position: absolute; width: 100%; top: 54px; left: -1px; border-left: [brw] solid #cfcfcf; border-right: [brw] solid #cfcfcf; overflow: hidden; }","[state~=suffixMenu-open] %suffixDropdown% { height: 324px; }","%suffixDropdown% li { display: block; height: 53px; border-bottom: [brw] solid #cfcfcf; background-color: white; }","%suffixDropdown% li:hover { background-color: #e7f3ff; }","%.searchDomainButtonWrapper% { position: absolute; right: 0; }","%searchDomainButton% { width: 174px; height: 53px; border: 0; margin: 0; font-size: 24px; color: white; background:url([tdr]search-btn.png); padding: 0; [$BorderRadiusLeftOnly]; cursor: pointer; }","%searchDomainButton%:hover { background:url([tdr]search-btn-hover.png); }","%loaderOverlay% { display: none; position: absolute; width: 848px; height: 53px; background-color: white; [$BorderRadius]; opacity: 0.4; position:absolute; top:0; bottom:0; left: 0px; right: 0px; }","%loader% { display: none; background-image: url([tdr]ajax-loader.gif); width: 32px; height: 32px; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; }","[state~=loader-on] %loaderOverlay%, [state~=loader-on] %loader% { display: block; }","%buyDomainContainer%{ display: none; position: relative; height: 50px; width: 728px; margin: 33px auto 31px; color: #555555; }","[state~=topBar-buy] %buyDomainContainer% { display: block; }","%.availableIcon%{ display: inline-block; width: 50px; height: 50px; background:url([tdr]yes-icon.png); margin-right: 15px; }","%availableDomainName%{ position: absolute; top: -5px; left: 70px; font-size: 28px; max-width: 337px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }","%.availableLabel%{ display: inline-block; position: relative; font-size: 20px; color: #6bb445; }",'%availableDomainPrice%{  display: inline-block;position: absolute;font-family: "Helvetica Neue Light", "HelveticaNeueW01-45Ligh", "HelveticaNeueW02-45Ligh", "HelveticaNeueW10-45Ligh", Helvetica, Arial, sans-serif;font-size: 30px;color: #555555;right: 225px;top: 10px;}','%btnBuyAvailableDomain%{ display: inline-block;position: absolute;font-family: "Helvetica Neue Medium", "HelveticaNeueW01-65Medi", "HelveticaNeueW02-65Medi", "HelveticaNeueW10-65Medi", Helvetica, Arial, sans-serif;font-size: 24px;color: white;background:url([tdr]buy-button.png);right: 0px;top:3px;padding: 8px 30px 8px;border-radius: 6px;cursor: pointer;}',"%btnBuyAvailableDomain%:hover{ background:url([tdr]buy-button-hover.png); }","%searchAgain% { position: absolute; bottom: -57px; left: -65px; background: url([tdr]search-again-arrow.png) 0 1px no-repeat; padding-left: 17px; cursor: pointer; font-size: 14px; }","%error% { display: none; position: relative; margin-top:35px; height: 50px; background:url([tdr]no-icon.png) 0 0 no-repeat; padding-left: 65px; line-height: 54px; font-size: 20px; color: #555555; }","[state~=error-on] %error% { display: block; }","%alternativeDomainsContainer% { display: none; position: relative; margin-top: 30px; width: 100%; font-size: 20px; color: #555555; }","[state~=altDomains-show] %alternativeDomainsContainer% { display: block; }","%alternativeDomainsContainer% p { margin-bottom: 5px; }","%alternativeDomains% li { position: relative; left: 0; right: 0; height: 53px; line-height: 53px; }","%.altDomainInfo% { display: inline-block; position: absolute; left: 0; right: 130px; border-bottom: [brw] solid #cfcfcf; }","%alternativeDomains% li:last-child %.altDomainInfo% { border: 0; }","%.altDomainName% { float: left; }","%.altDomainPrice% { float: right; color: black; }","%.btnBuyAltDomain% { position: relative; float: right; top: 5px; color: #545454; display: inline-block; font-size: 16px; background-color: #FFF; border: 1px solid #CFCFCF; [$BorderRadius]; line-height: 42px; padding: 0 20px; cursor: pointer; }","%.btnBuyAltDomain%:hover { background-color: #f5f5f5; }","%tmplDomainSuggestion% { display: none; }"])
}),define.resource("dropdownmenuSkinMap",{"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin":{description:"Arrow Right Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/arrows.png",hidden:!1,index:17},"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin":{description:"Indented Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/indented.png",hidden:!1,index:15},"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin":{description:"Lines Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menulines.png",hidden:!1,index:10},"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin":{description:"Overline Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menuoverline.png",hidden:!1,index:6},"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin":{description:"Pointer Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menuribbonbottom.png",hidden:!1,index:12},"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin":{description:"Ribbons Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/muenuribbons.png",hidden:!1,index:13},"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin":{description:"Separate Basic Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menubuttons.png",hidden:!1,index:7},"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin":{description:"Separate Indented Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/separateindented.png",hidden:!1,index:16},"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin":{description:"Separate Lines Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menuseperatelines.png",hidden:!1,index:11},"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin":{description:"Separate Shiny-Buttons Menu II",iconUrl:"/images/wysiwyg/skinIcons/menu/menubuttonsshiny.png",hidden:!1,index:9},"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin":{description:"Separate Shiny I Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menubuttonsshiny.png",hidden:!1,index:8},"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin":{description:"Shiny Menu I ",iconUrl:"/images/wysiwyg/skinIcons/menu/menusolidshiny.png",hidden:!1,index:4},"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin":{description:"Shiny Menu II ",iconUrl:"/images/wysiwyg/skinIcons/menu/menusolidgradient.png",hidden:!1,index:5},"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin":{description:"Sloppy Border Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/sloppy.png",hidden:!1,index:18},"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin":{description:"Solid Color Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menusolid.png",hidden:!1,index:3},"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin":{description:"Text Only Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menutextonly.png",hidden:!1,index:1},"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin":{description:"Text Separator sMenu",iconUrl:"/images/wysiwyg/skinIcons/menu/menudivider.png",hidden:!1,index:2},"wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin":{description:"Vertical Ribbons Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/vertical_ribbon.png",hidden:!1,index:14}}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin",function(a){var b=a;b.statics({maxH:280}),b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Arrow Right Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/arrows.png",hidden:!1,index:17}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.ArrowRightMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.ArrowRightMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"pad",type:Constants.SkinParamTypes.SIZE,mutators:["decrease",70],defaultValue:"1"},{id:"padLeft",type:Constants.SkinParamTypes.SIZE,defaultValue:"70",noshow:!0},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden; }","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer% { margin-right:[pad]; [bgDrop] [rdDrop] }","%dropWrapper%[dropHPosition=left] %moreContainer% { margin-right:0; margin-left:0; left:0; }","%dropWrapper%[dropAlign=left][dropHPosition=center] %moreContainer% { margin-right:0; margin-left:[padLeft]; }","%dropWrapper%[dropAlign=left][dropHPosition=left] %moreContainer% { margin-right:0; margin-left:0 !important; }","%dropWrapper%[dropAlign=right] { text-align:right; }","%dropWrapper%[dropAlign=right] %moreContainer% { margin-right:0; }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin",function(a){var b=a;b.statics({maxH:430}),b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Indented Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/indented.png",hidden:!1,index:15}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.IndentedMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.IndentedMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bg",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_11"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div class="wrapper"><div skinPart="itemsContainer"></div></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%.wrapper%       { background:[bg] url([tdr]indented_bg_inverted.png) center top repeat-x; position:relative; overflow:hidden;  [rd] [shd] }","%itemsContainer% { background:transparent url([tdr]indented_bg_inverted.png) center bottom repeat-x; [rd] }","%dropWrapper%    { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer% { [bgDrop] [rdDrop] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Lines Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menulines.png",hidden:!1,index:10}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.LinesMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.LinesMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"1px"},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);",lang:"shDrop"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden; border-top:solid [brw] [brd]; border-bottom:solid [brw] [brd]}","%dropWrapper%    { visibility:hidden; position:absolute;  }","%moreContainer%  { z-index:99999; margin:7px 0; [shd][bgDrop][rd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Overline Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menuoverline.png",hidden:!1,index:6}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.OverlineMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.OverlineMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper% { visibility:hidden; position:absolute; }","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; padding:15px 5px 0 5px; [bgDrop] [rd] [shd] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%{ }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Pointer Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menuribbonbottom.png",hidden:!1,index:12}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.PointerMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.PointerMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0px"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div class="back"></div><div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden; }","%.back%          { [bg] position:absolute; top:0; bottom:13px; left:0; right:0; border-bottom:solid 1px [brd]; }","%dropWrapper%                  { visibility:hidden; position:absolute; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%                { [bgDrop] [rd] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Ribbons Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/muenuribbons.png",hidden:!1,index:13}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.RibbonsMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.RibbonsMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"elm",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",lang:"foldR"},{id:"elm2",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",lang:"foldL"},{id:"els",type:Constants.SkinParamTypes.SIZE,mutators:["increase",10],defaultValue:"0",lang:"fold"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"0px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 2px 3px rgba(0, 0, 0, 0.7);"}]),b.html('<div class="fl ribbon"></div><div class="fr ribbon"></div><div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { margin:0 0 [els] 0; position:relative; overflow:hidden; [bg][shd]}","%.ribbon% { position:absolute; bottom:-[els]; height:0; width:0; border:[els] solid transparent;}","%.fr% { border-top-color:[elm]; border-left-width:0; right:0; }","%.fl% { border-top-color:[elm2]; border-right-width:0; left:0;}","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; margin-top:-10px; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%                { border:solid [brw] [brd]; [bgDrop][shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Separate Basic Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menubuttons.png",hidden:!1,index:7}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateBasicMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateBasicMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0"},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper%                      { visibility:hidden; position:absolute; margin-top:[gapFromMenu];  [boxModel][shd][rdDrop] }","%dropWrapper%[dropMode=dropUp]     { margin-top:0; margin-bottom:[gapFromMenu]; }","%dropWrapper%[dropHPosition=left]  { padding-left:0; }","%dropWrapper%[dropHPosition=right] { padding-right:0; }","%moreContainer%                    { border:solid [brw] [brd]; [bgDrop] [rdDrop] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Separate Indented Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/separateindented.png",hidden:!1,index:16}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateIndentedMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateIndentedMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"pad",type:Constants.SkinParamTypes.SIZE,defaultValue:"5px"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; padding:0 [pad]; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%dropWrapper%[dropHPosition=left] { padding-left:0; }","%dropWrapper%[dropHPosition=right] { padding-right:0; }","%moreContainer%{ [bgDrop] [rdDrop] [shd] overflow:hidden;}"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Separate Lines Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menuseperatelines.png",hidden:!1,index:11}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateLinesMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateLinesMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"pad",type:Constants.SkinParamTypes.SIZE,defaultValue:"5px"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; padding:0 [pad]; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%dropWrapper%[dropHPosition=left] { padding-left:0; }","%dropWrapper%[dropHPosition=right] { padding-right:0; }","%moreContainer% { border:solid [brw] [brd]; [bgDrop] [rd] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Separate Shiny-Buttons Menu II",iconUrl:"/images/wysiwyg/skinIcons/menu/menubuttonsshiny.png",hidden:!1,index:9}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateShinyIIMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateShinyIIMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"pad",type:Constants.SkinParamTypes.SIZE,defaultValue:"5px"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer%                   { position:relative; overflow:hidden; }","%dropWrapper%                      { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; padding:0 [pad]; [boxModel] }","%dropWrapper%[dropMode=dropUp]     { margin-top:0; margin-bottom:[gapFromMenu]; }","%dropWrapper%[dropHPosition=left]  { padding-left:0; }","%dropWrapper%[dropHPosition=right] { padding-right:0; }","%moreContainer%                    { [bgDrop][rdDrop][shd] overflow:hidden; }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Separate Shiny I Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menubuttonsshiny.png",hidden:!1,index:8}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateShinyIMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SeparateShinyIMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"pad",type:Constants.SkinParamTypes.SIZE,defaultValue:"5px"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper%  { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; padding:0 [pad]; [boxModel] }","%dropWrapper%[dropMode=dropUp]     { margin-top:0; margin-bottom:[gapFromMenu]; }","%dropWrapper%[dropHPosition=left]  { padding-left:0; }","%dropWrapper%[dropHPosition=right] { padding-right:0; }","%moreContainer% { [bgDrop] [rdDrop] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Shiny Menu I ",iconUrl:"/images/wysiwyg/skinIcons/menu/menusolidshiny.png",hidden:!1,index:4}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.ShinyMenuIButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.ShinyMenuIButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"bg",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_11"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer%               { position:relative; overflow:hidden; background:[bg] url([tdr]shiny1button_bg.png) center center repeat-x; [rd] [shd] }","%dropWrapper%                  { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%                { [bgDrop] [rdDrop] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Shiny Menu II ",iconUrl:"/images/wysiwyg/skinIcons/menu/menusolidgradient.png",hidden:!1,index:5}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.ShinyMenuIIButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.ShinyMenuIIButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"bg",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_11"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div class="wrapper"><div skinPart="itemsContainer"></div></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%.wrapper%                     { position:relative; overflow:hidden; background:[bg] url([tdr]shiny2button_bg.png) center top repeat-x; [rd] [shd] }","%itemsContainer%               { background:transparent url([tdr]shiny2button_bg.png) center bottom repeat-x; [rd] }","%dropWrapper%                  { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%                { [bgDrop] [rdDrop] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Sloppy Border Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/sloppy.png",hidden:!1,index:18}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SloppyBorderMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SloppyBorderMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"15px"},{id:"fr",type:Constants.SkinParamTypes.OTHER,defaultValue:'position:absolute; content:"";'},{id:"s",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"}]),b.html('<div class="wrapper"><div skinPart="itemsContainer"></div></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden; [bg] [shd]  }","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer% { [bgDrop] [rd] [shd] }","%.wrapper%:before  { [fr] background:url([tdr]sloppyvertical.png) repeat-y 0 0;    left:-[s];  top:0; bottom:0; width:[s]; }","%.wrapper%:after   { [fr] background:url([tdr]sloppyvertical.png) repeat-y 100% 0; right:-[s]; top:0; bottom:0; width:[s]; }",":before  { [fr] background:url([tdr]sloppyhoriz.png) repeat-x 0 0;    left:-[s];  top:-[s];    right:-[s]; height:[s]; }",":after   { [fr] background:url([tdr]sloppyhoriz.png) repeat-x 0 100%; left:-[s];  bottom:-[s]; right:-[s]; height:[s]; }","%dropWrapper%:before  { [fr] background:url([tdr]sloppyvertical.png) repeat-y 0 0;    left:-[s];  top:0; bottom:0; width:[s]; }","%dropWrapper%:after   { [fr] background:url([tdr]sloppyvertical.png) repeat-y 100% 0; right:-[s]; top:0; bottom:0; width:[s]; }","%moreContainer%:before  { [fr] background:url([tdr]sloppyhoriz.png) repeat-x 0 0;    left:-[s];  top:-[s];    right:-[s]; height:[s]; }","%moreContainer%:after   { [fr] background:url([tdr]sloppyhoriz.png) repeat-x 0 100%; left:-[s];  bottom:-[s]; right:-[s]; height:[s]; }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Solid Color Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menusolid.png",hidden:!1,index:3}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SolidColorMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.SolidColorMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"rdDrop",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"10px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0"},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer%               { [bg][rd][shd] border:solid [brw] [brd]; position:relative; overflow:hidden; }","%dropWrapper%                  { margin-top:[gapFromMenu]; visibility:hidden; position:absolute;  [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%                { [bgDrop][rdDrop][shd] border:solid [brw] [brd]; }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Text Only Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/menutextonly.png",hidden:!1,index:1}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.TextOnlyMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.TextOnlyMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%{ [bgDrop] [rd] [shd] }"])}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Text Separator sMenu",iconUrl:"/images/wysiwyg/skinIcons/menu/menudivider.png",hidden:!1,index:2}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.TextSeparatorsMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.TextSeparatorsMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0px"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"}]),b.html('<div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%itemsContainer% { position:relative; overflow:hidden;}","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer%{ [bgDrop] [rd] [shd] }"])
}),define.skin("wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.iconParams({description:"Vertical Ribbons Menu",iconUrl:"/images/wysiwyg/skinIcons/menu/vertical_ribbon.png",hidden:!1,index:14}),b.compParts({repeaterButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.VerticalRibbonsMenuButtonNSkin",styleGroup:"inherit"},moreButton:{skin:"wysiwyg.viewer.skins.dropmenubutton.VerticalRibbonsMenuButtonNSkin",styleGroup:"inherit"}}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"bgDrop",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"els",type:Constants.SkinParamTypes.SIZE,defaultValue:"10",noshow:!0},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"},{id:"gapFromMenu",type:Constants.SkinParamTypes.OTHER,defaultValue:"7px"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 2px 3px rgba(0, 0, 0, 0.7);"}]),b.html('<div class="bar"></div><div skinPart="itemsContainer"></div><div skinPart="moreButton"></div><div skinPart="dropWrapper"><div skinPart="moreContainer"></div></div>'),b.css(["%.bar% { position:absolute; top:[els]; bottom:[els]; left:0; right:0; [bg][shd]}","%itemsContainer% { position:relative; overflow:hidden; }","%dropWrapper% { visibility:hidden; position:absolute; margin-top:[gapFromMenu]; [boxModel] }","%dropWrapper%[dropMode=dropUp] { margin-top:0; margin-bottom:[gapFromMenu]; }","%moreContainer% { [bgDrop][shd] }"])}),define.component("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.dataTypes(["FacebookLikeBox"]),b.propertiesSchemaType("FacebookLikeBoxProperties"),b.resources(["W.Utils","W.Viewer","W.Commands","W.Config"]),b.skinParts({likeboxContainer:{type:"htmlElement"},iframe:{type:"htmlElement"}}),b.states({bgStyle:["bgStyle-noBg","bgStyle-light","bgStyle-dark"]}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.EDITOR_META_DATA={general:{settings:!0,design:!1}}},_onRender:function(a){a.data.invalidations.isInvalidated([this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.HEIGHT_REQUEST,this.INVALIDATIONS.WIDTH_REQUEST])&&(this._setSizeLimits(),this._skinParts.iframe.src=this.getSource(),this._setBackgroundState())},_setBackgroundState:function(){var a=this.getComponentProperty("transparentBg"),b=this._data.get("colorScheme"),c=a?"noBg":b;this.setState("bgStyle-"+c,"bgStyle")},_setSizeLimits:function(){var a,b=this._data.get("showStream"),c=this._data.get("showFaces"),d=999;b||c||(a=d=63),!b&&c&&(a=270),b&&!c&&(a=425),b&&c&&(a=575),this.setMinW(292),this.setMinH(a),this.setMaxH(d),this.getHeight()<a&&this.setHeight(a),this.getHeight()>d&&this.setHeight(d),this.parent(a)},getSource:function(){var a=this.getDataItem();return"//www.facebook.com/plugins/likebox.php?href=https://www.facebook.com/"+a.get("facebookPageId").trim()+"&colorscheme="+a.get("colorScheme")+"&height="+this.getHeight()+"&width="+this.getWidth()+"&show_faces="+a.get("showFaces")+"&stream="+a.get("showStream")+"&show_border="+a.get("showBorder")+"&header="+a.get("showHeader")}})}),define.dataSchema("FacebookLikeBox",{facebookPageId:{type:"string","default":"wix",description:"Facebook page id"},showFaces:{type:"boolean","default":"true",description:"Show profile photos in the plugin"},colorScheme:{type:"string","default":"light","enum":["light","dark"],description:"The color scheme of the plugin. Note that the background is always transparent to match your background color. This setting changes the foreground colors to work well on light or dark backgrounds."},showStream:{type:"boolean","default":"true",description:"Show the profile stream for the public profile"},showBorder:{type:"boolean","default":"true",description:"Show a border around the plugin"},showHeader:{type:"boolean","default":"true",description:'Show the "Find us on Facebook" bar at top. Only shown when either stream or faces are present'}}),define.dataSchema("FacebookLikeBoxProperties",{transparentBg:{type:"boolean","default":!1,description:"Sets a transparent background for the like box"}}),define.resource("facebooklikeboxSkinMap",{"wysiwyg.common.components.facebooklikebox.viewer.skins.FacebookLikeBoxSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.facebooklikebox.viewer.skins.FacebookLikeBoxSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position:absolute; top:0; bottom:0; left:0; right:0;"}]),b.html('<div skinPart="likeboxContainer"><iframe skinpart="iframe"  allowTransparency="true"  scrolling="none"></iframe></div>'),b.css(["%likeboxContainer% {[pos] }","[state~=bgStyle-light] %likeboxContainer% { background-color: white; }","[state~=bgStyle-dark]  %likeboxContainer% { background-color: black; }","[state~=bgStyle-noBg]  %likeboxContainer% { background-color: transparent; }","%iframe% { border:none; box-sizing:border-box; width:100%; height:100%; }"])}),define.component("wysiwyg.common.components.imagebutton.viewer.ImageButton",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.resources(["W.Config","W.Data"]),b.propertiesSchemaType("ImageButtonProperties"),b.dataTypes(["ImageButton"]),b.binds(["press","unpress","touch","untouch","delayUntouch","hover","unhover"]),b.states({opacity:["no_opacity","supports_opacity"],press:["not_pressed","pressed"],hover:["not_hovered","hovered"],transition:["transition_none","transition_fade"]}),b.utilize(["core.components.image.ImageSettings","wysiwyg.common.utils.LinkRenderer"]),b.skinParts({link:{type:"htmlElement"},defaultImage:{type:"core.components.image.ImageNew",dataRefField:"defaultImage",argObject:{requestExactSize:!1}},hoverImage:{type:"core.components.image.ImageNew",dataRefField:"hoverImage",argObject:{requestExactSize:!1}},activeImage:{type:"core.components.image.ImageNew",dataRefField:"activeImage",argObject:{requestExactSize:!1}}}),b.fields({_linkRenderer:null,_imageSettings:null}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._linkRenderer=new this.imports.LinkRenderer,this._rotatable=!0,this.initImageSettings(),this.attachListeners()},initImageSettings:function(){var a=this.imports.ImageSettings,b=a.CropModes.CONTAINS;this._imageSettings=new a(b,16,16)},attachListeners:function(){var a=this.$view;this.isTouchSupported()?this.isStockAndroidBrowser()||(a.addNativeListener("touchstart",this.touch),a.addNativeListener("touchend",this.untouch),a.addNativeListener("touchcancel",this.untouch),a.addNativeListener("click",this.untouch),a.addNativeListener("touchmove",this.delayUntouch)):(a.addNativeListener("mouseover",this.hover),a.addNativeListener("mouseout",this.unhover),window.addNativeListener("blur",this.unhover),a.addNativeListener("mousedown",this.press),a.addNativeListener("mouseup",this.unpress)),a.addNativeListener("dragstart",this.preventDefaultAction),this.on(Constants.EventDispatcher.Events.EXTERMINATING,this,this.detachListeners)},detachListeners:function(){window.removeNativeListener("blur",this.unhover)},isTouchSupported:function(){return Modernizr.touch},isStockAndroidBrowser:function(){var a=/^mozilla.*linux.*android 4.*build.*applewebkit.*khtml.*like.*gecko.*safari/,b=navigator.userAgent.toLowerCase();return b.indexOf("opr")>=0||b.indexOf("chrome")>=0?!1:a.test(b)},touch:function(){"pressed"!==this.getState("press")&&this.prepareTransition({previous:"default",next:"active",other:"hover",callback:function(){this.setState("pressed","press")}})},untouch:function(){"not_pressed"!==this.getState("press")&&this.prepareTransition({previous:"active",next:"default",other:"hover",callback:function(){this.setState("not_pressed","press"),this.setState("not_hovered","hover")}})},delayUntouch:function(){setTimeout(this.untouch,500)},press:function(){"pressed"!==this.getState("press")&&this.prepareTransition({previous:"hover",next:"active",other:"default",callback:function(){this.setState("pressed","press")}})},unpress:function(){"not_pressed"!==this.getState("press")&&this.prepareTransition({previous:"active",next:"hover",other:"default",callback:function(){this.setState("not_pressed","press")}})},hover:function(){"hovered"!==this.getState("hover")&&this.prepareTransition({previous:"default",next:"hover",other:"active",callback:function(){this.setState("hovered","hover")}})},unhover:function(){return"pressed"===this.getState("press")?this.untouch():("not_hovered"!==this.getState("hover")&&this.prepareTransition({previous:"hover",next:"default",other:"active",callback:function(){this.setState("not_hovered","hover")}}),void 0)},preventDefaultAction:function(a){return a.preventDefault&&a.preventDefault(),!1},prepareTransition:function(a){return this.isTransitionApplied()?(W.Utils.callOnNextRender(function(){this._setTransitionClass(this._skinParts[a.previous+"Image"],"prev"),this._setTransitionClass(this._skinParts[a.next+"Image"],"next"),this._setTransitionClass(this._skinParts[a.other+"Image"],"other"),W.Utils.callOnNextRender(a.callback.bind(this))}.bind(this)),void 0):a.callback.call(this)},isTransitionApplied:function(){var a="transition_none"!==this.getState("transition");return Modernizr.csstransitions&&a},_setTransitionClass:function(a,b){var c=$(a.$view);c.removeClass("prev").removeClass("next").removeClass("other"),c.addClass(b)},_onRender:function(a){var b=this.INVALIDATIONS.FIRST_RENDER,c=this.INVALIDATIONS.DATA_CHANGE,d=[this.INVALIDATIONS.WIDTH_REQUEST,this.INVALIDATIONS.HEIGHT_REQUEST];this.debugMode||a.data.invalidations.isInvalidated([b])?(this._onFirstRender(),this._onDataChange(),this._onSizeRequest()):a.data.invalidations.isInvalidated([c])?this._onDataChange():a.data.invalidations.isInvalidated(d)&&this._onSizeRequest()},_onFirstRender:function(){this.updateOpacityState(),this.removeInlineStyles()},_onDataChange:function(){this.renderLink(),this.updateTransitionState()},_onSizeRequest:function(){this.setImageSettings()},updateOpacityState:function(){var a=this.isOpacitySupported()?"supports_opacity":"no_opacity";this.setState(a,"opacity")},isOpacitySupported:function(){return Modernizr.opacity},renderLink:function(){var a,b=this.getDataItem(),c=this._linkRenderer,d=this._skinParts.link,e=b.get("link");return d.set("title",b.get("alt")),e?(a=this.resources.W.Data.getDataByQuery(e),a&&c.renderLink(d,a,this),void 0):(c.removeRenderedLinkFrom(d),void 0)},updateTransitionState:function(){var a=this.getComponentProperties(),b=a.get("transition");this.setState("transition_"+b,"transition")},setImageSettings:function(){var a=this._imageSettings,b=this.getWidth(),c=this.getHeight();a.setSize(b,c),this._skinParts.defaultImage.setSettings(a),this._skinParts.hoverImage.setSettings(a),this._skinParts.activeImage.setSettings(a),this._skinParts.link.style.width=b+"px",this._skinParts.link.style.height=c+"px"},removeInlineStyles:function(){this._skinParts.defaultImage.$view.style.visibility="",this._skinParts.hoverImage.$view.style.visibility="",this._skinParts.activeImage.$view.style.visibility=""}})}),define.dataSchema("ImageButton",{link:"ref",alt:"string",defaultImage:"ref",hoverImage:"ref",activeImage:"ref"}),define.dataSchema("ImageButtonProperties",{transition:{type:"string","enum":["none","fade"],"default":"fade"}}),define.resource("imagebuttonSkinMap",{"wysiwyg.common.components.imagebutton.viewer.skins.ImageButtonSkin":{}}),define.skin("wysiwyg.common.components.imagebutton.viewer.skins.ImageButtonSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([{id:"fade_prev",type:Constants.SkinParamTypes.TRANSITION,defaultValue:"opacity 0.5s ease 0s"},{id:"fade_next",type:Constants.SkinParamTypes.TRANSITION,defaultValue:"opacity 0.1s ease 0s"}]),b.compParts({defaultImage:{skin:"skins.core.ImageNewSkin"},hoverImage:{skin:"skins.core.ImageNewSkin"},activeImage:{skin:"skins.core.ImageNewSkin"}}),b.html('<a skinPart="link"><div skinPart="defaultImage"></div><div skinPart="hoverImage"></div><div skinPart="activeImage"></div></a>'),b.css(["{ position: relative; }","%link% { position: relative; display: block; z-index: 0; overflow: hidden;  -webkit-user-select: none; -moz-user-select: none; user-select: none;  -webkit-tap-highlight-color: rgba(255, 255, 255, 0); -webkit-tap-highlight-color: transparent; -webkit-touch-callout: none; -webkit-tap-highlight-color: rgba(0,0,0,0); }","%defaultImage% { position: absolute; opacity: 1; }","%hoverImage%   { position: absolute; opacity: 0; }","%activeImage%  { position: absolute; opacity: 0; }","[state~=hovered] %defaultImage% { opacity: 0; }","[state~=hovered] %hoverImage%   { opacity: 1; }","[state~=hovered] %activeImage%  { opacity: 0; }","[state~=pressed] %defaultImage% { opacity: 0; }","[state~=pressed] %hoverImage%   { opacity: 0; }","[state~=pressed] %activeImage%  { opacity: 1; }","[state~=no_opacity] %defaultImage% { visibility: visible; }","[state~=no_opacity] %hoverImage%   { visibility: hidden;  }","[state~=no_opacity] %activeImage%  { visibility: hidden;  }","[state~=no_opacity][state~=hovered] %defaultImage% { visibility: hidden;  }","[state~=no_opacity][state~=hovered] %hoverImage%   { visibility: visible; }","[state~=no_opacity][state~=hovered] %activeImage%  { visibility: hidden;  }","[state~=no_opacity][state~=pressed] %defaultImage% { visibility: hidden;  }","[state~=no_opacity][state~=pressed] %hoverImage%   { visibility: hidden;  }","[state~=no_opacity][state~=pressed] %activeImage%  { visibility: visible; }",'[state~=supports_opacity] %link%:after { content: ""; position: absolute; z-index: 5; width: 100%; height: 100%; display: block; }',"[state~=transition_fade] %defaultImage% { z-index: 1; [fade_prev] }","[state~=transition_fade] %hoverImage%   { z-index: 2; [fade_prev] }","[state~=transition_fade] %activeImage%  { z-index: 3; [fade_prev] }","[state~=transition_fade] .prev  { z-index: 3; }","[state~=transition_fade] .next  { z-index: 1; [fade_next] }","[state~=transition_fade] .other { z-index: 2; }"])}),define.component("wysiwyg.viewer.components.inputs.NumberInput",function(a){var b=a;b.propertiesSchemaType("NumberInputProperties"),b.inherits("wysiwyg.viewer.components.inputs.TextInput"),b.fields({_origValue:null,_prevValue:null,_valueChanged:!0}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_onAllSkinPartsReady:function(){this.parent(),this._origValue=this._getValue(),this._prevValue=this._origValue,this._skinParts.input.setAttribute("min",this.getComponentProperty("minValue")),this._skinParts.input.setAttribute("max",this.getComponentProperty("maxValue"))},_onDataChange:function(a,b,c,d){if("text"==b){this._prevValue=d.text,this._origValue=c.text;var e=this._skinParts.input;e.set("value",this._origValue),this._valueChanged=!0}this.parent(a,b,c)},_changeEventHandler:function(a){if(!a.code||W.Utils.isInputKey(a.code)){var b=this._getValue(),c=this._getValidValue();if(b&&b!=c&&this._valueChanged)this._valueChanged=!1,this.fireEvent("validationFailed",{evt:a,value:b,validValue:c});else{this._prevValue=c,c=this.injects().Utils.convertToHtmlText(c);var d={value:c,origEvent:a,compLogic:this};this.fireEvent("inputChanged",d)}}},_fireBlur:function(a){this._setValidValue(),this.parent(a)},_fireKeyUp:function(a){"13"==a.code&&this._setValidValue(),this.parent(a)},_getValidValue:function(){var a=this._getValue();return a?a<this.getComponentProperty("minValue")?a=this.getComponentProperty("minValue"):a>this.getComponentProperty("maxValue")&&(a=this.getComponentProperty("maxValue")):a=this._origValue,a},_setValidValue:function(){var a=this._skinParts.input;a.set("value",this._getValidValue()),this._valueChanged=!0}})}),define.component("wysiwyg.common.components.inputs.OptionsListInput",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.traits(["wysiwyg.viewer.components.traits.ValidationSettings"]),b.utilize(["wysiwyg.viewer.utils.ComponentSequencer"]),b.binds(["_onItemSelected"]),b.states({validity:["valid","invalid"]}),b.fields({_selectedItem:null}),b.dataTypes(["SelectableList"]),b.resources(["W.Data"]),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._sequencer=new this.imports.ComponentSequencer,c&&(this._allowOptionReselect=c.allowOptionReselect,this._sequencer.resolveItem=function(){var a={comp:c.compType,skin:c.compSkin};return c.compStyleId&&(a.styleId=c.compStyleId),a})},_onAllSkinPartsReady:function(){},_onDataChange:function(a,b,c){if("selected"===b){var d=this._getSelectedComponentByData(c[b]);this._changeSelectedItem(d)}this.parent(a,b,c)},_getSelectedComponentByData:function(a){var b=this.items.map(function(a){return a.$logic}),c=b.filter(function(b){return b.getDataItem()==a});return c&&c[0]},_getFirstFilteredDataItem:function(a){var b=_.map(this.items,function(a){return a.$logic.getDataItem()}),c=_.filter(b,a);return c&&c[0]},getDataItemByLabel:function(a){var b=a.toLowerCase();return this._getFirstFilteredDataItem(function(a){return a.get("label").toLowerCase()===b})},getDataItemByLabelStartingWith:function(a){var b=a.toLowerCase();return this._getFirstFilteredDataItem(function(a){return 0===a.get("label").toLowerCase().indexOf(b)})},scrollToByDataItem:function(a){this.$view.scrollTop=this._getComponentHeightByData(a)},_getComponentHeightByData:function(a){for(var b=0,c=0;c<this.items.length;c++){var d=this.items[c];if(d.$logic.getDataItem()===a)return b;b+=d.getHeight()}return 0},_preventRenderOnDataChange:function(a,b){return"selected"===b},_prepareForRender:function(){return this._sequencer.addEvent("productionFinished",function(a){this._onSequencerFinished(a),this.fireEvent("optionListInputReady",a)}.bind(this)),this._sequencer.createComponents(this.getViewNode(),this.getDataItem().get("items")),!0},_onSequencerFinished:function(a){this.items=a.elements,this.items.forEach(function(a){var b=a.getLogic();b.addEvent("itemSelected",this._onItemSelected),b.getDataItem()===this.getDataItem().get("selected")&&(this._selectedItem=b,this._selectedItem.setSelected(!0))}.bind(this))},_onItemSelected:function(a){if(!this._selectedItem||this._selectedItem!==a||this._allowOptionReselect){var b=a.getDataItem();this.setValidationState(!0),this.getDataItem().set("selected",b),this.fireEvent("selectionChanged",b)}},_changeSelectedItem:function(a){this._selectedItem&&this._selectedItem.setSelected(!1),a&&(this._selectedItem=a,this._selectedItem.setSelected(!0),this._selectedItem.getViewNode().focus())},setValidationState:function(a){this.setState(a?"valid":"invalid","validity"),this.parent(a)}})}),define.component("wysiwyg.viewer.components.inputs.TextInput",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.traits(["wysiwyg.viewer.components.traits.ValidationSettings"]),b.binds(["_changeEventHandler","_fireBlur","_fireKeyUp"]),b.dataTypes(["Text"]),b.resources(["W.Config"]),b.states({validation:["valid","invalid"],displayDevice:["mobile"]}),b.skinParts({input:{type:"htmlElement"},errorMessage:{type:"htmlElement",optional:!0}}),b.methods({initialize:function(a,b,c){c&&c.shouldRenderOnDisplay&&this.startRenderingComponentOnDisplay(),this.parent(a,b,c),this.addEvent(this.VALID_STATE_CHANGED_EVENT,function(a){this.setState(a?"valid":"invalid","validation")}.bind(this)),c=c||{},this._placeholder=c.placeholder||null,this._isPasswordField=c.passwordField||!1,this._label=c.label||"",this._getViewerMode()===Constants.ViewerTypesParams.TYPES.MOBILE&&this.setState("mobile","displayDevice")},startRenderingComponentOnDisplay:function(){this._renderTriggers.indexOf(Constants.DisplayEvents.DISPLAY_CHANGED)<0&&this._renderTriggers.push(Constants.DisplayEvents.DISPLAY_CHANGED)},_getViewerMode:function(){return this.resources.W.Config.env.getCurrentFrameDevice()},_onAllSkinPartsReady:function(){var a=this._skinParts.input;this.addEvent("inputChanged",function(a){this.getDataItem().set("text",a.value)}.bind(this)),this._listenToInput(),this._placeholder&&this.setPlaceholder(this._placeholder),this._isPasswordField&&a.set("type","password"),this.setLabel(this._label)},render:function(){if(this._skinParts.input){var a=this._skinParts.input,b=a.get("value"),c=this.getDataItem().get("text");b!==c&&a.set("value",c)}},setError:function(a){this.setValidationState(!1),this._skinParts.errorMessage&&this._skinParts.errorMessage.set("text",a)},setLabel:function(a){this._skinParts.label&&this._skinParts.label.appendText(a,"top")},setFocus:function(){this._skinParts.input.focus()},selectText:function(a,b){a||(a=0),0==b||b||(b=this._skinParts.input.value.length),this._selectText(this._skinParts.input,a,b)},setTextContent:function(a){this._skinParts.input.value=a},_selectText:function(a,b,c){if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveStart("character",b),d.moveEnd("character",c),d.select(),a.focus()}else a.setSelectionRange?(a.focus(),a.setSelectionRange(b,c)):"undefined"!=typeof a.selectionStart&&(a.selectionStart=b,a.selectionEnd=c,a.focus())},setPlaceholder:function(a){this._skinParts.input.set("placeholder",a),window.Modernizr&&!window.Modernizr.input.placeholder&&this._placeholderPolyFill()},_placeholderPolyFill:function(){function a(a){var b=a.target;""===b.get("value")&&b.get("placeholder")&&(b.addClass("isPlaceholder"),b.set("value",b.get("placeholder")))}function b(a){var b=a.target;b.hasClass("isPlaceholder")&&(b.removeClass("isPlaceholder"),b.set("value",""))}this.hasPlaceholder||(this.hasPlaceholder=!0,this._skinParts.input.addEvent("focus",b),this._skinParts.input.addEvent("blur",a)),a({target:this._skinParts.input})},_changeEventHandler:function(a){if(!a.code||W.Utils.isInputKey(a.code)){var b=this._getValue();b=this.injects().Utils.convertToHtmlText(b);var c={value:b,origEvent:a,compLogic:this};this.fireEvent("inputChanged",c)}},_fireBlur:function(a){this.fireEvent(Constants.CoreEvents.BLUR,a)},_fireKeyUp:function(a){this.fireEvent(Constants.CoreEvents.KEY_UP,a)},_listenToInput:function(){this._skinParts.input.addEvent(Constants.CoreEvents.KEY_UP,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.KEY_UP,this._fireKeyUp),this._skinParts.input.addEvent(Constants.CoreEvents.CUT,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.PASTE,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.CHANGE,this._changeEventHandler),this._skinParts.input.addEvent(Constants.CoreEvents.BLUR,this._fireBlur)},_stopListeningToInput:function(){this._skinParts.input.removeEvent(Constants.CoreEvents.KEY_UP,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.KEY_UP,this._fireKeyUp),this._skinParts.input.removeEvent(Constants.CoreEvents.CUT,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.PASTE,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.CHANGE,this._changeEventHandler),this._skinParts.input.removeEvent(Constants.CoreEvents.BLUR,this._fireBlur)},_getValue:function(){var a=this._skinParts.input,b="";return a.hasClass("isPlaceholder")||(b=a.get("value")),b},dispose:function(){this._stopListeningToInput(),this.parent()}})}),define.resource("onlineclockSkinMap",{"wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockBasicSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-1.png",hidden:!1,index:0},"wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockBoxesSkin":{description:"Boxes",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-4.png",hidden:!1,index:3},"wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockFlatSkin":{description:"Flat",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-3.png",hidden:!1,index:2},"wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockGradientSkin":{description:"Gradient",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-2.png",hidden:!1,index:1},"wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockOneLineSkin":{description:"One Line",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-5.png",hidden:!1,index:4}}),define.skin("wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockBasicSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-1.png",hidden:!1,index:0}),b.skinParams([{id:"bg1",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",lang:"bg"},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_18"},{id:"timecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Time"},{id:"datecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Date"},{id:"timefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_6",lang:"ONLINECLOCK_Time"},{id:"datefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",lang:"ONLINECLOCK_Date"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"4px"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0px"}]),b.html('<div skinpart="container"><div skinpart="time"></div><br><div skinpart="date"></div></div>'),b.css(["%container% {padding: 12px; text-align: center; background: [bg1]; border: [brw] solid [brd]; [rd]}","%time% {display: inline-block; color: [timecolor]; [timefont] line-height: 1em; white-space: nowrap}","%time% .invisible {visibility: hidden}","%time% .hours {font-weight: bold}","%time% .ampm {display: inline-block; margin-left: 12px}","%date% {display: inline-block; color: [datecolor]; [datefont] line-height: 1em; white-space: nowrap; margin-top: 1px}","%date%.hidden {display: none}","%date% .slash {display: inline-block; margin: 0 1px}"])}),define.skin("wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockBoxesSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Boxes",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-4.png",hidden:!1,index:3}),b.skinParams([{id:"bg3",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_18",lang:"bg"},{id:"timecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Time"},{id:"datecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Date"},{id:"timefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"ONLINECLOCK_Time"},{id:"datefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",lang:"ONLINECLOCK_Date"}]),b.html('<div skinpart="container"><div skinpart="time"></div><br><div skinpart="date"></div></div>'),b.css(["%container% {}","%time% {display: inline-block; color: [timecolor]; [timefont] line-height: 1em; white-space: nowrap; margin-right: -5px}","%time% > * {display: inline-block; background: [bg3]; padding: 7px 7px 4px; margin-right: 5px}","%time% .invisible {visibility: hidden}","%time% .colon {display: none}","%date% {display: inline-block; background: [bg3]; margin-top:5px; padding: 7px; color: [datecolor]; [datefont] line-height: 1em; white-space: nowrap}","%date%.hidden {display: none}","%date% .slash {display: inline-block; margin: 0 1px;}"])}),define.skin("wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockFlatSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Flat",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-3.png",hidden:!1,index:2}),b.skinParams([{id:"bg3",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_18",lang:"bg"},{id:"timecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Time"},{id:"datecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Date"},{id:"timefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"ONLINECLOCK_Time"},{id:"datefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",lang:"ONLINECLOCK_Date"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"1px 1px 2px rgba(0, 0, 0, .45);"}]),b.html('<div skinpart="container"><div skinpart="date"></div><br><div skinpart="time"></div></div>'),b.css(["%container% {padding: 10px 10px 6px; background: [bg3];background-image: -webkit-linear-gradient(to right bottom, transparent 50%, rgba(255,255,255,.15) 50%);background-image: -moz-linear-gradient(to right bottom, transparent 50%, rgba(255,255,255,.15) 50%);background-image: -ms-linear-gradient(to right bottom, transparent 50%, rgba(255,255,255,.15) 50%);background-image: -o-linear-gradient(to right bottom, transparent 50%, rgba(255,255,255,.15) 50%);background-image: linear-gradient(to right bottom, transparent 50%, rgba(255,255,255,.15) 50%);[shd]}","%time% {display: inline-block; color: [timecolor]; [timefont] line-height: 1em; white-space: nowrap}","%time% .invisible {visibility: hidden}","%time% .ampm {display: inline-block; margin-left: 10px}","%date% {display: inline-block; color: [datecolor]; [datefont] line-height: 1em; white-space: nowrap; margin-bottom: 5px}","%date%.hidden {display: none}","%date% .slash {display: inline-block; margin: 0 1px;}"])}),define.skin("wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockGradientSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Gradient",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-2.png",hidden:!1,index:1}),b.skinParams([{id:"bg2",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_19",lang:"bg"},{id:"timecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Time"},{id:"datecolor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"ONLINECLOCK_Date"},{id:"timefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"ONLINECLOCK_Time"},{id:"datefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",lang:"ONLINECLOCK_Date"},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"1px 1px 2px rgba(0, 0, 0, .45);"}]),b.html('<div skinpart="container"><div skinpart="date"></div><br><div skinpart="time"></div></div>'),b.css(["%container% {padding: 10px 10px 6px; background: [bg2];background-image: -webkit-linear-gradient(148deg, transparent 0%, rgba(255,255,255,.35) 99%);background-image: -moz-linear-gradient(148deg, transparent 0%, rgba(255,255,255,.35) 99%);background-image: -ms-linear-gradient(148deg, transparent 0%, rgba(255,255,255,.35) 99%);background-image: -o-linear-gradient(148deg, transparent 0%, rgba(255,255,255,.35) 99%);background-image: linear-gradient(148deg, transparent 0%, rgba(255,255,255,.35) 99%);[shd]}","%time% {display: inline-block; color: [timecolor]; [timefont] line-height: 1em; white-space: nowrap}","%time% .invisible {visibility: hidden}","%time% .ampm {display: inline-block; margin-left: 10px}","%date% {display: inline-block; color: [datecolor]; [datefont] line-height: 1em; white-space: nowrap; margin-bottom: 5px}","%date%.hidden {display: none}","%date% .slash {display: inline-block; margin: 0 1px;}"])}),define.skin("wysiwyg.common.components.onlineclock.viewer.skins.OnlineClockOneLineSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"One Line",iconUrl:"/images/wysiwyg/skinIcons/onlineclock/skin-icon-5.png",hidden:!1,index:4}),b.skinParams([{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_15"},{id:"timefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_6",lang:"ONLINECLOCK_Time"},{id:"datefont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",lang:"ONLINECLOCK_Date"}]),b.html('<div skinpart="container"><div skinpart="time"></div><div skinpart="date"></div></div>'),b.css(["%container% {color: [txt]; white-space: nowrap}","%time% {display: inline-block; [timefont] line-height: 1em; white-space: nowrap}","%time% .invisible {visibility: hidden}","%time% .ampm {display: inline-block; margin-left: 10px}","%date% {display: inline-block; [datefont] line-height: 1em; white-space: nowrap; margin-left: 10px}","%date%.hidden {display: none}","%date% .slash {display: inline-block; margin: 0 1px;}"])
}),define.component("wysiwyg.common.components.packagepicker.viewer.PackagePicker",function(a){var b=a;b.resources(["W.Data","W.Config"]),b.inherits("core.components.base.BaseComp"),b.dataTypes(["PackagePicker"]),b.utilize(["core.components.image.ImageSettings"]),b.propertiesSchemaType("PackagePickerProperties"),b.fields({_request:null,_pageViewEventDisabled:!1}),b.statics({_useWidthOverMinWidth:!0}),b.skinParts({radioElement:{type:"htmlElement"},placeholder:{type:"htmlElement"},actionButton:{type:"htmlElement"},tooltip:{type:"wysiwyg.common.components.InfoTip"},tooltipArea:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.resources.W.Commands.registerCommandAndListener("WViewerCommands.DeselectAllPackages",this,this._deselectAllOther),this.resources.W.Commands.registerCommandAndListener("WPreviewCommands.WEditModeChanged",this,this._onEditModeChange),this.resources.W.Commands.registerCommandAndListener("WViewerCommands.DisablePageViewEventFiring",this,this._disablePageViewEventFiring),this.on(Constants.EventDispatcher.Events.EXTERMINATING,this,this._onDestroy)},_onDestroy:function(){this.resources.W.Commands.unregisterListener(this._onEditModeChange),this.resources.W.Commands.unregisterCommand("WViewerCommands.DeselectAllPackages"),this.resources.W.Commands.unregisterCommand("WViewerCommands.DisablePageViewEventFiring"),this._skinParts.tooltip.dispose()},_onRender:function(a){var b=a.data.invalidations,c=[this.INVALIDATIONS.FIRST_RENDER],d=[this.INVALIDATIONS.DATA_CHANGE];b.isInvalidated(c)?(this._onFirstRender(),this._onDataChange(this.getDataItem())):b.isInvalidated(d)&&this._onDataChange(this.getDataItem()),this._onEachRender()},_initializeTooTip:function(a,b){var c=this._skinParts.tooltip,d=this;a.removeEvents("mouseenter"),a.removeEvents("mouseleave"),b&&b.trim().length>0&&(a.addEvent("mouseenter",function(){c._showToolTipCmd({id:1,content:b},{source:d._skinParts.tooltipArea})}),a.addEvent("mouseleave",function(){c._closeToolTipCmd()}))},_actionSelect:function(){this._skinParts.actionButton.removeClass("hidden"),this._skinParts.radioElement.getElement("input").set("checked",!0),this.resources.W.Commands.executeCommand("WViewerCommands.DeselectAllPackages",{compId:this.getComponentUniqueId()},this)},_deselect:function(){this._skinParts.actionButton.addClass("hidden"),this._skinParts.radioElement.getElement("input").set("checked",!1)},_deselectAllOther:function(a){a.compId!==this.getComponentUniqueId()&&this.getIsDisplayed()&&this._deselect()},_onDataChange:function(a){var b=this.getComponentProperties(),c=parseInt(b.get("buttonTopOffset")||a.get("buttonTopOffset")),d=parseInt(b.get("radioButtonGap"))||0;a.get("buttonImageUrl")&&this._skinParts.actionButton.getElement("img").set("src",this.resources.W.Config.getServiceTopologyProperty("staticMediaUrl")+"/"+a.get("buttonImageUrl")),a.get("selectByDefault")?this._actionSelect():this._deselect(),W.Config.env.isPublicViewer()||W.Config.env.isEditorInPreviewMode()||this._skinParts.actionButton.removeClass("hidden"),this._skinParts.radioElement.set("styles",{top:c}),this._skinParts.actionButton.set("styles",{top:c+20+d}),this._initializeTooTip(this.getViewNode(),this.getDataItem().get("tooltipText"))},_onEachRender:function(){},_onFirstRender:function(){this._skinParts.placeholder.getElement("a.action").addEvent("click",function(a){a.preventDefault(),this._actionSelect()}.bind(this)),this._skinParts.placeholder.getElement("a.buyaction").addEvent("click",function(a){a.preventDefault(),this._sendRequest()}.bind(this)),this._pageViewEventDisabled||this._sendPageViewEvent()},_sendRequest:function(){var a=this._getUrlParams(),b=this.getDataItem();this._request=new Request.JSON({url:"/_api/wix/wixPackagePickerSubmit",method:"get",data:{paymentcycle:b.get("billingCycle").toLocaleUpperCase(),siteGuid:a.siteGuid,productid:b.get("packageId"),referral:a.referrer},onComplete:this._requestComplete}).send()},_requestComplete:function(a){a&&"SUCCESS_NEW_PURCHASE"===a.resultType&&a.url?window.location.assign("https://premium.wix.com/wix/api/"+a.url):window.location.replace("http://wix.com/upgrade/website"+window.location.search)},_disablePageViewEventFiring:function(){this._pageViewEventDisabled=!0},_sendPageViewEvent:function(){var a=this._getUrlParams(),b=document.createElement("img"),c=a.referrer||"";a.siteGuid&&a.referralAdditionalInfo&&(b.src="http://frog.wix.com/pre?evid=168&msid="+a.siteGuid+"&origin="+a.referralAdditionalInfo+"&ref="+c,document.body.appendChild(b)),this.resources.W.Commands.executeCommand("WViewerCommands.DisablePageViewEventFiring",{compId:this.getComponentUniqueId()},this)},_onEditModeChange:function(a,b){var c=(this._isEditModeChangeToFromPreview(a,b),this.getDataItem());this._onDataChange(c)},_getUrlParams:function(){var a,b,c,d,e={};if(window.location.search)for(a=window.location.search.substring(1).split("&"),c=0,d=a.length;d>c;c++)b=a[c].split("="),e[b[0]]=b[1];return e}})}),define.dataSchema("PackagePicker",{packageId:"string",buttonImageUrl:"string",tooltipText:"string",billingCycle:{type:"string","enum":["monthly","yearly"],"default":"monthly"},selectByDefault:{type:"boolean","default":!1}}),define.dataSchema("PackagePickerProperties",{buttonTopOffset:{type:"number","default":0},radioButtonGap:{type:"number","default":0}}),define.resource("packagepickerSkinMap",{"wysiwyg.common.components.packagepicker.viewer.skins.PackagePickerSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.packagepicker.viewer.skins.PackagePickerSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.compParts({tooltip:{skin:"wysiwyg.viewer.skins.option.InfoTipArrowSkin"}}),b.html('<div skinpart="placeholder"><div skinpart="tooltipArea"></div><div skinpart="tooltip"></div><a href="#" class="action"><div skinpart="radioElement"><input type="radio"/></div></a><div skinpart="actionButton" class="hidden"> <a href="#" class="buyaction"><img src="" alt=""/></a> </div></div>'),b.css(["%placeholder% a.action { display:block; width:100%; height:100%; position:relative; }","%placeholder% { position:absolute; width:100%; height:100%; }","%actionButton% { text-align:center; position:absolute; top:0px; width:100%; }","%placeholder% .hidden { display:none; }","%radioElement% { text-align:center; top:0px; position: relative; }","%radioElement% input { display:inline-block; }","%tooltip% { width:405px; margin-left: 205px; margin-top: -10px; position:absolute; z-index:99999; white-space: pre-wrap; }","%tooltipArea% { height:100%; width:100%; position:absolute; top:0; left:0; zoom:1; display:block; background:url([tdr]transparent.gif) repeat; }"])}),define.component("wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.dataTypes(["PinItPinWidget"]),b.resources(["W.Config","topology"]),b.skinParts({iframe:{type:"htmlElement"}}),b.statics({_resizableSides:[],EDITOR_META_DATA:{general:{settings:!0,design:!1}}}),b.binds(["_postMessageCallback"]),b.states({ErrorDivState:["noError","error"]}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_onRender:function(){this._hasPinId()&&(this._registerForPostMessageFromIframe(),this._updateIframe(),this.setState("noError","ErrorDivState"))},isRenderNeeded:function(a){var b=[this.INVALIDATIONS.FIRST_RENDER,this.INVALIDATIONS.DATA_CHANGE];return a.isInvalidated(b)},_registerForPostMessageFromIframe:function(){var a=window.addEventListener?"addEventListener":"attachEvent",b=window[a],c="attachEvent"==a?"onmessage":"message";b(c,this._postMessageCallback,!1)},_postMessageCallback:function(a){try{var b=JSON.parse(a.data);if(id=this.getComponentUniqueId(),b&&b.id!=id)return;b&&b.topic&&"resize"==b.topic&&this._setIframeSize(b),b&&b.topic&&"emptyComp"==b.topic&&this._setErrorContent()}catch(a){}},_updateIframe:function(){this._resetIframeSize(),this._changeIframeUrl()},_resetIframeSize:function(){this.setHeight(0,!0),this.setWidth(0,!0)},_changeIframeUrl:function(){var a=this._skinParts.iframe;a.src=this._hasPinId()?this._generateIframeUrl():""},_hasPinId:function(){var a=this.getDataItem().getData();return a.pinId?!0:!1},_generateIframeUrl:function(){var a=this.resources.topology.wysiwyg+"/html/external/pinterestWidget.html",b=this.getDataItem(),c={pinUrl:b.get("pinId"),originDomain:window.location.origin,id:this.getComponentUniqueId()};return a+"?"+Object.toQueryString(c)},_setIframeSize:function(a){var b=this._skinParts.iframe;a.height!==parseInt(b.style.height)&&this.setHeight(a.height,!0),a.width!==parseInt(b.style.width)&&this.setWidth(a.width,!0)},_setErrorContent:function(){this.setState("error","ErrorDivState"),this._skinParts.iframe.setStyle("width","0px"),this._resetIframeSize(),this.setHeight(274,!1),this.setWidth(225,!1)},setWidth:function(a,b){this.parent(a),b&&this._skinParts.iframe.setStyle("width",a+"px")},setHeight:function(a,b){this.parent(a),b&&this._skinParts.iframe.setStyle("height",a+"px")}})}),define.dataSchema("PinItPinWidget",{pinId:{type:"string","default":"http://www.pinterest.com/pin/204421270560540859/"}}),define.resource("pinitpinwidgetSkinMap",{"wysiwyg.common.components.pinitpinwidget.viewer.skins.PinItPinWidgetSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.pinitpinwidget.viewer.skins.PinItPinWidgetSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"webThemeDir",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<iframe skinPart="iframe" src=""></iframe><div skinPart="errorDiv"></div>'),b.css(["%iframe% {border: 0;no-repeat bottom left; background-color:transparent;width:100%,height:100%}",'[state~="noError"] %errorDiv% { display:none}','[state~="error"] %errorDiv% {display:inline;position:absolute;height:274px;width:225px; background: transparent url([webThemeDir]pinWidget/pinWidgetError.png)}'])}),define.component("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.utilize(["core.components.image.ImageUrlNew"]),b.resources(["W.Config","topology","W.Theme"]),b.dataTypes(["PinterestPinIt"]),b.propertiesSchemaType("PinterestPinItProperties"),b.skinParts({iframe:{type:"htmlElement"}}),b.statics({_pinButtonSizes:{none:{small:{width:40,height:20},large:{width:56,height:28}},beside:{small:{width:81,height:20},large:{width:101,height:28}},above:{small:{width:40,height:50},large:{width:56,height:66}}},_requiredFields:["uri","description"]}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._imgUtils=new this.imports.ImageUrlNew},_onRender:function(a){var b=a.data.invalidations;b.isInvalidated([this.INVALIDATIONS.FIRST_RENDER])&&this._firstRender(b)},_firstRender:function(){this._changeIframeDimensions(),this._changeIframe()},_getSiteUrl:function(){return window.location.href},_changeIframeDimensions:function(){var a=this._skinParts.iframe,b=this.getComponentProperties(),c=b.get("counterPosition"),d=b.get("size");a.width=this._pinButtonSizes[c][d].width,a.height=this._pinButtonSizes[c][d].height},_changeIframe:function(){var a=this._skinParts.iframe;a.src=this._generateIframeUrl(this._haveRequiredData())},_haveRequiredData:function(){var a,b=this.getDataItem().getData();for(a=0;a<this._requiredFields.length;a++)if(!b[this._requiredFields[a]])return!1;return!0},_generateIframeUrl:function(a){var b,c,d,e,f=this.resources.topology.wysiwyg+"/html/external/pinterestpin.html";return a?(b=this.getDataItem(),c=this.getComponentProperties(),d=c.get("size"),e={media:this._getImageUrl(),url:this._getSiteUrl(),description:b.get("description"),"data-pin-config":c.get("counterPosition"),"data-pin-color":c.get("color"),"data-pin-height":this._pinButtonSizes.none[d].height}):e={gagPath:this.resources.W.Theme.getProperty("WEB_THEME_DIRECTORY")+"pinterestPinIt/pinterest_default.png"},f+"?"+Object.toQueryString(e)},addProtocolIfMissing:function(a){var b=/^(ftps|ftp|http|https):.*$/.test(a),c=/^\/\//.test(a);return b?a:c?"http:"+a:"http://"+a},_getImageUrl:function(){var a=this.getDataItem().get("uri");return a=this._imgUtils.getImageAbsoluteUrlFromRelativeUrl(a),this.addProtocolIfMissing(a)}})}),define.dataSchema("PinterestPinIt",{uri:{type:"string","default":""},description:{type:"string","default":"Check it out!"}}),define.dataSchema("PinterestPinItProperties",{size:{type:"string","enum":["small","large"],"default":"small"},color:{type:"string","enum":["gray","red","white"],"default":"gray"},counterPosition:{type:"string","enum":["none","above","beside"],"default":"none"}}),define.resource("pinterestpinitSkinMap",{"wysiwyg.common.components.pinterestpinit.viewer.skins.PinterestPinItSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.skin("wysiwyg.common.components.pinterestpinit.viewer.skins.PinterestPinItSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.html('<iframe skinPart="iframe" src="about:blank" frameBorder="0" allowTransparency="true" scrolling="no"></iframe>'),b.css(["%iframe% {border: 0; display: block;}"])}),define.component("wysiwyg.common.components.removablelabel.viewer.RemovableLabel",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.propertiesSchemaType("RemovableLabelProperties"),b.dataTypes(["SelectOption"]),b.binds(["_onWixified"]),b.skinParts({text:{type:"htmlElement"},button:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.on(Constants.ComponentEvents.WIXIFIED,this,this._onWixified)},_onWixified:function(){this._skinParts.text.innerHTML=this.getDataItem().get("text"),this._skinParts.button.on("click",this,this._onBtnClick)},_onBtnClick:function(){this.trigger("removeItem",{comp:this})},getValue:function(){return this.getDataItem().get("value")}})}),define.dataSchema("RemovableLabel",{text:{type:"string","default":"",description:"Text"}}),define.dataSchema("RemovableLabelProperties",{}),define.resource("removablelabelSkinMap",{"wysiwyg.common.components.removablelabel.viewer.skins.RemovableLabelSkin":{}}),define.skin("wysiwyg.common.components.removablelabel.viewer.skins.RemovableLabelSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([{id:"webThemeDir",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"},{id:"$closeBorderRadius",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0 5px 0 0"}]),b.html('<div skinpart="content"><div skinpart="text"></div><div skinPart="button"><span>x</span></div></div>'),b.css([" { position:relative; }","%content% { border-radius:2px; border:solid 1px #d4d4d4;}","%content% > * { height:15px; backgroud-color:#ffffff; display:inline-block;}","%text% {padding-left:5px; padding-right:5px;}","%button% {cursor:pointer;}","%button% span { display:block; padding-left:4px; padding-right:4px; color:#737373; border-left:solid 1px #d4d4d4; }","%button% span:hover {color:#0099ff;}","%button%:hover {background:#ddd}"])}),define.component("wysiwyg.common.components.removablelabels.viewer.RemovableLabels",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.traits(["wysiwyg.editor.components.traits.DropDownComponent"]),b.propertiesSchemaType("RemovableLabelsProperties"),b.resources(["W.Commands"]),b.binds(["_onWixified","_createItem","_addLabel","_onComponentClicked","_onInputChanged","_onKeyPressed","_onInputFocus","_onInputBlur"]),b.dataTypes(["MultiSelectableList"]),b.skinParts({content:{type:"htmlElement"},items:{type:"htmlElement"},input:{type:"htmlElement"},dropdown:{type:"htmlElement"}}),b.fields({}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.on(Constants.ComponentEvents.WIXIFIED,this,this._onWixified)},getOptions:function(){return this._skinParts.dropdown.getChildren()},getSelectedOption:function(){return this._skinParts.dropdown.getElement(".selected")},_onInputChanged:function(){this._skinParts.input.textContent.length>this.getComponentProperty("maxTextLength")&&(this._skinParts.input.textContent=this._skinParts.input.textContent.substring(0,this.getComponentProperty("maxTextLength")),this._setCaretAtTheEndOfInput()),this._populateDropDown(this._skinParts.input.textContent.length>0)},_onOptionClick:function(a){a.preventDefault(),a.target?a.target.click():this._addItem(this._skinParts.input.textContent)},setSelected:function(a){this._setDropDownVisibility(!0);var b=this.getSelectedOption();if(b&&b.removeClass("selected"),a){a.addClass("selected");var c=this._skinParts.dropdown,d=a.getPosition(c).y,e=c.getScroll().y;(d>c.getSize().y+e||0>d)&&c.scrollTo(0,d)}},_setDropDownPosition:function(){var a=this._skinParts.content.getPosition();this._skinParts.dropdown.setPosition({x:a.x,y:a.y+this._skinParts.content.getHeight()-window.scrollY})},_setDropDownVisibility:function(a,b){var c=this._skinParts.dropdown,d=a&&0!==c.getChildren().length;d&&this._setDropDownPosition(),setTimeout(function(){d?c.uncollapse():c.collapse()},a||b||0===c.getChildren().length?0:150)},_populateDropDown:function(a){a||this._setDropDownVisibility(a,!0);var b=this._skinParts.input.textContent,c=this,d=_(this._getItems()).filter(function(a){var d=a.getData();return c._startsWith(d.text,b)&&!d.selected}).sortBy(function(a){return a.getData().text}).map(function(a){return c._addDropDownOption(a.getData().text,!1)}).value();if(b&&!this._getItemByText(this._getItems(),b)){var e=this._addDropDownOption(b,!0);e.addClass("theNewOption"),d.push(e)}this._skinParts.dropdown.empty(),_.each(d,function(a){c._skinParts.dropdown.appendChild(a)}),a&&this._setDropDownVisibility(this._skinParts.dropdown.getChildren().length>0)},_addDropDownOption:function(a,b){var c=new Element("li");return c.set("html",a+(b?" (New)":"")),c.on("click",this,function(){this._addItem(a)}).on("mouseover",this,function(){this.setSelected(c)}),c},setActiveState:function(a){a?(this._skinParts.dropdown.setStyle("width",this._skinParts.content.getWidth()),this._populateDropDown(!1)):this._setDropDownVisibility(!1,!0)},_getItemByText:function(a,b){var c=_.findIndex(a,function(a){return a.getData().text===b});return-1!==c?a[c]:null},_resetInput:function(){this._skinParts.input.empty(),this._populateDropDown(!1)},_startsWith:function(a,b){var c=new RegExp("^"+b,"i");return c.test(a)},_setCaretAtTheEndOfInput:function(){if("undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var a=document.createRange();a.selectNodeContents(this._skinParts.input),a.collapse(!1);var b=window.getSelection();b.removeAllRanges(),b.addRange(a)}else if("undefined"!=typeof document.body.createTextRange){var c=document.body.createTextRange();c.moveToElementText(this._skinParts.input),c.collapse(!1),c.select()}},_onComponentClicked:function(){this._skinParts.input.focus(),this._setCaretAtTheEndOfInput()},_onInputFocus:function(){this.resources.W.Commands.executeCommand("WEditorCommands.StartEditingRemovableLabels"),this._skinParts.content.addClass("focused"),this._removeInputPlaceholder()},_onInputBlur:function(){this.resources.W.Commands.executeCommand("WEditorCommands.StopEditingRemovableLabels"),this._skinParts.content.removeClass("focused"),this._resetInput(),this._addInputPlaceholder()},_addInputPlaceholder:function(){0!==this._getSelected().length||this._skinParts.input.textContent||(this._skinParts.input.addClass("placeholder"),this._skinParts.input.textContent=this.getComponentProperty("placeholder"))},_removeInputPlaceholder:function(){this._skinParts.input.textContent===this.getComponentProperty("placeholder")&&(this._skinParts.input.empty(),this._skinParts.input.removeClass("placeholder"))},_addItem:function(a){if(a){var b=this._getItemByText(this._getItems(),a);b?b.getData().selected||(b.getData().selected=!0,this.trigger("itemSelected",{item:b}),this._addLabel(b),this._resetInput()):(b=this._createItem(a,!0),this._getItems().push(b),this.trigger("itemCreated",{item:b}),this._addLabel(b),this._resetInput())}},_onKeyPressed:function(a){8==a.code&&(this._skinParts.input.textContent||(this._removeLastLabel(),this._populateDropDown(!1)))},_onWixified:function(){this._skinParts.dropdown.collapse(),this._onCompDataChanged(),this._addInputPlaceholder(),this._skinParts.input.addEvent("input",this._onInputChanged).addEvent("keypress",this._onKeyPressed).addEvent("keydown",this._onKeyPressed).addEvent("focus",this._onInputFocus).addEvent("blur",this._onInputBlur).addEvent("focus",this._onFocus).addEvent("blur",this._onBlur),this._skinParts.content.addEvent("click",this._onComponentClicked)},_onCompDataChanged:function(){this._resetInput(),_(this._skinParts.items.getElementsByTagName("*")).filter(function(a){return a.getLogic}).each(function(a){a.getLogic().dispose()}),_.each(this._getSelected(),this._addLabel)},_createItem:function(a,b){return W.Data.createDataItem({type:"SelectOption",value:this.generateGUID(),text:a,selected:b||!1})},_addLabel:function(a){var b=W.Components.createComponent("wysiwyg.common.components.removablelabel.viewer.RemovableLabel","wysiwyg.common.components.removablelabel.viewer.skins.RemovableLabelSkin",a);b.getLogic().on("removeItem",this,this._onRemoveItem),this._skinParts.items.insertBefore(b,this._skinParts.input)},_getSelected:function(){return _.filter(this._getItems(),function(a){return a.getData().selected})},_getItems:function(){return this.getDataItem().get("items")},_removeItem:function(a){var b=_(this._getItems()).filter(function(b){return b.getData().value===a.getValue()}).first();b.getData().selected=!1,a.dispose(),this._populateDropDown(!0),this.trigger("itemRemoved",{item:b})},_onRemoveItem:function(a){var b=a.data.comp;this._removeItem(b)},_removeLastLabel:function(){var a=this._skinParts.items.lastChild.previousSibling;a&&this._removeItem(a.getLogic())},isEnabled:function(){return!0},generateGUID:function(){var a=function(){return Math.floor(65536*Math.random()).toString(16)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}})}),define.dataSchema("RemovableLabels",{allItems:"refList",input:{type:"Text","default":"",description:""}}),define.dataSchema("RemovableLabelsProperties",{placeholder:{type:"string","default":"Enter text here...",description:"The placeholder for the input skinpart"},maxTextLength:{type:"Number","default":30,description:"The max text length for the input skinpart"}}),define.resource("removablelabelsSkinMap",{"wysiwyg.common.components.removablelabels.viewer.skins.RemovableLabelsSkin":{}}),define.skin("wysiwyg.common.components.removablelabels.viewer.skins.RemovableLabelsSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([{id:"webThemeDir",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<div skinPart="content"><div skinPart="items"><div skinpart="input" contenteditable="true"></div></div></div><div skinPart="dropdown"></div>'),b.css(["%content% { position:relative; border: 1px solid #b4b4b4; border-radius: 4px; background-color: #fff; min-height:30px; }","%content%:hover{border-color: #a3d9f6; cursor:text}","%content%:focus{border-color: #19a0e9; cursor:text }","%content%.focused{border-color: #19a0e9; cursor:text }","%items% { padding-bottom:6.5px;}","%items% > * { display:inline-block; padding-left:5px; padding-top:6.5px;  vertical-align: middle;}","%input% { border:none; min-width:1px; max-width:100%;}","%input%.placeholder {opacity:0.5;}","%dropdown% {position: fixed; z-index: 1; max-height:225px; overflow-y:auto; padding-top:2.5px; border-radius: 0px 0px 3px 3px; border: solid 1px #c4c4c4; border-top: 0px; box-shadow: 0px 0px 3px rgba(0,0,0,.2);}","%dropdown% *.selected{background: #24a1e2; color:#ffffff;}","%dropdown% *.theNewOption {font-weight: bold;}","%dropdown% > *{ list-style-type: none; padding-left:12px; padding-top:6.5px; height:25px; background-color: #fff;}"])}),define.component("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.resources(["W.Config","W.Utils","W.Commands","W.Resources"]),b.utilize(["wysiwyg.viewer.components.classes.SoundUtils","wysiwyg.common.components.singleaudioplayer.viewer.compmembers.SoundOperations","wysiwyg.common.components.singleaudioplayer.viewer.compmembers.MiscFunctions"]),b.propertiesSchemaType("SingleAudioPlayerProperties"),b.dataTypes(["SingleAudioPlayer"]),b.binds(["_setAudioInfo","_createAudioObject","_createSoundCallback","_onPageTransitionStarted","_onPageTransitionEnded"]),b.states({playerState:["waiting","loading","stopped","repeat","playing","pausing"],device:["desktop","mobile"],isduration:["duration","noduration"]}),b.skinParts({player:{type:"htmlElement"},artistLabel:{type:"htmlElement"},trackLabel:{type:"htmlElement"},info:{type:"htmlElement"},sep:{type:"htmlElement"},playBtn:{type:"htmlElement"},pauseBtn:{type:"htmlElement"},repeatBtn:{type:"htmlElement"},progressbar:{type:"htmlElement"},bar:{type:"htmlElement"},slider:{type:"htmlElement"},handle:{type:"htmlElement"},volumeBtn:{type:"htmlElement"},volumeScale:{type:"htmlElement"},durationOfTrack:{type:"htmlElement"},trackDuration:{type:"htmlElement"},trackPosition:{type:"htmlElement"},nextBtn:{type:"htmlElement"},prevBtn:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this._soundUtils=new this.imports.SoundUtils,this._miscFunctions=new this.imports.MiscFunctions,this._soundOperations=new this.imports.SoundOperations(this._miscFunctions),this.parent(a,b,c),this._soundUtils.loadApi(),this.resources.W.Commands.registerCommandAndListener("WViewerCommands.StopAllOtherAudios",this,this._stopAllOtherAudios),this.resources.W.Commands.registerCommandAndListener("WPreviewCommands.WEditModeChanged",this,this._onEditModeChange),this.resources.W.Config.env.$isEditorFrame||(W.Viewer.addEvent("pageTransitionStarted",this._onPageTransitionStarted),W.Viewer.addEvent("pageTransitionEnded",this._onPageTransitionEnded)),this.skinGroup=c&&c.skinGroup?c.skinGroup:"single"},_onPageTransitionStarted:function(){this._isAutoplayNeeded()||this._stopAudio()},_onPageTransitionEnded:function(a){this.activePageId=a},isRenderNeeded:function(a){var b=[this.INVALIDATIONS.SKIN_CHANGE,this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.WIDTH_REQUEST,this.INVALIDATIONS.HEIGHT_REQUEST,this.INVALIDATIONS.DISPLAY,this.INVALIDATIONS.FIRST_RENDER];return a.isInvalidated(b)},_onEditModeChange:function(a,b){var c=this._isEditModeChangeToFromPreview(a,b);this._handleSoundOnModeChange(c)},exterminate:function(){var a=this.resources.W.Config.env;(a.$isPublicViewerFrame||a.isViewingDesktopDevice())&&(this._soundOperations.destroySound(),this.trigger("soundObjectDestroyed")),this.parent()},_onRender:function(a){var b=a.data.invalidations;this._soundUtils.waitForApiReady().then(function(){b.isInvalidated([this.INVALIDATIONS.DISPLAY])&&(this._soundOperations.hasAudio()&&"desktop"===this.getState("device")&&(this._soundOperations.setTrackPositionLabel(),this._soundOperations.resetProgress(),this.resources.W.Config.env.isInInteractiveViewer()||this.setState("stopped","playerState")),this._soundOperations.hasAudio()&&this._handleSoundOnModeChange()),b.isInvalidated([this.INVALIDATIONS.FIRST_RENDER])&&this._setDeviceState(),b.isInvalidated([this.INVALIDATIONS.SKIN_CHANGE])&&this._connectSkinWithLogic(),b.isInvalidated([this.INVALIDATIONS.DATA_CHANGE])&&this._handleDataChange(b.getInvalidationByType(this.INVALIDATIONS.DATA_CHANGE)[0]),b.isInvalidated([this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.SKIN_CHANGE])&&this._setDataToSkinParts()}.bind(this)).done()},_handleDataChange:function(a){var b=a.field,c=a.dataItem.get("uri");(b&&b.uri||!b&&c)&&this._changeAudio()},_handleSoundOnModeChange:function(a){this._soundOperations.unmuteSound(),this._isAutoplayNeeded()?this._playAudio():(!this.resources.W.Config.env.isInInteractiveViewer()||this._stopAutoplay(a))&&this._stopAudio()},_stopAutoplay:function(a){if(this.resources.W.Config.env.$isEditorFrame)return!0;var b=W.Viewer.getCurrentPageId();return"playing"===this.getState("playerState")&&(b!==this.activePageId||"mobile"===this.getState("device")&&this._soundOperations._isMobileDevice()===!1||"undefined"!==a)},_setDeviceState:function(){this.resources.W.Config.env.$viewingDevice===Constants.ViewerTypesParams.TYPES.MOBILE&&this.setState("mobile","device")},_connectSkinWithLogic:function(){this._soundOperations.setSkinParts(this._skinParts),this._setPlayerMinimumSize(),this._attachPlayerEvents()},_changeAudio:function(){this._soundOperations.setHasFile(!0),this._soundOperations.destroySound(),this._getSoundManagerResource().then(this._createAudioObject.bind(this)).then(this._createSoundCallback.bind(this)).done()},_setDataToSkinParts:function(){this._soundOperations.setTrackPositionLabel(),this._setAudioInfo(),this._soundOperations.resetProgress(),this._soundOperations.setTrackDurationLabel(),this._soundOperations.setPersistentVolume(this.getComponentProperty("volume"))},_setAudioInfo:function(){this._setAudioName(),this._setArtistName(),this._audioInfoDisplayNeeded()},_getSoundManagerResource:function(){return Q(window.soundManager)},_createSoundCallback:function(a){var b=["track","artist"];this._hasAnyDefaultData(b)&&_.isEmpty(a.id3)?this._setUnknownSoundTags():this._setAudioInfo(),"waiting"===this.getState("playerState")&&this.setState("stopped","playerState"),this._soundOperations.setTrackDurationLabel(),this._soundOperations.setTrackPositionLabel()},_createAudioObject:function(a){var b=this,c=Q.defer(),d=a.createSound({id:b.getComponentUniqueId(),url:b._soundUtils.getAudioFullUrl(b.getDataItem().get("uri")),autoPlay:!1,stream:!0,multiShot:!0,multiShotEvents:!0,autoLoad:"desktop"===b.getState("device"),usePolicyFile:!1,whileloading:function(){"desktop"===b.getState("device")&&(b._soundOperations.setTrackDurationLabel(),b._soundOperations.setTrackPositionLabel()),b._soundOperations.hasAudio()&&_.isEmpty(this.id3)&&b._loadingAudioInfo(),b._isAutoplayNeeded()&&"playing"!==b.getState("playerState")&&b._playAudio()},onload:function(){c.resolve(b)},onid3:function(){var a=this.id3.TPE1,c=this.id3.TIT2;b._updateInfoWithTags(a,c)},onplay:function(){},onresume:function(){},whileplaying:function(){},onfailure:function(){b._failedToLoadFile()},onfinish:function(){b._finishedPlayingAudio()},onsuspend:function(){b._createSoundCallback(this)}});return b._soundOperations.setAudio(d),c.promise},_updateInfoWithTags:function(a,b){var c=this.getDataItem(),d=c.get("artist"),e=c.get("track");d!==a&&d===c._schema.artist["default"]&&c.set("artist",a),e!==b&&e===c._schema.track["default"]&&c.set("track",b)},_hasDefaultData:function(a){var b=this.getDataItem();return b.get(a)===b._schema[a]["default"]},_hasAnyDefaultData:function(a){var b;for(b=0;b<a.length;b++)if(this._hasDefaultData(a[b]))return!0;return!1},_failedToLoadFile:function(){LOG.reportError("Failed to load audio file")},_playAudio:function(){var a=this.getComponentProperty("volume"),b=this._soundUtils.getAudioFullUrl(this.getDataItem().get("uri"));this.resources.W.Commands.executeCommand("WViewerCommands.StopAllOtherAudios",{compId:this.getComponentUniqueId()},this),this._soundOperations.playSound(a,b)&&this.setState("playing","playerState")},_stopAudio:function(){this._soundOperations.stopSound()&&(this.setState("stopped","playerState"),this._soundOperations.resetProgress())},_pauseAudio:function(){this._soundOperations.pauseSound()&&this.setState("pausing","playerState")},_stopAllOtherAudios:function(a){a.compId!==this.getComponentUniqueId()&&this.getIsDisplayed()&&this._stopAudio()
},_finishedPlayingAudio:function(){this.getComponentProperty("loop")?this._playAudio():this.setState("repeat","playerState")},_isAutoplayNeeded:function(){var a=this.resources.W.Config.env,b=this.getState("playerState"),c="playing"===b||"repeat"===b,d=this.getComponentProperty("autoplay");return a.isInInteractiveViewer()&&a.isViewingDesktopDevice()&&this.getIsDisplayed()&&this._soundOperations.hasAudio()&&(d||c)},_loadingAudioInfo:function(){"desktop"===this.getState("device")&&(this._miscFunctions.switchSelectors(this._skinParts.sep,"hidden","visible"),this._skinParts.trackLabel.set("html","Loading..."),this._skinParts.artistLabel.set("html",""))},_audioInfoDisplayNeeded:function(){var a=this.getDataItem().get("artist"),b=this.getDataItem().get("track"),c=this._skinParts.sep;this._miscFunctions.toggleSelectors(""===b||""===a,c,"hidden","visible")},_setPlayerMinimumSize:function(){var a=this._skinParts.player;this.setMinW(parseInt(a.getStyle("min-width"),10)),this.setMinH(parseInt(a.getStyle("min-height"),10)),this.setHeight(parseInt(a.getStyle("min-height"),10))},_setUnknownSoundTags:function(){var a=this.getDataItem();a.set("track","Unknown Track"),a.set("artist","Unknown Artist")},_setArtistName:function(){var a=this.getDataItem().get("artist");this._skinParts.artistLabel.set("html",a)},_setAudioName:function(){var a=this.getDataItem().get("track");this._skinParts.trackLabel.set("html",a)},_attachPlayerEvents:function(){"mobile"===this.getState("device")?this._attachMobileEvents():this._attachDesktopEvents()},_attachMobileEvents:function(){var a=this._soundOperations._isMobileDevice()&&!this._soundOperations._isInPreview()?"touchstart":"mousedown";this._skinParts.playBtn.on("click",this,this._playAudio),this._skinParts.repeatBtn.on("click",this,this._playAudio),this._skinParts.pauseBtn.on("click",this,this._pauseAudio),this._skinParts.prevBtn.on("click",this,this._playPrev),this._skinParts.nextBtn.on("click",this,this._playNext),this._skinParts.bar.on("click",this._soundOperations,this._soundOperations.seekAudio),this._skinParts.slider.on("click",this._soundOperations,this._soundOperations.seekAudio),this._skinParts.handle.on(a,this._soundOperations,this._soundOperations.startMovingProgressbarHandle)},_attachDesktopEvents:function(){this._skinParts.playBtn.on("click",this,this._playAudio),this._skinParts.repeatBtn.on("click",this,this._playAudio),this._skinParts.pauseBtn.on("click",this,this._pauseAudio),this._skinParts.volumeBtn.on("click",this._soundOperations,this._soundOperations.switchMute),this._skinParts.prevBtn.on("click",this,this._playPrev),this._skinParts.nextBtn.on("click",this,this._playNext),this._skinParts.volumeScale.on("click",this._soundOperations,this._soundOperations.setNonPersistentVolume),this._skinParts.bar.on("click",this._soundOperations,this._soundOperations.seekAudio),this._skinParts.slider.on("click",this._soundOperations,this._soundOperations.seekAudio),this._skinParts.handle.on("mousedown",this._soundOperations,this._soundOperations.startMovingProgressbarHandle)},_playPrev:function(a){this.fireEvent("playPrev",a)},_playNext:function(a){this.fireEvent("playNext",a)}})}),define.dataSchema("SingleAudioPlayer",{uri:{type:"string","default":"",description:"MP3 uri"},originalFileName:{type:"string","default":"",description:"Original MP3 file name"},artist:{type:"string","default":"Artist name",description:"Artist Name"},track:{type:"string","default":"Track name",description:"Track Name"}}),define.dataSchema("SingleAudioPlayerProperties",{volume:{type:"number","default":50,description:"Volume"},autoplay:{type:"Boolean","default":!1,description:"Autoplay MP3"},loop:{type:"Boolean","default":!1,description:"Loop MP3"},showArtist:{type:"Boolean","default":!0,description:"Display Artist"},showTrack:{type:"Boolean","default":!0,description:"Display Track"}}),define.Class("wysiwyg.common.components.singleaudioplayer.viewer.compmembers.MiscFunctions",function(a){var b=a;b.methods({switchSelectors:function(a,b,c){a.addClass(b),a.removeClass(c)},toggleSelectors:function(a,b,c,d){a?this.switchSelectors(b,c,d):this.switchSelectors(b,d,c)}})}),define.Class("wysiwyg.common.components.singleaudioplayer.viewer.compmembers.SoundOperations",function(a){var b=a;b.resources(["W.Config"]),b.statics({RESET_TIME:"00:00"}),b.methods({initialize:function(a){this._audio=null,this._hasFile=!1,this._skinParts=null,this._miscFunctions=a},setSkinParts:function(a){this._skinParts=a},setAudio:function(a){this._audio=a},setHasFile:function(a){this._hasFile=a},hasAudio:function(){return!!this._audio},playSound:function(a,b){var c,d=this;return this.hasAudio()?(c={volume:a,url:b,whileplaying:function(){d.setTrackDurationLabel(),d.setTrackPositionLabel(),d._setProgressPosition(d._calculateAudioPosition()),d._setHandlePosition(d._calculateAudioPosition())}.bind(d)},this._audio.play(c),!0):!1},stopSound:function(){return this.hasAudio()?(this._audio.stop(),this.resetAudioPosition(),this.resetProgress(),!0):!1},pauseSound:function(){return this.hasAudio()?(this._audio.pause(),!0):!1},destroySound:function(){this.hasAudio()&&(this._audio.destruct(),this._audio=null)},setPersistentVolume:function(a){var b,c,d=this._skinParts.volumeScale.getChildren();for(this._audio&&this._hasFile&&this._audio.setVolume(a),c=0;c<d.length;c++)b=c<this._volumeToScale(a),this._miscFunctions.toggleSelectors(b,d[c],"on","off")},getEventTargetIndex:function(a){var b=a.event.target||a.event.srcElement,c=b.getParent();return b.getParent("ul").getChildren().indexOf(c)},getVolumeChildNodes:function(){return this._skinParts.volumeScale.getChildren()},setNonPersistentVolume:function(a){var b,c,d,e;if(this._audio&&this._hasFile){for(b=this.getEventTargetIndex(a),c=this.getVolumeChildNodes(),d=0;d<c.length;d++)e=b>=d,this._miscFunctions.toggleSelectors(e,c[d],"on","off");this._audio.setVolume(this._scaleToVolume(b+1))}},switchMute:function(){var a=this._skinParts.volumeBtn;this.hasAudio()&&(a.hasClass("muted")?this.unmuteSound():this._muteSound())},unmuteSound:function(){var a=this._skinParts.volumeBtn,b=this._skinParts.volumeScale;this.hasAudio()&&(this._miscFunctions.switchSelectors(a,"unmuted","muted"),this._miscFunctions.switchSelectors(b,"unmuted","muted"),this._audio.unmute())},_volumeToScale:function(a){return 0===a?0:Math.ceil(a/20)},_scaleToVolume:function(a){return 20*a},_muteSound:function(){var a=this._skinParts.volumeBtn,b=this._skinParts.volumeScale;this.hasAudio()&&(this._miscFunctions.switchSelectors(a,"muted","unmuted"),this._miscFunctions.switchSelectors(b,"muted","unmuted"),this._audio.mute())},resetAudioPosition:function(){this.hasAudio()&&this._audio.setPosition(0)},seekAudio:function(a){var b=this._getClickOffset(a),c=this._getMilliseconds(b);this._seek(c)},_getClickOffset:function(a){return a.event?a.event.layerX:a.event.offsetX},_getMilliseconds:function(a){var b=this._skinParts.bar,c=b.getWidth(),d=a/c,e=this._hasFile?this._audio.duration:0,f=Math.ceil(d*e);return f},setTrackPositionLabel:function(){this._skinParts.trackPosition.set("html",this._getAudioPosition())},_seek:function(a){this.hasAudio()&&this._audio.setPosition(a)},_getAudioPosition:function(){return this.hasAudio()?this._calculateDisplayDuration(this._audio.position):this.RESET_TIME},resetProgress:function(){this._getAudioPosition()===this.RESET_TIME&&(this._skinParts.slider.setStyle("width","0"),this._skinParts.handle.setStyle("left","0px"))},startMovingProgressbarHandle:function(a){var b=a.event.target||a.event.srcElement,c=this._isMobileDevice()&&!this._isInPreview()?"touchend":"mouseup",d=this._isMobileDevice()&&!this._isInPreview()?"touchmove":"mousemove";this.hasAudio()&&"handle"===b.getAttribute("skinPart")&&(document.on(c,this,this.stopMovingProgressbarHandle),document.on(d,this,this._movingProgressbarHandle))},stopMovingProgressbarHandle:function(){var a=this._isMobileDevice()&&!this._isInPreview()?"touchend":"mouseup",b=this._isMobileDevice()&&!this._isInPreview()?"touchmove":"mousemove";document.off(a,this,this.stopMovingProgressbarHandle),document.off(b,this,this._movingProgressbarHandle)},_calculateAudioPosition:function(){var a=this._audio.duration,b=this._audio.position,c=b/a*100;return c},_setProgressPosition:function(a){this._skinParts.slider.setStyle("width",a+"%")},_setHandlePosition:function(a){this._skinParts.handle.setStyle("left",a+"%")},_isMobileDevice:function(){return this.resources.W.Config.env.$viewingDevice===Constants.ViewerTypesParams.TYPES.MOBILE},_isInPreview:function(){return this.resources.W.Config.env.$isEditorViewerFrame},_movingProgressbarHandle:function(a){var b=this._skinParts.progressbar,c=this._isMobileDevice()&&!this._isInPreview()?a.event.touches[0].pageX:a.event.pageX,d=this._skinParts.view.getLeft()+b.offsetLeft,e=b.getWidth(),f=(c-d)/e,g=this._audio.duration,h=d>c||c>e+d;h||this._seek(Math.ceil(f*g))},setTrackDurationLabel:function(){this._skinParts.trackDuration.set("html",this._getAudioDuration())},_getAudioDuration:function(){var a;return this.hasAudio()?(a=this._audio.duration,this._calculateDisplayDuration(a)):this.RESET_TIME},_calculateDisplayDuration:function(a){var b=a/1e3,c=Math.floor(b/60),d=Math.floor(b%60),e=10>c?"0"+c:c,f=10>d?"0"+d:d,g=e+":"+f;return g}})}),define.resource("singleaudioplayerSkinMap",{"wysiwyg.common.components.singleaudioplayer.viewer.skins.EPlayerFramedPlay":{description:"Extended Player Framed Play",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP2.png",group:"single",index:2},"wysiwyg.common.components.singleaudioplayer.viewer.skins.EPlayerLargePlay":{description:"Extended Player Large Play",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP1.png",group:"single",index:3},"wysiwyg.common.components.singleaudioplayer.viewer.skins.EPlayerRoundPlay":{description:"Extended Player Round Play",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP3.png",group:"single",index:1},"wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistEPlayerBoldPlay":{description:"Playlist Bold Play Buttons",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",hidden:!0,index:7},"wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistEPlayerLargePlay":{description:"Playlist Large Play Buttons",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",hidden:!0,index:6},"wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistEPlayerRoundPlay":{description:"Playlist Round Play Buttons",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:5},"wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistMusicPlayerEditorSkin":{description:"Playlist Extended Player",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:4},"wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistMusicPlayerEditorSkinNoControls":{description:"Playlist Extended Player",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:4},"wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistMusicPlayerSkin":{description:"Playlist Extended Player",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:4},"wysiwyg.common.components.singleaudioplayer.viewer.skins.SingleAudioPlayerSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP4.png",group:"single",index:0}}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.EPlayerFramedPlay",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Extended Player Framed Play",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP2.png",group:"single",index:2}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_13"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_13",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0"},{id:"ird",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultParam:"rd",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10}},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div class="iWrapper"><div skinpart="info" class="font_9"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="visible"> - </span><span skinpart="artistLabel" class="artist"></span></div><span skinpart="durationOfTrack" class="duration font_10"><span skinpart="trackPosition"></span><span skinpart="trackDuration"></span></span></div><div class="mediaControls" state="visible"><div class="mediaButtons"><div class="btnWrappwer prev"><div skinpart="prevBtn" class="button" disabled="disabled"><a>previous</a></div></div><div class="btnWrappwer play"><div skinpart="playBtn" class="button"><a>play</a></div></div><div class="btnWrappwer pause"><div skinpart="pauseBtn" class="button"><a>pause</a></div></div><div class="btnWrappwer repeat"><div skinpart="repeatBtn" class="button"><a>repeat</a></div></div><div class="btnWrappwer next"><div skinpart="nextBtn" class="button" disabled="disabled"><a>next</a></div></div></div><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}","{height: 68px; border: [brw] solid [brd]; [ird] [shd] [selectable]}",'[state~="mobile"] {height: 82px;}',"%player% {min-width: 250px; min-height: 68px; overflow: hidden; [pos] [bg] [rd]}",'[state~="mobile"] %player% {min-height: 82px;}','[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}','%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}'," .iWrapper {border-bottom: 1px solid [dividers]; float: left; width: 100%; height: 31px;}",'[state~="mobile"] .iWrapper {height: 46px;}',"%info% {color: [audioText]; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; display: block; position: absolute; left: 10px; right: 40px; top: 8px;}"," .mediaControls {float: left; width: 100%;}"," .mediaButtons {float: left;}"," .volumeControls {float: right; margin-right: 10px; margin-top: 10px;}",'[state~="mobile"] .volumeControls {display: none;}',"%durationOfTrack% {text-align: right; min-width: 30px; float: right; margin: 10px 10px 0 0;}","%trackPosition% {color: [audioText]; display: none;}","%trackDuration% {color: [audioText];}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); color: [audioText];}",'[state~="mobile"] %artistLabel% {float: left; width: 100%;}',"%trackLabel% {color: [audioText];}",'[state~="mobile"] %trackLabel% {float: left; width: 100%;}',"%sep% {color: [audioText];}",'[state~="mobile"] %sep% {display: none;}'," .button {position: relative; overflow: hidden; float: left; }",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}'," .btnWrappwer {float: left; width: 37px; height: 35px; border-right: 1px solid [dividers]; cursor: pointer;}","%playBtn% {width: 16px; height: 16px; margin: 10px;}","%playBtn% a:before {left: 0px; border: 8px solid transparent; border-width: 8px 16px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%pauseBtn% {width: 16px; height: 16px; margin: 10px;}","%pauseBtn% a:before {left: 0px; width: 4px; height: 14px; border: 5px solid [audioIcons]; border-width: 0 5px; margin-top: -7px; background: transparent;}","%repeatBtn% {width: 16px; height: 18px; margin: 8px;}","%repeatBtn% a:before {left: 1px; width: 9px; height: 9px; border: 3px solid [audioIcons]; margin-top: -6px; background: transparent; border-radius: 16px;}","%repeatBtn% a:after {left: 9px; border: 4px solid [iconBG]; [bg]; height: 2px; width: 2px; border-width: 5px 2px 5px 5px; border-left-color: [audioIcons]; border-top-color: transparent; border-bottom-color: transparent; border-right-color: transparent;margin: -9px 0 0;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px;}","ul {padding: 0; list-style-type: none; height: 10px;}","%volumeScale%, %volumeScale%.unmuted, %volumeScale%.muted {float: left; height: 10px; width: auto; margin: 3px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock  {opacity: 1; filter: alpha(opacity=100);}","%volumeScale% li.off .colorBlock  {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 46px; right: 60px; height: 10px; bottom: 12px;}",'[state~="mobile"] %progressbar% {right: 10px;}',"%bar% {cursor: pointer; width: 100%; position: absolute; height: 10px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 10px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 10px; width: 10px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}'," .next, .prev {display: none;}"])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.EPlayerLargePlay",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Extended Player Large Play",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP1.png",group:"single",index:3}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_13"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_13",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10}},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div class="mediaControls" state="visible"><div class="mediaButtons"><div skinpart="prevBtn" class="button prev" disabled="disabled"><a>previous</a></div><div skinpart="playBtn" class="button play"><a>play</a></div><div skinpart="pauseBtn" class="button pause"><a>pause</a></div> <div skinpart="repeatBtn" class="button repeat"><a>repeat</a></div> <div skinpart="nextBtn" class="button next" disabled="disabled"><a>next</a></div></div><ul skinpart="info" class="font_9"><li skinpart="trackLabel" class="track ellipsis"></li><li skinpart="sep"> - </li><li skinpart="artistLabel" class="artist ellipsis"></li></ul><div class="vWrapper"><span skinpart="durationOfTrack" class="duration font_10"><span skinpart="trackPosition"></span><span skinpart="trackDuration"></span></span><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div></div></div><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}","{height: 75px; border: [brw] solid [brd]; [shd]}","%player% {min-width: 250px; min-height: 75px; overflow: hidden; [pos] [bg] [selectable]}",'%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}','[state="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state="loading"] %player% * {display: none;}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%info% {color: [audioText];padding: 0; margin: 20px 0 20px 14px; position: absolute; left: 70px; right: 70px;}"," .ellipsis {text-overflow: ellipsis; white-space: nowrap; overflow: hidden;}"," .mediaControls {float: left; width: 100%;}"," .mediaButtons {float: left; width: 70px; height: 70px; border-right: 1px solid [dividers];}"," .volumeControls {float: right; padding-top: 2px;}","%durationOfTrack% {width: 100%; text-align: right; float: right;}","%trackPosition% {color: [audioText]; display: none;}","%trackDuration% {color: [audioText];}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); color: [audioText];}","%trackLabel% {color: [audioText];}","%sep% {color: [audioText]; display: none !important;}"," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}',"%playBtn% {width: 30px; height: 30px; margin: 20px;}","%playBtn% a:before {left: 0px; border: 8px solid transparent; border-width: 15px 30px; border-left-color: [audioIcons]; margin-top: -15px; background: transparent;}","%pauseBtn% {width: 30px; height: 30px; margin: 20px;}","%pauseBtn% a:before {left: 0; width: 10px; height: 30px; border: 10px solid [audioIcons]; border-width: 0 10px; margin-top: -15px; background: transparent;}","%repeatBtn% {width: 30px; height: 30px; margin: 20px;}","%repeatBtn% a:before {left: 3px; width: 15px; height: 15px; border: 4px solid [audioIcons]; margin-top: -10px; background: transparent; border-radius: 15px;}","%repeatBtn% a:after {left: 17px; border: 4px solid [iconBG]; [bg]; height: 2px; width: 2px; border-width: 7px 3px 7px 7px; border-left-color: [audioIcons]; border-top-color: transparent; border-bottom-color: transparent; border-right-color: transparent; margin-top: -14px;}"," .vWrapper {float: right; width: 50px; padding: 20px 14px 20px 0;}"," .unmuted {width:20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px;}","ul {padding: 0; list-style-type: none; height: 10px;}","%volumeScale%, %volumeScale%.unmuted, %volumeScale%.muted {float: left; height: 10px; width: auto; margin: 3px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100);}","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; bottom: 0; left: 0; right: 0px; height: 5px;}","%bar% {cursor: pointer; width: 100%; position: absolute; height: 5px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}','[state~="mobile"] .volumeControls {display: none;}'," .next, .prev {display: none;}"])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.EPlayerRoundPlay",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Extended Player Round Play",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP3.png",group:"single",index:1}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_13"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_13",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0"},{id:"ird",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultParam:"rd",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10}},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div class="mediaControls" state="visible"><div class="mediaButtons"><div class="btnWrappwer prev"><div skinpart="prevBtn" class="button" disabled="disabled"><a>previous</a></div></div><div class="btnWrappwer play"><div skinpart="playBtn" class="button"><a>play</a></div></div><div class="btnWrappwer pause"><div skinpart="pauseBtn" class="button"><a>pause</a></div></div><div class="btnWrappwer repeat"><div skinpart="repeatBtn" class="button"><a>repeat</a></div></div><div class="btnWrappwer next"><div skinpart="nextBtn" class="button" disabled="disabled"><a>next</a></div></div></div><div skinpart="info" class="font_9"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="visible"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div><span skinpart="durationOfTrack" class="duration font_10"><span skinpart="trackPosition"></span><span skinpart="trackDuration"></span></span><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}","{height: 52px; border: [brw] solid [brd]; [ird] [shd] [selectable]}",'[state~="mobile"] {height: 65px;}','[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}',"%player% {min-width: 250px; min-height: 52px; overflow: hidden; [pos] [bg] [rd]}",'[state~="mobile"] %player% {min-height: 65px;}','%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%info% {color: [audioText]; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; display: block; position: absolute; left: 50px; right: 52px;}"," .mediaControls {float: left; width: 100%; margin-top: 10px;}"," .mediaButtons {float: left; margin-left: 10px;}",'[state~="mobile"] .mediaButtons {margin-top: 7px;}'," .volumeControls {float: right; margin-right: 10px;}","%durationOfTrack% {position: absolute; left: 50px; right: 10px; bottom: 12px;}",'[state~="mobile"] %durationOfTrack% {bottom: 12px;}',"%trackPosition% {float: left; color: [audioText];}","%trackDuration% {float: right; color: [audioText];}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); color: [audioText];}",'[state~="mobile"] %artistLabel% {float: left; width: 100%;}',"%trackLabel% {color: [audioText];}",'[state~="mobile"] %trackLabel% {float: left; width: 100%;}',"%sep% {color: [audioText];}",'[state~="mobile"] %sep% {display: none;}'," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}'," .btnWrappwer {float: left; width: 30px; height: 30px; border: 1px solid [audioIcons]; border-radius: 28px; cursor: pointer;}","%playBtn% {width: 24px; height: 20px; margin: 5px 5px 0px 3px;}","%playBtn% a:before {left: 8px; border: 8px solid transparent; border-width: 8px 12px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%pauseBtn% {width: 24px; height: 20px; margin: 5px 5px 0px 2px;}","%pauseBtn% a:before {left: 7px; width: 4px; height: 14px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%repeatBtn% {width: 24px; height: 20px; margin: 4px 5px 0px 1px;}","%repeatBtn% a:before {left: 6px; width: 9px; height: 9px; border: 3px solid [audioIcons]; margin-top: -6px; background: transparent; border-radius: 16px;}","%repeatBtn% a:after {left: 14px; border: 4px solid [iconBG]; [bg]; height: 2px; width: 2px; border-width: 5px 2px 5px 5px; border-left-color: [audioIcons]; border-top-color: transparent; border-bottom-color: transparent; border-right-color: transparent;margin: -9px 0 0;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px;}","ul {padding: 0; list-style-type: none; height: 10px;}","%volumeScale%, %volumeScale%.unmuted, %volumeScale%.muted {float: left; height: 10px; width: auto; margin: 3px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100);}","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 90px; right: 52px; bottom: 12px; height: 5px; margin: 3px 1px;}","%bar% {cursor: pointer; width: 100%; position: absolute; height: 5px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {display: none;}","%handle% {cursor: pointer; width: 10px; height: 10px; border-radius: 10px; position: absolute; left: -2px; top: -3px; background-color: [prog]; display:block;}",'[state~="mobile"] %handle% {cursor: pointer; width: 10px; height: 10px; border-radius: 10px; position: absolute; left: -2px; top: -3px; background-color: [prog]; display:block;}','[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}','[state~="mobile"] .volumeControls {display: none;}'," .next, .prev {display: none;}"])
}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistEPlayerBoldPlay",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Playlist Bold Play Buttons",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",hidden:!0,index:7}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_13"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_13",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10}},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"fnt1",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",noshow:!0},{id:"fnt2",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_10",noshow:!0},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div skinpart="info"><span skinpart="trackLabel" class="track"></span><span skinpart="sep"> - </span><span skinpart="artistLabel" class="artist"></span></div><span skinpart="durationOfTrack" class="duration"><span skinpart="trackPosition"></span><span skinpart="trackDuration"></span></span><div skinpart="progressbar"><div skinpart="bar"></div><span skinpart="slider"></span><span skinpart="handle"></span></div><div class="mediaControls" state="visible"><div class="mediaButtons"><div class="btnWrappwer prev"><div skinpart="prevBtn" class="button" disabled="disabled"><a>previous</a></div></div><div class="btnWrappwer play"><div skinpart="playBtn" class="button"><a>play</a></div></div><div class="btnWrappwer pause"><div skinpart="pauseBtn" class="button"><a>pause</a></div></div><div class="btnWrappwer repeat"><div skinpart="repeatBtn" class="button"><a>repeat</a></div></div><div class="btnWrappwer next"><div skinpart="nextBtn" class="button" disabled="disabled"><a>next</a></div></div></div><div class="volumeControls"><div skinpart="volumeBtn" state="unmuted" class="button"><a>volume</a></div><ul skinpart="volumeScale"><li state="off"></li><li state="off"></li><li state="off"></li><li state="off"></li><li state="off"></li></ul></div></div>'),b.css(["%player% {[pos] width: 100%; height: 80px; min-width: 250px; min-height: 75px; color: [audioText]; padding: 2px; border: [brw] solid [brd]; [box]; [bg] [rd] [shd]}",'[state="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state="loading"] %player% * {display: none;}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%info% {text-align: center; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;  margin-bottom: 4px; display: block; min-height: 7px;}","%.mediaControls% {float: left; width: 100%;}","%.mediaButtons% {width: 118px; margin: 0 auto;}","%.volumeControls% {float: right; margin-left: 2px; margin-top: 10px;}","%durationOfTrack% {width: 100%; float: right; [fnt2]}","%trackPosition% {float: left;}","%trackDuration% {float: right;}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); [fnt1]}","%trackLabel% {[fnt1]}","%sep% {[fnt1]}",'%sep%[state="visible"] {display: inline;}','%sep%[state="hidden"] {display: none;}',"%.button% {position: relative; overflow: hidden; float: left;}",'%.button%:before, %.button%:after {content: ""; position: absolute; top: 50%; left: 0;}',"%.btnWrappwer% {float: left; width: 28px; height: 28px; border: 3px solid [audioIcons]; border-radius: 28px; cursor: pointer;}","%playBtn% {width: 24px; height: 20px; margin: 4px 5px 0 0;}","%playBtn% a:before {left: 9px; border: 8px solid transparent; border-width: 8px 12px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%.play%:hover {border: 3px solid [prog]}","%.play%:hover %playBtn% a:before {border-left-color: [prog];}","%pauseBtn% {width: 24px; height: 20px; margin: 4px 5px 0 0;}","%pauseBtn% a:before {left: 7px; width: 4px; height: 14px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%.pause%:hover {border: 3px solid [prog];}","%.pause%:hover %pauseBtn% a:before {border: 4px solid [prog]; border-width: 0 4px;}","%repeatBtn% {width: 24px; height: 20px; margin: 3px 5px 0 0;}","%repeatBtn% a:before {left: 6px; width: 9px; height: 9px; border: 3px solid [audioIcons]; margin-top: -6px; background: transparent; border-radius: 16px;}","%repeatBtn% a:after {left: 14px; border: 4px solid [iconBG]; border-width: 5px 2px 5px 5px; border-left-color: [audioIcons]; margin: -9px 0 0;}","%.repeat%:hover {border: 3px solid [prog];}","%.repeat%:hover %repeatBtn% a:before {border: 3px solid [prog];}","%.repeat%:hover %repeatBtn% a:after {border-left-color: [prog];}",'%volumeBtn%[state="unmuted"] {width: 18px; height: 15px;}','%volumeBtn%[state="unmuted"] a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}','%volumeBtn%[state="unmuted"] a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}','%volumeBtn%[state="muted"] {margin-top: -2px; width: 18px; height: 20px;}','%volumeBtn%[state="muted"]:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}','%volumeBtn%[state="muted"]:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}','%volumeBtn%[state="muted"] a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}','%volumeBtn%[state="muted"] a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}',"ul {padding: 0; list-style-type: block;}","%volumeScale% {float: left; width: auto; margin: 2px 0 3px 2px;}","%volumeScale% li {background-color: [vol]; width: 2px; height: 11px; display: inline; float: left; margin: 0px 1px; cursor: pointer;}",'%volumeScale% li[state="on"] {opacity: 1; filter: alpha(opacity=100);}','%volumeScale% li[state="off"] {opacity: 0.3; filter: alpha(opacity=30);}','%volumeScale%[state="muted"] li[state="on"] {opacity: 0.3; filter: alpha(opacity=30);}',"%progressbar% {position: absolute; left: 36px; right: 36px; height: 5px; margin: 5px 1px;}","%bar% {cursor: pointer; border-radius: 2px; width: 100%; position: absolute; height: 5px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {border-radius: 2px; position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;0}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state="waiting"] %.play% {display: block; margin: 0 8px;}','[state="waiting"] %.pause% {display: none;}','[state="waiting"] %.repeat% {display: none;}','[state="playing"] %.play% {display: none;}','[state="playing"] %.pause% {display: block; margin: 0 8px;}','[state="playing"] %.repeat% {display: none;}','[state="pausing"] %.play% {display: block; margin: 0 8px;}','[state="pausing"] %.pause% {display: none;}','[state="pausing"] %.repeat% {display: none;}','[state="stopped"] %.play% {display: block; margin: 0 8px;}','[state="stopped"] %.pause% {display: none;}','[state="stopped"] %.repeat% {display: none;}','[state="repeat"] %.play% {display: none;}','[state="repeat"] %.pause% {display: none;}','[state="repeat"] %.repeat% {display: block; margin: 0 8px;}',"%.next%, %.prev% {}","%prevBtn%, %nextBtn% {width: 20px; height: 20px;}","%prevBtn% a:before {left: 7px; width: 2px; height: 20px;  margin-top: -5px;}","%prevBtn% a:after {left: -1px; border: 5px solid transparent; border-width: 7px 10px; border-right-color: [audioIcons]; margin-top: -4px; background: transparent;}","%.prev%:hover {border: 3px solid [prog]}","%.prev%:hover %prevBtn% a:after {border-right-color: [prog]}","%nextBtn% a:before {left: 17px; width: 2px; height: 20px; margin-top: -4px;}","%nextBtn% a:after {left: 7px; border: 5px solid transparent; border-width: 7px 10px; border-left-color: [audioIcons]; margin-top: -4px; background: transparent;}","%.next%:hover {border: 3px solid [prog]}","%.next%:hover %nextBtn% a:after {border-left-color: [prog]}","%nextBtn%[disabled], %prevBtn%[disabled] {opacity: 0.5; filter: alpha(opacity=50);}","%.next%:hover a:before, %.prev%:hover a:before {background-color: [prog] !important;}"])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistEPlayerLargePlay",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Playlist Large Play Buttons",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",hidden:!0,index:6}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_13"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_13",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10}},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"fnt1",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",noshow:!0},{id:"fnt2",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_10",noshow:!0},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div skinpart="info"><span skinpart="trackLabel" class="track"></span><span skinpart="sep"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="volumeControls"><div skinpart="volumeBtn" state="unmuted" class="button"><a>volume</a></div><ul skinpart="volumeScale"><li state="off" class="yo1"></li><li state="off" class="yo2"></li><li state="off" class="yo3"></li><li state="off" class="yo4"></li><li state="off" class="yo5"></li></ul></div><span skinpart="durationOfTrack" class="duration"><span skinpart="trackPosition"></span><span skinpart="trackDuration"></span></span><div skinpart="progressbar"><div skinpart="bar"></div><span skinpart="slider"></span><span skinpart="handle"></span></div><div class="mediaControls" state="visible"><div class="mediaButtons"><div class="btnWrappwer prev"><div skinpart="prevBtn" class="button" disabled="disabled"><a>previous</a></div></div><div class="btnWrappwer play"><div skinpart="playBtn" class="button"><a>play</a></div></div><div class="btnWrappwer pause"><div skinpart="pauseBtn" class="button"><a>pause</a></div></div><div class="btnWrappwer repeat"><div skinpart="repeatBtn" class="button"><a>repeat</a></div></div><div class="btnWrappwer next"><div skinpart="nextBtn" class="button" disabled="disabled"><a>next</a></div></div></div></div></div>'),b.css(["%player% {[pos] width: 100%; height: 90px; min-width: 250px; min-height: 75px; color: [audioText]; padding: 2px; border: [brw] solid [brd]; [box]; [bg] [rd] [shd]}",'[state="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state="loading"] %player% * {display: none;}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%info% {text-align: center; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;  margin-bottom: 4px; display: block; min-height: 7px;}","%.mediaControls% {float: left; width: 100%;}","%.mediaButtons% {width: 122px; margin: 0 auto;}","%.volumeControls% {float: right; margin-left: 2px; margin-top: -22px;}","%durationOfTrack% {width: 100%; float: right; [fnt2]}","%trackPosition% {float: left;}","%trackDuration% {float: right;}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); [fnt1]}","%trackLabel% {[fnt1]}","%sep% {[fnt1]}",'%sep%[state="visible"] {display: inline;}','%sep%[state="hidden"] {display: none;}',"%.button% {position: relative; overflow: hidden; float: left;}",'%.button%:before, %.button%:after {content: ""; position: absolute; top: 50%; left: 0;}',"%.btnWrappwer% {float: left; width: 28px; height: 28px; border: 1px solid [audioIcons]; border-radius: 28px; cursor: pointer;}","%playBtn% {width: 30px; height: 30px; margin: 2px 6px 0 6px;}","%playBtn% a:before {left: 9px; border: 8px solid transparent; border-width: 12px 16px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%.play%:hover {border: 1px solid [prog];}","%.play%:hover %playBtn% a:before {border-left-color: [prog];}","%pauseBtn% {width: 30px; height: 30px; margin: 3px 1px}","%pauseBtn% a:before {left: 15px; width: 4px; height: 22px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%.pause%:hover {border: 1px solid [prog];}","%.pause%:hover %pauseBtn% a:before {border: 4px solid [prog]; border-width: 0 4px;}","%repeatBtn% {width: 30px; height: 30px; margin: 6px 8px}","%repeatBtn% a:before {left: 6px; width: 9px; height: 9px; border: 3px solid [audioIcons]; margin-top: -6px; background: transparent; border-radius: 16px;}","%repeatBtn% a:after {left: 14px; border: 4px solid [iconBG]; border-width: 5px 2px 5px 5px; border-left-color: [audioIcons]; margin: -9px 0 0;}","%.repeat%:hover {border: 1px solid [prog];}","%.repeat%:hover %repeatBtn% a:before {border: 3px solid [prog];}","%.repeat%:hover %repeatBtn% a:after {border-left-color: [prog];}","%.play%, %.pause%, %.repeat% {width: 44px; height: 44px; border-radius: 44px;}",'%volumeBtn%[state="unmuted"] {width: 18px; height: 15px; display: none;}','%volumeBtn%[state="unmuted"] a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}','%volumeBtn%[state="unmuted"] a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}','%volumeBtn%[state="muted"] {margin-top: -2px; width: 18px; height: 20px;}','%volumeBtn%[state="muted"]:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}','%volumeBtn%[state="muted"]:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}','%volumeBtn%[state="muted"] a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}','%volumeBtn%[state="muted"] a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}',"ul {padding: 0; list-style-type: none;}","%volumeScale% {float: left; width: auto; height: 16px; margin: 1px 0 0 2px;}","%volumeScale% li {background-color: [vol]; width: 2px; display: inline; float: left; margin-left: 1px; margin-right: 1px; cursor: pointer;}",'%volumeScale% li[state="on"] {opacity: 1; filter: alpha(opacity=100);}','%volumeScale% li[state="off"] {opacity: 0.3; filter: alpha(opacity=30);}','%volumeScale%[state="muted"] li[state="on"] {opacity: 0.3; filter: alpha(opacity=30);}',"%.yo1% {height: 4px; margin-top: 12px;}","%.yo2% {height: 7px; margin-top: 9px;}","%.yo3% {height: 10px; margin-top: 6px;}","%.yo4% {height: 13px; margin-top: 3px;}","%.yo5% {height: 16px; margin-top: 0;}","%progressbar% {position: absolute; left: 36px; right: 36px; height: 5px; margin: 5px 1px;}","%bar% {cursor: pointer; border-radius: 2px; width: 100%; position: absolute; height: 5px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {border-radius: 2px; float: left; position: relative; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state="waiting"] %.play% {display: block; margin: 0 8px;}','[state="waiting"] %.pause% {display: none;}','[state="waiting"] %.repeat% {display: none;}','[state="playing"] %.play% {display: none;}','[state="playing"] %.pause% {display: block; margin: 0 8px;}','[state="playing"] %.repeat% {display: none;}','[state="pausing"] %.play% {display: block; margin: 0 8px;}','[state="pausing"] %.pause% {display: none; }','[state="pausing"] %.repeat% {display: none;}','[state="stopped"] %.play% {display: block; margin: 0 8px;}','[state="stopped"] %.pause% {display: none;}','[state="stopped"] %.repeat% {display: none;}','[state="repeat"] %.play% {display: none;}','[state="repeat"] %.pause% {display: none;}','[state="repeat"] %.repeat% {display: block; margin: 0 8px;}',"%.next%, %.prev% {margin-top: 10px;}","%prevBtn%, %nextBtn% {width: 20px; height: 20px;}","%prevBtn% a:before {left: 7px; width: 2px; height: 20px;  margin-top: -5px;}","%prevBtn% a:after {left: -1px; border: 5px solid transparent; border-width: 7px 10px; border-right-color: [audioIcons]; margin-top: -4px; background: transparent;}","%.prev%:hover {border: 1px solid [prog];}","%.prev%:hover %prevBtn% a:after {border-right-color: [prog];}","%nextBtn% a:before {left: 17px; width: 2px; height: 20px; margin-top: -4px;}","%nextBtn% a:after {left: 7px; border: 5px solid transparent; border-width: 7px 10px; border-left-color: [audioIcons]; margin-top: -4px; background: transparent;}","%.next%:hover {border: 1px solid [prog];}","%.next%:hover %nextBtn% a:after {border-left-color: [prog];}","%nextBtn%[disabled], %prevBtn%[disabled] {opacity: 0.5; filter: alpha(opacity=50);}","%.next%:hover a:before, %.prev%:hover a:before {background-color: [prog] !important;}"])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistEPlayerRoundPlay",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Playlist Round Play Buttons",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:5}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_15"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_12"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_12"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10},noshow:!0},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);",noshow:!0},{id:"fnt1",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",noshow:!0},{id:"fnt2",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_10",noshow:!0},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div class="mediaControls" state="visible"><div skinpart="info" class="hidden"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="visible"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div><span skinpart="durationOfTrack" class="duration"><span skinpart="trackPosition"></span><span skinpart="trackDuration"></span></span><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div><div class="mediaButtons"><div class="center"><div class="btnWrappwerS prev"><div skinpart="prevBtn" class="button" disabled="disabled"><a>previous</a></div></div><div class="btnWrappwer play"><div skinpart="playBtn" class="button"><a>play</a></div></div><div class="btnWrappwer pause"><div skinpart="pauseBtn" class="button"><a>pause</a></div></div><div class="btnWrappwer repeat hidden"><div skinpart="repeatBtn" class="button"><a>repeat</a></div></div><div class="btnWrappwerS next"><div skinpart="nextBtn" class="button" disabled="disabled"><a>next</a></div></div></div></div></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}","{height: 78px; border: [brw] solid [brd]; [rd] [selectable]}",'[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}',"%player% {min-width: 285px; min-height: 78px; color: [audioText]; overflow: hidden; [pos] [bg]}",'[state~="mobile"] %player% {min-width: inherit;}','%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}'," .mediaControls {float: left; width: 100%;}",'[state~="mobile"] .mediaControls {margin-top: 26px;}'," .mediaButtons {float: left; width: 100%; }"," .center {margin: 0 auto; width: 150px; }"," .volumeControls {float: right; width: 40px; margin: 8px 15px 0 10px;}",'[state~="mobile"] .volumeControls {display: none;}',"%durationOfTrack% {position: absolute; left: 15px; right: 57px; top: 9px; [fnt2]}",'[state~="mobile"] %durationOfTrack% {right: 20px;}',"%trackPosition% {float: left;}","%trackDuration% {float: right;}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); [fnt1]}","%trackLabel% {[fnt1]}","%sep% {[fnt1]}"," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}'," .btnWrappwer {float: left; width: 42px; height: 42px; border: 1px solid [audioIcons]; border-radius: 28px; cursor: pointer;}"," .btnWrappwerS {float: left; width: 20px; height: 20px; border: 1px solid [audioIcons]; border-radius: 28px; cursor: pointer;}","%playBtn% {width: 42px; height: 42px; border-radius: 22px;}","%playBtn% a:before {left: 14px; border: 8px solid transparent; border-width: 13px 18px ; border-left-color: [audioIcons]; margin-top: -13px; background: transparent;}"," .play(}","%pauseBtn% {width: 42px; height: 42px; border-radius: 22px;}","%pauseBtn% a:before {left: 12px; width: 6px; height: 25px; border: 6px solid [audioIcons]; border-width: 0 6px; margin-top: -13px; background: transparent;}"," .pause{}","%.prev% , %.next% {margin: 12px 15px;}","%prevBtn%, %nextBtn% {width: 20px; height: 20px; border-radius: 10px;}","%prevBtn% a:before {left: 6px; width: 1px; height: 10px;  margin-top: -5px;}","%prevBtn% a:after {left: 0; border: 5px solid transparent; border-width: 5px 7px; border-right-color: [audioIcons]; margin-top: -5px; background: transparent;}","%nextBtn% a:before {left: 13px; width: 1px; height: 10px; margin-top: -5px;}","%nextBtn% a:after {left: 6px; border: 5px solid transparent; border-width: 5px 7px; border-left-color: [audioIcons]; margin-top: -5px; background: transparent;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted  a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px; margin-right: -2px;}","ul {padding: 0; list-style-type: none; margin-top: 3px; margin-left: 2px;}","%volumeScale%.unmuted, %volumeScale%.muted {float: left; height: 10px; width: auto;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100);}","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 52px; right: 92px; top: 10px; height: 5px; margin: 3px 1px;}",'[state~="mobile"] %progressbar% {right: 58px;}',"%bar% {cursor: pointer; width: 100%; position: absolute; height: 5px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {display: none;}","%handle% {cursor: pointer; width: 10px; height: 10px; border-radius: 10px; position: absolute; left: -2px; top: -3px; background-color: [prog]; display:block;}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}','[state~="noduration"] %durationOfTrack% {visibility: hidden;}','[state~="noduration"] %bar% {cursor: default;}','[state~="noduration"] %handle% {display: none}',"%info% {display: none;}","%repeatBtn% {display: none;}"])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistMusicPlayerEditorSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Playlist Extended Player",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:4}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_15",noshow:!0},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_12"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0",noshow:!0},{id:"ird",type:Constants.SkinParamTypes.BORDER_RADIUS,mutators:["square",["bl","br","tl","tr"]],defaultParam:"rd",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10},noshow:!0},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);",noshow:!0},{id:"fnt1",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",noshow:!0},{id:"fnt2",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_10",noshow:!1},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div skinpart="info" class="hidden"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="hidden"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="mediaControls" state="visible"><div class="mediaButtons"><div skinpart="playBtn" class="button play"><a>play</a></div><div skinpart="pauseBtn" class="button pause"><a>pause</a></div> <div skinpart="prevBtn" class="button prev" disabled="disabled"><a>previous</a></div><div skinpart="nextBtn" class="button next" disabled="disabled"><a>next</a></div><div skinpart="repeatBtn" class="button repeat hidden"><a>repeat</a></div> </div><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div><span skinpart="durationOfTrack" class="duration"><span skinpart="trackPosition"></span><span> / </span><span skinpart="trackDuration"></span></span></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}"," .mediaControls {float: left; width: 100%;}"," .mediaButtons {float: left; margin: 11px 0 11px 15px;}"," .volumeControls {float: right; margin: 10px 15px 10px 0;}",'[state~="mobile"] .volumeControls {display: none;}',"{height: 36px; border: [brw] solid [brd]; [rd] [selectable]}",'[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}',"%player% {min-width: 272px; min-height: 36px; color: [audioText]; overflow: hidden; [pos] [bg] [ird]}",'%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px;}",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%durationOfTrack% {text-align: center; min-width: 64px; float: right; margin-top: 11px; margin-right: 4px; [fnt2]}"," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}',"%playBtn% {width: 16px; height: 16px; margin: -1px 10px 0 0;}","%playBtn% a:before {left: 0px; border: 8px solid transparent; border-width: 8px 16px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%pauseBtn% {width: 16px; height: 16px; margin: -1px 10px 0 0;}","%pauseBtn% a:before {left: 0px; width: 4px; height: 14px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%.prev% , %.next% {margin-top: -3px; margin-right: 7px;}","%prevBtn%, %nextBtn% {width: 8px; height: 20px;}","%prevBtn% a:before {left: 0; width: 1px; height: 10px;  margin-top: -5px;}","%prevBtn% a:after {left: -6px; border: 5px solid transparent; border-width: 5px 7px; border-right-color: [audioIcons]; margin-top: -5px; background: transparent;}","%nextBtn% a:before {left: 7px; width: 1px; height: 10px; margin-top: -5px;}","%nextBtn% a:after {left: 0; border: 5px solid transparent; border-width: 5px 7px; border-left-color: [audioIcons]; margin-top: -5px; background: transparent;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px;}","ul {padding: 0; list-style-type: none;}","%volumeScale% {float: left; width: auto; margin: 3px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100); }","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 73px; right: 134px; height: 6px; margin: 15px 0;}",'[state~="mobile"] %progressbar% {right: 84px;}',"%bar% {cursor: pointer; width: 100%; position: absolute; height: 6px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}','[state~="noduration"] %durationOfTrack% {visibility: hidden;}','[state~="noduration"] %bar% {cursor: default;}','[state~="noduration"] %handle% {display: none}'])
}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistMusicPlayerEditorSkinNoControls",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Playlist Extended Player",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:4}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_15",noshow:!0},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_12"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0",noshow:!0},{id:"ird",type:Constants.SkinParamTypes.BORDER_RADIUS,mutators:["square",["bl","br","tl","tr"]],defaultParam:"rd",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10},noshow:!0},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);",noshow:!0},{id:"fnt1",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",noshow:!0},{id:"fnt2",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_10",noshow:!1},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div skinpart="info" class="hidden"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="hidden"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="mediaControls" state="hidden"><div class="mediaButtons"><div skinpart="playBtn" class="button play"><a>play</a></div><div skinpart="pauseBtn" class="button pause"><a>pause</a></div> </div><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div><span skinpart="durationOfTrack" class="duration"><span skinpart="trackPosition"></span><span> / </span><span skinpart="trackDuration"></span></span></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}"," .mediaControls {float: left; width: 100%;}"," .mediaButtons {float: left; margin: 11px 0 11px 15px;}"," .volumeControls {float: right; margin: 10px 15px 10px 0;}",'[state~="mobile"] .volumeControls {display: none;}',"{height: 36px; border: [brw] solid [brd]; [rd] [selectable]}",'[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}',"%player% {min-width: 272px; min-height: 36px; color: [audioText]; overflow: hidden; [pos] [bg] [ird]}",'%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px;}",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%durationOfTrack% {text-align: center; min-width: 64px; float: right; margin-top: 11px; margin-right: 4px; [fnt2]}"," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}',"%playBtn% {width: 16px; height: 16px; margin: -1px 10px 0 0;}","%playBtn% a:before {left: 0px; border: 8px solid transparent; border-width: 8px 16px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%pauseBtn% {width: 16px; height: 16px; margin: -1px 10px 0 0;}","%pauseBtn% a:before {left: 0px; width: 4px; height: 14px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%.prev% , %.next% {margin-top: -3px; margin-right: 7px;}","%prevBtn%, %nextBtn% {width: 8px; height: 20px;}","%prevBtn% a:before {left: 0; width: 1px; height: 10px;  margin-top: -5px;}","%prevBtn% a:after {left: -6px; border: 5px solid transparent; border-width: 5px 7px; border-right-color: [audioIcons]; margin-top: -5px; background: transparent;}","%nextBtn% a:before {left: 7px; width: 1px; height: 10px; margin-top: -5px;}","%nextBtn% a:after {left: 0; border: 5px solid transparent; border-width: 5px 7px; border-left-color: [audioIcons]; margin-top: -5px; background: transparent;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px;}","ul {padding: 0; list-style-type: none;}","%volumeScale% {float: left; width: auto; margin: 3px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100); }","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 73px; right: 134px; height: 6px; margin: 15px 0;}",'[state~="mobile"] %progressbar% {right: 84px;}',"%bar% {cursor: pointer; width: 100%; position: absolute; height: 6px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}','[state~="noduration"] %durationOfTrack% {visibility: hidden;}','[state~="noduration"] %bar% {cursor: default;}','[state~="noduration"] %handle% {display: none}'])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.PlaylistMusicPlayerSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Playlist Extended Player",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",group:"playlist",index:4}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_15"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_12"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0",noshow:!0},{id:"ird",type:Constants.SkinParamTypes.BORDER_RADIUS,mutators:["square",["bl","br","tl","tr"]],defaultParam:"rd",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10},noshow:!0},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);",noshow:!0},{id:"fnt1",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_9",noshow:!0},{id:"fnt2",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_10",noshow:!1},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div skinpart="info" class="hidden"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="hidden"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="mediaControls" state="visible"><div class="mediaButtons"><div skinpart="playBtn" class="button play"><a>play</a></div><div skinpart="pauseBtn" class="button pause"><a>pause</a></div> <div skinpart="prevBtn" class="button prev" disabled="disabled"><a>previous</a></div><div skinpart="nextBtn" class="button next" disabled="disabled"><a>next</a></div><div skinpart="repeatBtn" class="button repeat hidden"><a>repeat</a></div> </div><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div><span skinpart="durationOfTrack" class="duration"><span skinpart="trackPosition"></span><span> / </span><span skinpart="trackDuration"></span></span></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}"," .mediaControls {float: left; width: 100%;}"," .mediaButtons {float: left; margin: 11px 0 11px 15px;}"," .volumeControls {float: right; margin: 10px 15px 10px 0;}",'[state~="mobile"] .volumeControls {display: none;}',"{height: 36px; border: [brw] solid [brd]; [rd] [selectable]}",'[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}',"%player% {min-width: 272px; min-height: 36px; color: [audioText]; overflow: hidden; [pos] [bg] [ird]}",'%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px;}",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%durationOfTrack% {text-align: center; min-width: 64px; float: right; margin-top: 11px; margin-right: 4px; [fnt2]}"," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}',"%playBtn% {width: 16px; height: 16px; margin: -1px 10px 0 0;}","%playBtn% a:before {left: 0px; border: 8px solid transparent; border-width: 8px 16px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%pauseBtn% {width: 16px; height: 16px; margin: -1px 10px 0 0;}","%pauseBtn% a:before {left: 0px; width: 4px; height: 14px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%.prev% , %.next% {margin-top: -3px; margin-right: 7px;}","%prevBtn%, %nextBtn% {width: 8px; height: 20px;}","%prevBtn% a:before {left: 0; width: 1px; height: 10px;  margin-top: -5px;}","%prevBtn% a:after {left: -6px; border: 5px solid transparent; border-width: 5px 7px; border-right-color: [audioIcons]; margin-top: -5px; background: transparent;}","%nextBtn% a:before {left: 7px; width: 1px; height: 10px; margin-top: -5px;}","%nextBtn% a:after {left: 0; border: 5px solid transparent; border-width: 5px 7px; border-left-color: [audioIcons]; margin-top: -5px; background: transparent;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -2px;}","ul {padding: 0; list-style-type: none;}","%volumeScale% {float: left; width: auto; margin: 3px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100); }","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 73px; right: 134px; height: 6px; margin: 15px 0;}",'[state~="mobile"] %progressbar% {right: 84px;}',"%bar% {cursor: pointer; width: 100%; position: absolute; height: 6px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}','[state~="noduration"] %durationOfTrack% {visibility: hidden;}','[state~="noduration"] %bar% {cursor: default;}','[state~="noduration"] %handle% {display: none}'])}),define.skin("wysiwyg.common.components.singleaudioplayer.viewer.skins.SingleAudioPlayerSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/audio/EMP4.png",group:"single",index:0}),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_13"},{id:"iconBG",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_13",noshow:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"dividers",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15",noshow:!0},{id:"audioIcons",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"audioText",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11"},{id:"prog",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_21"},{id:"vol",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"0"},{id:"ird",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultParam:"rd",noshow:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"0",range:{min:0,max:10}},{id:"shd",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"0 1px 4px rgba(0, 0, 0, 0.6);"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position: absolute; top: 0; bottom: 0; right: 0; left: 0; margin: auto;",noshow:!0},{id:"selectable",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;",noshow:!0},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinpart="player"><div skinpart="info" class="font_9"><span skinpart="trackLabel" class="track"></span><span skinpart="sep" class="visible"> - </span><span skinpart="artistLabel" class="artist"></span></div><div class="mediaControls" state="visible"><div class="mediaButtons"><div skinpart="prevBtn" class="button prev" disabled="disabled"><a>previous</a></div><div skinpart="playBtn" class="button play"><a>play</a></div><div skinpart="pauseBtn" class="button pause"><a>pause</a></div> <div skinpart="repeatBtn" class="button repeat"><a>repeat</a></div> <div skinpart="nextBtn" class="button next" disabled="disabled"><a>next</a></div></div><div skinpart="progressbar"><div skinpart="bar"></div><div skinpart="slider"></div><div skinpart="handle"></div></div><div class="volumeControls"><div skinpart="volumeBtn" class="button unmuted"><a>volume</a></div><ul skinpart="volumeScale"><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li><li class="off"><div class="colorBlock"></div><div class="colorBlank"></div></li></ul></div><span skinpart="durationOfTrack" class="duration font_10"><span skinpart="trackPosition"></span><span> / </span><span skinpart="trackDuration"></span></span></div></div>'),b.css([" .hidden {display: none;}"," .visible {display: inline;}","{height: 60px; border: [brw] solid [brd]; [ird] [shd] [selectable]}",'[state~="mobile"] {height: 76px;}','[state~="loading"] %player% {background:url([themeDir]gif_preloader.gif) center no-repeat}','[state~="loading"] %player% * {display: none;}',"%player% {min-width: 250px; min-height: 60px; overflow: hidden; [pos] [bg] [rd]}",'[state~="mobile"] %player% {min-height: 76px;}','%player%:after {content: ""; position: absolute; top: -10px; bottom: -10px; right: -10px; left: -10px; overflow: hidden; z-index:-1; [bg]}',"%player% a {display: block; color: #fff; text-indent: -1000px; }",'%player% a:before, %player% a:after {margin: -8px 0 0; background-color: [audioIcons]; content: ""; position: absolute; top: 50%; left: 0;}',"%info% {color: [audioText]; padding: 0 10px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; margin: 10px 0 8px 0; display: block; min-height: 7px;}"," .mediaControls {float: left; width: 100%;}"," .mediaButtons {float: left; margin-left: 10px;}"," .volumeControls {float: right; margin-right: 10px;}",'[state~="mobile"] .volumeControls {display: none;}',"%durationOfTrack% {color: [audioText]; text-align: center; min-width: 72px; float: right; margin-right: 4px;}",'[state~="mobile"] %durationOfTrack% {margin-right: 10px;}',"%trackPosition% {color: [audioText];}","%trackDuration% {color: [audioText];}","%artistLabel% {opacity: 0.5; filter: alpha(opacity=50); color: [audioText];}",'[state~="mobile"] %artistLabel% {float: left; width: 100%;}',"%trackLabel% {color: [audioText];}",'[state~="mobile"] %trackLabel% {float: left; width: 100%;}',"%sep% {color: [audioText];}",'[state~="mobile"] %sep% {display: none;}'," .button {position: relative; overflow: hidden; float: left;}",' .button:before, .button:after {content: ""; position: absolute; top: 50%; left: 0;}',"%playBtn% {width: 16px; height: 16px; margin: -1px 5px 0 0;}","%playBtn% a:before {left: 0px; border: 8px solid transparent; border-width: 8px 12px; border-left-color: [audioIcons]; margin-top: -8px; background: transparent;}","%pauseBtn% {width: 16px; height: 16px; margin: -1px 5px 0 0;}","%pauseBtn% a:before {left: 0px; width: 4px; height: 14px; border: 4px solid [audioIcons]; border-width: 0 4px; margin-top: -7px; background: transparent;}","%repeatBtn% {width: 16px; height: 18px; margin: -3px 5px 0 -2px;}","%repeatBtn% a:before {left: 1px; width: 9px; height: 9px; border: 3px solid [audioIcons]; margin-top: -6px; background: transparent; border-radius: 16px;}","%repeatBtn% a:after {left: 9px; border: 4px solid [iconBG]; [bg]; height: 2px; width: 2px; border-width: 5px 2px 5px 5px; border-left-color: [audioIcons]; border-top-color: transparent; border-bottom-color: transparent; border-right-color: transparent;margin: -9px 0 0;}"," .unmuted {width: 20px; height: 20px;}"," .unmuted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .unmuted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}"," .muted {width: 20px; height: 20px;}"," .muted:before {width:16px; height:16px; border:1px solid [vol]; margin-top: -9px; border-radius:16px;}"," .muted:after {width:18px; border-top:1px solid [vol]; -webkit-transform:rotate(-45deg); -moz-transform:rotate(-45deg); -ms-transform:rotate(-45deg); -o-transform:rotate(-45deg); transform:rotate(-45deg);}"," .muted a:before {left: -2px; border: 7px solid transparent; border-right-color: [vol]; margin-top: -7px; border-radius: 3px; background: transparent;}"," .muted a:after {left: 4px; width: 4px; height: 6px; margin-top: -3px; background-color: [vol];}","%volumeBtn% {margin-top: -3px;}","ul {padding: 0; list-style-type: none; height: 10px;}","%volumeScale%, %volumeScale%.unmuted, %volumeScale%.muted {float: left; height: 10px; width: auto; margin: 2px 0 0 2px;}","%volumeScale% li {width: 4px; height: 10px; display: inline; float: left; margin: 0; cursor: pointer;}"," .colorBlock {background-color: [vol]; width: 2px; height: 10px; display: inline; float: left;}"," .colorBlank {background-color: [bg]; width: 2px; height: 10px; display: inline; float: left;}","%volumeScale% li.on .colorBlock {opacity: 1; filter: alpha(opacity=100);}","%volumeScale% li.off .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%volumeScale%.muted li.on .colorBlock {opacity: 0.3; filter: alpha(opacity=30);}","%progressbar% {position: absolute; left: 28px; right: 129px; height: 5px; margin: 5px 1px;}",'[state~="mobile"] %progressbar% {right: 88px;}',"%bar% {cursor: pointer; width: 100%; position: absolute; height: 5px; background-color: [prog]; opacity: 0.3; filter: alpha(opacity=30); box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);}","%slider% {position: absolute; height: 5px; display: block; background-color: [prog]; overflow: hidden;}",'%slider%:after {content: ""; position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; overflow: hidden;}',"%handle% {height: 5px; width: 5px; background-color: transparent; position: absolute; cursor: pointer;}","%handle%:hover {background-color: [audioIcons]; opacity: 0.3}",'[state~="waiting"] %.play% {display: block;}','[state~="waiting"] %.pause% {display: none;}','[state~="waiting"] %.repeat% {display: none;}','[state~="playing"] %.play% {display: none;}','[state~="playing"] %.pause% {display: block;}','[state~="playing"] %.repeat% {display: none;}','[state~="pausing"] %.play% {display: block;}','[state~="pausing"] %.pause% {display: none; }','[state~="pausing"] %.repeat% {display: none;}','[state~="stopped"] %.play% {display: block;}','[state~="stopped"] %.pause% {display: none;}','[state~="stopped"] %.repeat% {display: none;}','[state~="repeat"] %.play% {display: none;}','[state~="repeat"] %.pause% {display: none;}','[state~="repeat"] %.repeat% {display: block;}'," .next, .prev {display: none;}"])}),define.component("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.propertiesSchemaType("SkypeCallButtonProperties"),b.resources(["topology"]),b.dataTypes(["SkypeCallButton"]),b.skinParts({iframe:{type:"htmlElement"},placeholder:{type:"htmlElement"}}),b.states({buttonType:["call","chat"],imageSize:["medium","small","large"],imageColor:["blue","white"],iframe:["iframe_loading","iframe_ready"]}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._defaultSizes={call:{small:{width:38,height:16},medium:{width:56,height:24},large:{width:73,height:32}},chat:{small:{width:45,height:16},medium:{width:65,height:24},large:{width:86,height:32}}}},_onFirstRender:function(){var a=this._skinParts.iframe;a.addEvent("load",this._updateIframeReady.bind(this))},_onEachRender:function(){this._updatePlaceholderVisiblity(),this._updateSize(),this._updateIframeLoading(),this._updateIframeSrc(),this._updateVisualState()},_onRender:function(a){var b=this.INVALIDATIONS.FIRST_RENDER;a.data.invalidations.isInvalidated([b])&&this._onFirstRender(a),this._onEachRender(a)},isRenderNeeded:function(a){var b=[this.INVALIDATIONS.FIRST_RENDER,this.INVALIDATIONS.DATA_CHANGE];return a.isInvalidated(b)},_updatePlaceholderVisiblity:function(){var a,b=this.getDataItem(),c=b.get("skypeName");a=(c||"").length>0,a?(this._skinParts.iframe.setCollapsed(!1),this._skinParts.placeholder.setCollapsed(!0)):(this._skinParts.iframe.setCollapsed(!0),this._skinParts.placeholder.setCollapsed(!1))},getDefaultSize:function(a,b){return this._defaultSizes[a][b]},_updateSize:function(){var a,b=this.getDataItem(),c=this.getComponentProperties(),d=b.get("buttonType"),e=c.get("imageSize");a=this.getDefaultSize(d,e),this.setWidth(a.width),this.setHeight(a.height)},_updateIframeLoading:function(){this.setState("iframe_loading","iframe")},_updateIframeReady:function(){this.setState("iframe_ready","iframe")},_updateIframeSrc:function(){var a,b,c,d=this.getDataItem(),e=d.get("skypeName"),f=d.get("buttonType"),g=this.getComponentProperties(),h=g.get("imageColor"),i=g.get("imageSize"),j=this._skinParts.iframe;return e?(b=this.getDefaultSize(f,i),c="?skypeName="+encodeURIComponent(e),c+="&buttonType="+encodeURIComponent(f),c+="&imageColor="+encodeURIComponent(h),c+="&imageSize="+b.height,a=this.resources.topology.wysiwyg.replace(/^https/,"http"),j.src=a+"/html/external/SkypeCallButton.html"+c,void 0):(j.src="about:blank",void 0)},_updateVisualState:function(){var a=this.getDataItem(),b=a.get("buttonType"),c=this.getComponentProperties(),d=c.get("imageColor"),e=c.get("imageSize");this.setState(b,"buttonType"),this.setState(e,"imageSize"),this.setState(d,"imageColor")},setWidth:function(a){this._skinParts.iframe.setStyle("width",a+"px"),this._skinParts.placeholder.setStyle("width",a+"px"),this.parent(a)},setHeight:function(a){this._skinParts.iframe.setStyle("height",a+"px"),this._skinParts.placeholder.setStyle("height",a+"px"),this.parent(a)}})}),define.dataSchema("SkypeCallButton",{skypeName:"string",buttonType:{type:"string","enum":["call","chat"],"default":"call"}}),define.dataSchema("SkypeCallButtonProperties",{imageSize:{type:"string","enum":["small","medium","large"],"default":"medium"},imageColor:{type:"string","enum":["blue","white"],"default":"blue"}}),define.skin("wysiwyg.common.components.skypecallbutton.viewer.skins.SkypeCallButtonSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([{id:"webThemeDir",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<iframe skinpart="iframe" src="about:blank" frameborder="0" allowtransparency="true" class="hidden" scrolling="no"></iframe><div skinpart="placeholder"></div>'),b.css(["%iframe% { border: 0; display: none; }","%placeholder% { background-repeat: no-repeat; background-size: cover; }","[state~=iframe_ready] %iframe% { display: block; }","[state~=call][state~=small][state~=blue] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/callbutton_16px.png);  }","[state~=call][state~=small][state~=white] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/callbutton_trans_16px.png);  }","[state~=chat][state~=small][state~=blue] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/chatbutton_16px.png);  }","[state~=chat][state~=small][state~=white] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/chatbutton_trans_16px.png);  }","[state~=call][state~=medium][state~=blue] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/callbutton_24px.png);  }","[state~=call][state~=medium][state~=white] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/callbutton_trans_24px.png);  }","[state~=chat][state~=medium][state~=blue] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/chatbutton_24px.png);  }","[state~=chat][state~=medium][state~=white] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/chatbutton_trans_24px.png);  }","[state~=call][state~=large][state~=blue] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/callbutton_32px.png);  }","[state~=call][state~=large][state~=white] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/callbutton_trans_32px.png);  }","[state~=chat][state~=large][state~=blue] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/chatbutton_32px.png);  }","[state~=chat][state~=large][state~=white] %placeholder% { background-image: url(http://www.skypeassets.com/i/scom/images/skype-buttons/chatbutton_trans_32px.png);  }"])}),define.resource("skypecallbuttonSkinMap",{"wysiwyg.common.components.skypecallbutton.viewer.skins.SkypeCallButtonSkin":{}}),define.component("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.propertiesSchemaType("SpotifyFollowProperties"),b.dataTypes(["SpotifyFollow"]),b.skinParts({iframe:{type:"htmlElement"},placeholder:{type:"htmlElement"}}),b.states({placeholder:["basic_all_show","basic_all_hide","detailed_dark_show","detailed_dark_hide","detailed_light_show","detailed_light_hide"]}),b.statics({EDITOR_META_DATA:{general:{settings:!0,design:!1}},_resizableSides:[Constants.BaseComponent.ResizeSides.LEFT,Constants.BaseComponent.ResizeSides.RIGHT],defaultSizes:{large:{width:225,height:56,label:"detail"},small:{width:156,height:25,label:"basic"}},_sizeLimits:{minW:156,minH:25,maxW:980,maxH:56}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)
},_onRender:function(a){var b,c,d,e,f,g=a.data.invalidations,h=this.getDataItem(),i=this.getComponentProperties();g.isInvalidated([this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.PROPERTIES_CHANGE])&&(b=h.get("uri"),c=this.defaultSizes[i.get("size")],d=i.get("theme"),e=i.get("showFollowersCount"),this._sizeLimits.minW=c.width,this._togglePlaceholderImage(!!b,c.label,d,e),this._setIframeSource(b,c.label,d,e),f=!!_.find(g._invalidations.dataChange,function(a){return"size"===a.field}),f?(this.setWidth(c.width),this.setHeight(c.height)):this._matchIframeSizeToCompSize())},_togglePlaceholderImage:function(a,b,c,d){this._skinParts.placeholder.setCollapsed(a),this._skinParts.iframe.setCollapsed(!a),a||this._setPlaceholderState(b,c,d)},_setIframeSource:function(a,b,c,d){var e;this._isUriValid(a)&&(e="https://embed.spotify.com/follow/1/?uri="+a+"&size="+b+"&theme="+c+"&show-count="+(d?1:0),this._skinParts.iframe.setAttribute("src",e))},_isUriValid:function(a){return a&&a.length>0},setWidth:function(a){this.parent(a),this._matchIframeSizeToCompSize()},setHeight:function(a){this.parent(a),this._matchIframeSizeToCompSize()},_matchIframeSizeToCompSize:function(){this._skinParts.iframe.setAttribute("width",this.getWidth()+"px"),this._skinParts.iframe.setAttribute("height",this.getHeight()+"px")},_setPlaceholderState:function(a,b,c){var d="basic"===a?"basic":"detailed",e="basic"===d?"all":"dark"===b?"light":"dark",f=c?"show":"hide",g=d+"_"+e+"_"+f;this.setState(g,"placeholder")}})}),define.dataSchema("SpotifyFollow",{uri:{type:"string","default":""}}),define.dataSchema("SpotifyFollowProperties",{size:{type:"string","enum":["small","large"],"default":"large"},theme:{type:"string","enum":["light","dark"],"default":"light"},showFollowersCount:{type:"boolean","default":"true"}}),define.skin("wysiwyg.common.components.spotifyfollow.viewer.skins.SpotifyFollowSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}),b.skinParams([{id:"webThemeDir",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<iframe id="spotifyFollowId" skinPart="iframe" scrolling="no" frameborder="0" style="border:none; overflow:hidden;" allowtransparency="true"></iframe><div skinpart="placeholder" class="hidden"></div>'),b.css(["%iframe% { overflow:hidden }","[state~=detailed_dark_show]  %placeholder% {width: 225px; height: 56px; background: transparent url([webThemeDir]spotify/spotify_follow_placeholder_detailed_dark_show.png)  0 0 no-repeat;}","[state~=detailed_dark_hide]  %placeholder% {width: 225px; height: 56px; background: transparent url([webThemeDir]spotify/spotify_follow_placeholder_detailed_dark_hide.png)  0 0 no-repeat;}","[state~=detailed_light_show] %placeholder% {width: 225px; height: 56px; background: transparent url([webThemeDir]spotify/spotify_follow_placeholder_detailed_light_show.png) 0 0 no-repeat;}","[state~=detailed_light_hide] %placeholder% {width: 225px; height: 56px; background: transparent url([webThemeDir]spotify/spotify_follow_placeholder_detailed_light_hide.png) 0 0 no-repeat;}","[state~=basic_all_show]      %placeholder% {width: 156px; height: 25px; background: transparent url([webThemeDir]spotify/spotify_follow_placeholder_basic_all_show.png)      0 0 no-repeat;}","[state~=basic_all_hide]      %placeholder% {width: 156px; height: 25px; background: transparent url([webThemeDir]spotify/spotify_follow_placeholder_basic_all_hide.png)      0 0 no-repeat;}"])}),define.resource("spotifyfollowSkinMap",{"wysiwyg.common.components.spotifyfollow.viewer.skins.SpotifyFollowSkin":{description:"Basic",iconUrl:"/images/wysiwyg/skinIcons/xxx.png",hidden:!1,index:0}}),define.component("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.propertiesSchemaType("SpotifyPlayerProperties"),b.dataTypes(["SpotifyPlayer"]),b.skinParts({iframe:{type:"htmlElement"},placeholder:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.baseUrl="https://embed.spotify.com/?"},_onRender:function(a){var b,c,d,e,f=a.data.invalidations,g=this.getDataItem(),h=this.getComponentProperties();if(f.isInvalidated([this.INVALIDATIONS.DATA_CHANGE,this.INVALIDATIONS.PART_SIZE])){if(this.iframeSize=h.get("size"),b=g.get("uri"),c=h.get("color"),d=h.get("style"),this._togglePlaceholderImage(!!b),!b)return;this._setSizeLimits(this.iframeSize),e=this._buildIframeUrl(b,c,d),this._refreshIframe(e),this._setIframeSize(),this.setWidth(this.getWidth())}},_togglePlaceholderImage:function(a){this._skinParts.placeholder.setCollapsed(a),this._skinParts.iframe.setCollapsed(!a)},_buildIframeUrl:function(a,b,c){return this.baseUrl+"uri="+encodeURIComponent(a)+"&theme="+b+"&view="+c},_setIframeSize:function(){var a=this.getWidth(),b=this._calculateHeight(a);this._skinParts.iframe.setAttribute("width",a),this._skinParts.iframe.setAttribute("height",b),this._refreshIframe()},_refreshIframe:function(a){var b=a||this._skinParts.iframe.getAttribute("src");this._skinParts.iframe.setAttribute("src",b)},_setSizeLimits:function(a){this._sizeLimits="compact"===a?{minW:250,minH:80,maxW:640,maxH:80}:{minW:250,minH:330,maxW:640,maxH:720}},_calculateHeight:function(a){var b=this._sizeLimits.minH;return"large"===this.iframeSize&&(b+=a-this._sizeLimits.minW),b},setWidth:function(a){var b=this._calculateHeight(a);this.setHeight(b),this.parent(a)}})}),define.dataSchema("SpotifyPlayer",{uri:{type:"string","default":"",description:"Spotify URI"}}),define.dataSchema("SpotifyPlayerProperties",{size:{type:"string","enum":["compact","large"],"default":"compact",description:"Size of the player"},color:{type:"string","enum":[{label:"dark",value:"black"},{label:"light",value:"white"}],"default":"black",description:"Theme of the player"},style:{type:"string","enum":["list","coverart"],"default":"list",description:"Style of the player"}}),define.skin("wysiwyg.common.components.spotifyplayer.viewer.skins.SpotifyPlayerSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([{id:"webThemeDir",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"}]),b.html('<iframe skinpart="iframe" width="300" height="80" scrolling="no" frameborder="0" allowtransparency="true"></iframe><div skinpart="placeholder" class="hidden"></div>'),b.css(["%iframe% { overflow:hidden }","%placeholder% { width: 300px; height: 80px; background: transparent url([webThemeDir]spotify/placeholder.png) 0 0 no-repeat; }"])}),define.resource("spotifyplayerSkinMap",{"wysiwyg.common.components.spotifyplayer.viewer.skins.SpotifyPlayerSkin":{}}),define.Class("wysiwyg.viewer.components.traits.IframeUtils",function(a){var b=a;b.methods({setIFrameSrc:function(a,b){b!==a.src&&this._setIFrameSrcWithoutAffectingHistory(a,b)},_setIFrameSrcWithoutAffectingHistory:function(a,b){var c=a.parentNode;c?(c.removeChild(a),a.src=b,c.appendChild(a)):a.src=b}})}),define.Class("wysiwyg.common.components.traits.LinkableComponent",function(a){var b=a;b.resources(["W.Utils","W.Config"]),b.binds(["_linkableComponentRender","_linkify","renderLinks","_showNavigationDisabledTooltip","_linkableComponentEditModeChanged"]),b.statics({linkType:{SMS:"SMS",CALL:"CALL",SKYPE:"SKYPE",MAP:"MAP",EMAIL:"EMAIL",FACEBOOK:"FACEBOOK",FLICKR:"FLICKR",BLOGGER:"BLOGGER",MYSPACE:"MYSPACE",LINKEDIN:"LINKEDIN",TWITTER:"TWITTER",TUMBLR:"TUMBLR",YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",PAGE:"PAGE",FREE_LINK:"FREE_LINK",TEXT:"TEXT",DELICIOUS:"DELICIOUS",WEBSITE:"WEBSITE",DOCUMENT:"DOCUMENT",LOGIN:"LOGIN",ADMIN_LOGIN:"ADMIN_LOGIN"},linkTarget:{SAME_WINDOW:"_self",NEW_WINDOW:"_blank"}}),b.methods({initialize:function(){var a=this.resources.W.Utils.linkUtils;this.render&&this.NEW_BASE_COMP!==!0?(this._componentOriginalRender=this.render.bind(this),this.render=this._linkableComponentRender):this.NEW_BASE_COMP===!0&&(this.on(Constants.LifecycleSteps.RENDER,this,this._linkableComponentRender),this.on(Constants.EventDispatcher.Events.EXTERMINATING,this,this._exterminateLinkableComponent)),this._linkableComponentOnEditModeChanged=a.linkableComponentEditModeChanged.bind(this),this.injects().Commands.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._linkableComponentOnEditModeChanged)},_exterminateLinkableComponent:function(){this.injects().Commands.unregisterListener(this)},_linkableComponentRender:function(){this._componentOriginalRender&&this._componentOriginalRender();var a=this.resources.W.Utils.linkUtils,b=this.getDataItem();a.renderLinks.call(this,b,this._skinParts.link),this.resources.W.Config.env.$isEditorViewerFrame&&a.linkableComponentEditModeChanged.call(this,"PREVIEW",b,this._skinParts.link)},renderLinks:function(){var a=this.getDataItem(),b=a.get("href"),c=a.get("target");("same"==c||"self"==c)&&(c="_self",a.set("target","_self"));var d=a.get("linkType"),e=this._skinParts.link;this._linkify(d,e,b,c),this._NO_LINK_PROPAGATION&&this._disableLinkClickPropagation(e)},_disableLinkClickPropagation:function(a){a.addEvent("click",function(a){a.stopPropagation()})},_linkify:function(a,b,c,d){b&&(c&&""!==c?(b.set("href",c),b.setStyle("cursor","pointer"),this._setTarget(b,d),this.hasState("noLink","linkableComponent")&&this.removeState("noLink","linkableComponent")):(b.setStyle("cursor","default"),b.erase("href"),b.erase("target"),this.hasState("noLink","linkableComponent")&&this.setState("noLink","linkableComponent")),this._handleSpecialCases(a,b))},_handleSpecialCases:function(a,b){switch(b.removeEvents("click"),a){case this.linkType.LOGIN:b.addEvent("click",function(){if(window.animateForm){var a=this.getDataItem(),b=a.get("text");if(b){b=JSON.parse(b);var c=b.postLoginUrl,d=b.postSignupUrl,e=b.type,f="HTML";if(-1!==d.indexOf("ifcontext")){var g=this.resources.W.Utils.getQueryStringParamsAsObject(),h="";_.forOwn(g,function(a,b){"ifcontext"===b.toLowerCase()&&(h=a.replace("#",""),d=/^[a-zA-Z0-9]+$/.test(h)?d.replace("{ifcontext}",h):d.replace("{ifcontext}","illegalContextValue"))})}var i=window.userApi?window.userApi.isSessionValid():!1;i?c&&(window.location.href=c):window.animateForm.callForm([d,c,e,f])}}}.bind(this));break;case this.linkType.ADMIN_LOGIN:b.setStyle("cursor","pointer"),b.addEvent("click",function(){this.injects().Commands.executeCommand("WViewerCommands.AdminLogin.Open")}.bind(this))}},_setTarget:function(a,b){a.set("target",b)},_linkableComponentEditModeChanged:function(a){if(this.getIsDisposed()!==!0){var b,c=!1,d=!1,e=this.getDataItem(),f=e.get("linkType"),g=e.get("target");g==this.linkTarget.SAME_WINDOW&&f==this.linkType.WEBSITE&&(c=!0),f==this.linkType.EMAIL&&(d=!0),b=this._skinParts.link,"PREVIEW"==a?c?this._bindPageLeaveWarningToLink(b):d&&(this._bindMailtoLinks(),this.renderLinks()):(b.removeEvents("click"),this.renderLinks())}},_bindMailtoLinks:function(){var a=this._skinParts.link;a.addEvent("click",this._temporaryDisableNavigationWarning)},_temporaryDisableNavigationWarning:function(){window.enableNavigationConfirmation=!1,setTimeout(function(){window.enableNavigationConfirmation=!0},50)},_bindPageLeaveWarningToLink:function(a){a.erase("href"),a.erase("target"),a.addEvent("click",function(a){a.preventDefault(),this._showNavigationDisabledTooltip()}.bind(this))},_showNavigationDisabledTooltip:function(){var a={component:this};this.injects().Commands.executeCommand("linkableComponent.navigateSameWindow",a,this)}})}),define.Class("wysiwyg.common.components.traits.SelectableButton",function(a){var b=a;b.inherits("wysiwyg.common.components.traits.SelectableOption"),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.addEvent("click",function(){this.fireEvent(this.ITEM_SELECTED_EVENT,this)}.bind(this))},setSelected:function(a){this._isSelected=a,a?this.setState("selected"):this.setState("up")}})}),define.Class("wysiwyg.common.components.traits.SelectableOption",function(a){var b=a;b.statics({ITEM_SELECTED_EVENT:"itemSelected"}),b.fields({_isSelected:!1}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.getViewNode().addEvent("click",function(){this.fireEvent(this.ITEM_SELECTED_EVENT,this)}.bind(this))},setSelected:function(a){this._isSelected=a}})}),define.Class("wysiwyg.viewer.components.traits.ValidationSettings",function(a){var b=a;b.statics({VALID_STATE_CHANGED_EVENT:"validStateChanged"}),b.fields({_isValid:!0}),b.methods({_validationFunction:function(){return!0},initialize:function(a,b,c){this.parent(a,b,c),c.validationFunction&&this.setValidationFunction(c.validationFunction)},setValidationState:function(a){var b=this._isValid!==a;this._isValid=a,b&&this.fireEvent(this.VALID_STATE_CHANGED_EVENT,a)},setValidationFunction:function(a){this._validationFunction=a}})}),define.Class("wysiwyg.common.utils.TextMigrationDomHelper",function(a){var b=a;b.fields({_blockElementTags:["audio","dd","dt","li","video","address","article","aside","blockquote","details","div","dl","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","menu","nav","ol","p","pre","section","table","ul","center","dir","noframes"]}),b.methods({renameNode:function(a,b){if(a.tagName.toLowerCase()==b.toLowerCase())return a;var c=new Element(b),d=(a.attributes,this.getAllAttributes(a));return d.forEach(function(a){c.setAttribute(a.name,a.value)}),this.moveChildren(a,c),a.parentNode&&a.parentNode.replaceChild(c,a),c},getAllAttributes:function(a){var b=a.attributes,c=[];if(b.length<20)c=this.collectionToArray(b);else{var d=a.getProperties("class","style","dir","href","background","action","src","data","align","alt","color","face","label","for","link","id","name","value");Object.forEach(d,function(a,b){b&&a&&c.push({name:b,value:a})})}return c},moveChildren:function(a,b){if(a!=b)for(var c;c=a.firstChild;)b.appendChild(a.removeChild(c))},collectionToArray:function(a){for(var b=Array.slice(a,0),c=0;c<b.length;c++){var d=b[c];d&&d.nodeType&&1===d.nodeType&&(b[c]=new Element(d))}return b},isBlockElement:function(a){var b=a.tagName&&a.tagName.toLowerCase();return this._blockElementTags.contains(b)},isOnlyWhiteSpace:function(a){return a.every(function(a){return"whitespace"===typeOf(a)})},isDomElement:function(a){return"element"===typeOf(a)},isTextNode:function(a){return"textnode"===typeOf(a)},hasBlockElementChildren:function(a){return a.getChildren().some(function(a){return this.isBlockElement(a)},this)},replaceElementWithItsChildren:function(a){var b=a.parentNode,c=this.collectionToArray(a.childNodes);c.each(function(c){b.insertBefore(c,a)},this),b.removeChild(a)},isElementHasAttributes:function(a){var b=this.getAllAttributes(a);if(!b)return!1;for(var c=0;c<b.length;c++){var d=b[c].value;if(d)return!0}return!1},removeClass:function(a,b){a.removeClass(b),a.getAttribute("class")||a.removeAttribute("class")}})}),define.Class("wysiwyg.common.utils.TextMigrationHandler",function(a){var b=a;b.utilize(["wysiwyg.common.utils.TextStylesMigration","wysiwyg.common.utils.TextSimpleFormatMigration"]),b.resources(["W.Data","W.Config","W.Theme"]),b.methods({initialize:function(){this._stylesMigration=new this.imports.TextStylesMigration,this._simpleMigration=new this.imports.TextSimpleFormatMigration;var a=this;this.resources.W.Config.env.$isEditorFrame?this.resource.getResourceValue("W.Preview",function(b){b.getPreviewManagersAsync(a._initViewerManagers,a)}):this._initViewerManagers(this.resources.W)},_initViewerManagers:function(a){this._viewer={theme:a.Theme,data:a.Data}},migrateComponent:function(a){this._changeData(a),this._changeSkin(a);var b=a.getDataItem();return b&&b.get("text")?this.migrateText(b.get("text"),null,null):null},migrateText:function(a,b,c){if(b=b||"p",c=c||"font_8","string"!==typeOf(a))return null;if(""===a)return'<{0} class="{1}"></{0}>'.substitute([b,c]);var d=new Element("div");return d.set("html",a),this._stylesMigration.migrateElement(d,b,c),this._simpleMigration.migrateElement(d),d.get("html")},_changeData:function(a){var b=a.getDataItem().get("text"),c=this._viewer.data.addDataItemWithUniqueId("",{type:"StyledText",text:b,stylesMapId:"CK_EDITOR_PARAGRAPH_STYLES"}).dataObject;a.setDataItem(c)},_changeSkin:function(a){this._viewer.theme.getStyle("txtNew",function(b){a.setStyle(b)},"wysiwyg.viewer.skins.WRichTextNewSkin")}})}),define.Class("wysiwyg.common.utils.TextMigrationStylesHelper",function(a){var b=a;b.resources(["tags"]),b.methods({initialize:function(a,b){this._theme=a,this._domHelper=b},getMostCommonStyle:function(a){var b={};return a.forEach(function(a){var c=this.getElementStyleClass(a);b[c]=b[c]||0,b[c]+=a.get("text").length},this),this._getEntryWithMaxValue(b)},_getEntryWithMaxValue:function(a){var b=0,c=null;return Object.forEach(a,function(a,d){a>b&&(b=a,c=d)}),c},flattenStyledSpans:function(a){if(this.getElementStyleClass(a)&&this._flattenStylesInSpan(a),this._isContainStyleSpans(a)){var b=this.getStyledSpansRecursive(a,[]);b.forEach(this._flattenStylesInSpan,this)}},_flattenStylesInSpan:function(a){if(this._isContainStyleSpans(a))for(var b=a.clone(!1),c=this._domHelper.collectionToArray(a.childNodes),d=0;d<c.length;d++){var e=c[d];if(this.getElementStyleClass(e)||this._isContainStyleSpans(e)){var f=e.clone(!1),g=this._getStyledSpanWithItsParents(e,f);return f.firstChild&&b.adopt(f),b.inject(a,"before"),g.inject(a,"before"),this.flattenStyledSpans(g),this._flattenStylesInSpan(a),void 0}b.adopt(e)}},_getStyledSpanWithItsParents:function(a,b){if(this.getElementStyleClass(a))return a;for(var c=a.clone(!1),d=this._domHelper.collectionToArray(a.childNodes),e=0;e<d.length;e++){var f=d[e];if(this.getElementStyleClass(f)||this._isContainStyleSpans(f)){var g=f.clone(!1),h=this._getStyledSpanWithItsParents(f,g);return c.adopt(h),g.firstChild&&b.adopt(g),c}b.adopt(f)}return c},_isContainStyleSpans:function(a){return this._domHelper.isDomElement(a)&&a.getElements('span[class*="font_"]').length},getStyledSpansRecursive:function(a,b){if(this._domHelper.isDomElement(a)){var c=this.getElementStyleClass(a);c&&"span"===a.tagName.toLowerCase()?b.push(a):a.getChildren().each(function(a){b.concat(this.getStyledSpansRecursive(a,b))},this)}return b},isBlockContainUnstyledText:function(a){if(this._domHelper.isTextNode(a))return!0;if(this.getElementStyleClass(a))return!1;for(var b=this._domHelper.collectionToArray(a.childNodes),c=0;c<b.length;c++)if(this.isBlockContainUnstyledText(b[c]))return!0;return!1},getElementStyleClass:function(a){var b=a.classList;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].indexOf("font_")>-1)return b[c];return null},getStyleDelta:function(a,b){var c=a&&this._theme.getProperty(a),d=this._theme.getProperty(b),e={},f=["font-family","font-size","font-style","font-variant","font-weight","line-height"];return f.each(function(a){var b=this._createStyleKeyGetter(a);c&&c[b]()==d[b]()||(e[a]=d[b]())},this),e},_createStyleKeyGetter:function(a){var b=a.indexOf("-")+1,c="";return c=b>0?a.split("-").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join(""):a.charAt(0).toUpperCase()+a.slice(1),c.contains("Font")&&"FontFamily"!==c&&(c=c.replace("Font","")),"get"+c},getColorDelta:function(a,b){var c=a&&this._theme.getProperty(a),d=this._theme.getProperty(b);if(!d)return null;var e=d.getColorReference();if(e){if(!c||!c.getColorReference()||c.getColorReference()!==e)return{isRef:!0,value:e}}else if(!c||c.getColorReference()||c.getColor()!==d.getColor())return{isRef:!1,value:d.getColor()};return null}})}),define.Class("wysiwyg.common.utils.TextSimpleFormatMigration",function(a){var b=a;b.utilize(["wysiwyg.common.utils.TextMigrationDomHelper","wysiwyg.common.utils.TextMigrationStylesHelper"]),b.methods({initialize:function(){this._domHelper=new this.imports.TextMigrationDomHelper,this._styleHelper=new this.imports.TextMigrationStylesHelper},migrateElement:function(a){this._migrateBold(a),this._migrateItalic(a),this._migrateUnderline(a),this._migrateAlignRight(a),this._migrateAlignCenter(a),this._migrateJustify(a),this._migrateUl(a)},_migrateBold:function(a){var b=a.getElements('.bold"');this._removeClassAddTag(b,"bold","strong")},_migrateItalic:function(a){var b=a.getElements('.italic"');this._removeClassAddTag(b,"italic","em")},_migrateUnderline:function(a){var b=a.getElements('.underline"');this._removeClassAddTag(b,"underline","u")},_migrateAlignRight:function(a){var b=a.getElements('.alignRight"');this._removeClassAddInlineStyle(b,"alignRight","text-align","right")},_migrateAlignCenter:function(a){var b=a.getElements('.alignCenter"');this._removeClassAddInlineStyle(b,"alignCenter","text-align","center")},_migrateJustify:function(a){var b=a.getElements('.alignJustify"');this._removeClassAddInlineStyle(b,"alignJustify","text-align","justify")},_migrateUl:function(a){var b=a.getElements("ul, ol");b.each(function(a){this._styleHelper.getElementStyleClass(a)||a.addClass(Constants.Theme.DEFAULT_STYLE_CLASS)},this)},_removeClassAddTag:function(a,b,c){a.forEach(function(a){var d=new Element(c);this._domHelper.moveChildren(a,d),this._domHelper.removeClass(a,b),this._domHelper.isElementHasAttributes(a)||"span"!==a.nodeName.toLowerCase()?a.adopt(d):d.replaces(a)},this)},_removeClassAddInlineStyle:function(a,b,c,d){a.forEach(function(a){this._domHelper.removeClass(a,b),a.setStyle(c,d)},this)}})}),define.Class("wysiwyg.common.utils.TextStylesMigration",function(a){var b=a;b.utilize(["wysiwyg.common.utils.TextMigrationStylesHelper","wysiwyg.common.utils.TextMigrationDomHelper"]),b.resources(["W.Utils","W.Data","W.Config","W.Theme"]),b.fields({_changeableTagList:["h1","h2","h3","h4","h5","h6","p","div"],_deprecatedStyleClass:["font_1","font_10"]}),b.methods({initialize:function(){this._domHelper=new this.imports.TextMigrationDomHelper,this._styleMap=this.resources.W.Data.getDataByQuery("#CK_EDITOR_FONT_STYLES").get("items");var a=this;this.resources.W.Config.env.$isEditorFrame?this.resource.getResourceValue("W.Preview",function(b){b.getPreviewManagersAsync(a._initViewerManagers,a)}):this._initViewerManagers(this.resources.W)},_initViewerManagers:function(a){this._viewer={theme:a.Theme,data:a.Data},this._stylesHelper=new this.imports.TextMigrationStylesHelper(a.Theme,this._domHelper)},migrateElement:function(a,b,c){var d=[],e=this._domHelper.collectionToArray(a.childNodes);e.forEach(function(a){if(this._domHelper.isBlockElement(a)){d.length>0&&(this._applyStyleOnElements(d,b,c),d=[]);var e=!this._changeableTagList.contains(a.tagName.toLowerCase())||this._domHelper.hasBlockElementChildren(a);e?this.migrateElement(a,b,c):this._applyStyleOnBlock(a,b,c)}else d.push(a)},this),d.length>0&&this._applyStyleOnElements(d,b,c)},_applyStyleOnElements:function(a,b,c){if(!this._domHelper.isOnlyWhiteSpace(a)){var d=new Element("p");d.inject(a[0],"before"),d.adopt(a),this._applyStyleOnBlock(d,b,c)}},_applyStyleOnBlock:function(a,b,c){if(0===a.childNodes.length)return LOG.reportError(wixErrors.TEXT_MIGRATION_EMPTY_BLOCK_ELEMENT,"TextStylesMigration","_applyStyleOnBlock"),void 0;this._stylesHelper.flattenStyledSpans(a);var d=null;if(this._stylesHelper.isBlockContainUnstyledText(a)){var e=this._replaceBlockWithDefaultTag(a,b,c),f=this._stylesHelper.getStyledSpansRecursive(e,[]);this._removeStyleClassesReplaceWithInline(null,f)}else d=this._moveStyleClassToBlockParentElement(a),d&&this._moveInlineStyleFromOriginalElementToBlockParentElement(a,d);this._verifyNoStyledSpans(a,d)},_verifyNoStyledSpans:function(a,b){var c=a.getElements('span[class*="font_"]');c.length&&(LOG.reportError(wixErrors.TEXT_MIGRATION_MISSED_STYLED_SPANS,"TextStylesMigration","_applyStyleOnBlock",a.outerHTML),this._removeStyleClassesReplaceWithInline(b,c))},_replaceBlockWithDefaultTag:function(a,b,c){if(!b||!c)return LOG.reportError(wixErrors.TEXT_MIGRATION_DEFAULT_VALUES_NOT_PROVIDED,"TextStylesMigration","_replaceBlockWithDefaultTag"),void 0;if(!a||a.tagName!==b||!a.hasClass(c)){var d=this._domHelper.renameNode(a,b);return d.addClass(c),d}},_moveStyleClassToBlockParentElement:function(a){var b=this._stylesHelper.getStyledSpansRecursive(a,[]),c=this._stylesHelper.getMostCommonStyle(b),d=null;if(c){var e=this._replaceDeprecatedStyleIfNeeded(c);return e!=c&&(d=c,c=e),a.addClass(c),this._removeStyleClassesReplaceWithInline(c,b),d&&this._addFontSizeOnBlockIfNeeded(a,c,d),c}return null},_replaceDeprecatedStyleIfNeeded:function(a){return this._isStyleDeprecated(a)?this.getReplacingStyle(a):a},_addFontSizeOnBlockIfNeeded:function(a,b,c){var d=this._viewer.theme.getProperty(c).getSize(),e=this._viewer.theme.getProperty(b).getSize();e>d&&a.setStyle("font-size",d)},getReplacingStyle:function(){return"font_8"},_isStyleDeprecated:function(a){return this._deprecatedStyleClass.contains(a)},_removeStyleClassesReplaceWithInline:function(a,b){b.map(function(b){var c=this._stylesHelper.getElementStyleClass(b);c==a?0===b.childNodes.length?b.destroy():this._removeStyleFromSpan(b,a):(this._domHelper.removeClass(b,c),0===b.getProperty("class").length&&b.removeAttribute("class"),this._setStyleOverrides(a,c,b))},this)},_removeStyleFromSpan:function(a,b){a.removeClass(b),this._domHelper.isElementHasAttributes(a)||this._domHelper.replaceElementWithItsChildren(a)},_setStyleOverrides:function(a,b,c){var d=this._stylesHelper.getStyleDelta(a,b),e=c;Object.forEach(d,function(a,b){e.setStyle(b,a)});var f=this._stylesHelper.getColorDelta(a,b);f&&(f.isRef?e.addClass(f.value):e.setStyle("color",f.value))},_moveInlineStyleFromOriginalElementToBlockParentElement:function(a,b){var c,d=this._viewer.theme.getProperty(b),e="core.utils.css.Font"===d.getOriginalClassName();return e&&(c=d.getLineHeight()),c&&(a.setStyle("line-height",c),this._createWrapperSpanWithBlockLineHeight(a,c),a=this._setBlockElementTagAccordingToStyle(a,b)),a},_createWrapperSpanWithBlockLineHeight:function(a,b){var c=document.createElement("span");c.setStyle("line-height",b),this._domHelper.moveChildren(a,c),a.appendChild(c)},_setBlockElementTagAccordingToStyle:function(a,b){var c=this._styleMap[b].seoTag;return this._domHelper.renameNode(a,c)}})}),define.skin("wysiwyg.common.components.weather.viewer.skins.WeatherBasicSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([{id:"basicDegreesValueFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_6",lang:"WEATHER_BASIC_SKIN_DEGREES_VALUE_FONT_LABEL",enableEdit:!0},{id:"basicDegreesUnitFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_6",lang:"WEATHER_BASIC_SKIN_DEGREES_UNIT_FONT_LABEL",enableEdit:!0},{id:"basicBorderRadius",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"4px",lang:"WEATHER_BASIC_SKIN_BORDER_RADIUS_LABEL",enableEdit:!0},{id:"basicBorderWidth",type:Constants.SkinParamTypes.SIZE,defaultValue:"2px",lang:"WEATHER_BASIC_SKIN_BORDER_WIDTH_LABEL",enableEdit:!0},{id:"basicBorderColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_18",lang:"WEATHER_BASIC_SKIN_BORDER_COLOR_LABEL",enableEdit:!0},{id:"basicBgColor",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_15",lang:"WEATHER_BASIC_SKIN_BACKGROUND_COLOR_LABEL",enableEdit:!0},{id:"basicTextColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"WEATHER_BASIC_SKIN_TEXT_COLOR_LABEL",enableEdit:!0}]),b.iconParams({description:"Basic skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:0}),b.html('<div skinpart="degreesBox">   <span skinpart="degreesValue"></span>   <span skinpart="degreesUnit"></span></div>'),b.css(["{ position: relative; }","%degreesBox% {   white-space: nowrap;   border-width : [basicBorderWidth];   border-radius : [basicBorderRadius];   border-style : solid;   border-color : [basicBorderColor];   text-align : center;   padding : 12px;   [basicBgColor];   color : [basicTextColor];}","%degreesUnit% {   [basicDegreesUnitFont];   margin-left : 15px;}","%degreesValue% {   [basicDegreesValueFont];}"])}),define.skin("wysiwyg.common.components.weather.viewer.skins.WeatherBoxesSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Boxes skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:3}),b.skinParams([{id:"boxesDegreesValueFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"WEATHER_BASIC_SKIN_DEGREES_VALUE_FONT_LABEL",enableEdit:!0},{id:"boxesDegreesUnitFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"WEATHER_BASIC_SKIN_DEGREES_UNIT_FONT_LABEL",enableEdit:!0},{id:"boxesBgColor",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_18",lang:"WEATHER_BASIC_SKIN_BACKGROUND_COLOR_LABEL",enableEdit:!0},{id:"boxesTextColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"WEATHER_BASIC_SKIN_TEXT_COLOR_LABEL",enableEdit:!0}]),b.html('<div skinpart="degreesBox">   <span skinpart="degreesValue"></span>   <span skinpart="degreesUnit"></span></div>'),b.css(["{ position: relative; }","%degreesBox% {   white-space: nowrap;   text-align : center;   color : [boxesTextColor];}","%degreesUnit% {   [boxesDegreesUnitFont];   [boxesBgColor]   padding : 7px;   margin-left : 5px;}","%degreesValue% {   [boxesDegreesValueFont];   padding : 7px;   [boxesBgColor]}"])}),define.skin("wysiwyg.common.components.weather.viewer.skins.WeatherFlatSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Flat skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:2}),b.skinParams([{id:"flatDegreesValueFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"WEATHER_BASIC_SKIN_DEGREES_VALUE_FONT_LABEL",enableEdit:!0},{id:"flatDegreesUnitFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"WEATHER_BASIC_SKIN_DEGREES_UNIT_FONT_LABEL",enableEdit:!0},{id:"flatBgColor",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_19",lang:"WEATHER_BASIC_SKIN_BACKGROUND_COLOR_LABEL",enableEdit:!0},{id:"flatTextColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"WEATHER_BASIC_SKIN_TEXT_COLOR_LABEL",enableEdit:!0},{id:"flatShadow",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"1px 1px 2px 0 rgba(0, 0, 0, .45);",lang:"WEATHER_GRADIENT_SKIN_SHADOW_LABEL"}]),b.html('<div skinpart="degreesBox">   <span skinpart="degreesValue"></span>   <span skinpart="degreesUnit"></span></div>'),b.css(["{ position: relative; }","%degreesBox% {   white-space: nowrap;   text-align : center;   padding : 10px;   color : [flatTextColor];   background-image : linear-gradient(to bottom right, transparent 50%, rgba(255, 255, 255, 0.15) 50%);   [flatBgColor];   [flatShadow];}","%degreesUnit% {   [flatDegreesUnitFont];   margin-left : 15px;}","%degreesValue% {   [flatDegreesValueFont];}"])}),define.skin("wysiwyg.common.components.weather.viewer.skins.WeatherGradientSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"Gradient skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:1}),b.skinParams([{id:"gradientDegreesValueFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"WEATHER_BASIC_SKIN_DEGREES_VALUE_FONT_LABEL",enableEdit:!0},{id:"gradientDegreesUnitFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_5",lang:"WEATHER_BASIC_SKIN_DEGREES_UNIT_FONT_LABEL",enableEdit:!0},{id:"gradientMainColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_19",lang:"WEATHER_BASIC_SKIN_BACKGROUND_COLOR_LABEL",enableEdit:!0},{id:"gradientTextColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"WEATHER_BASIC_SKIN_TEXT_COLOR_LABEL",enableEdit:!0},{id:"gradientTextColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_11",lang:"WEATHER_BASIC_SKIN_TEXT_COLOR_LABEL",enableEdit:!0},{id:"gradientShadow",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"1px 1px 2px 0 rgba(0, 0, 0, .45);",lang:"WEATHER_GRADIENT_SKIN_SHADOW_LABEL"}]),b.html('<div skinpart="degreesBox">   <span skinpart="degreesValue"></span>   <span skinpart="degreesUnit"></span></div>'),b.css(["{ position: relative; }","%degreesBox% {   white-space: nowrap;   text-align : center;   padding : 10px;   color : [gradientTextColor];   background : linear-gradient(148deg, [gradientMainColor], #fff);   [gradientShadow];}","%degreesUnit% {   [gradientDegreesUnitFont];   margin-left : 15px;}","%degreesValue% {   [gradientDegreesValueFont];}"])
}),define.skin("wysiwyg.common.components.weather.viewer.skins.WeatherOneLineSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.iconParams({description:"One line skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:4}),b.skinParams([{id:"oneLineDegreesValueFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_6",lang:"WEATHER_BASIC_SKIN_DEGREES_VALUE_FONT_LABEL",enableEdit:!0},{id:"oneLineDegreesUnitFont",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_6",lang:"WEATHER_BASIC_SKIN_DEGREES_UNIT_FONT_LABEL",enableEdit:!0},{id:"oneLineTextColor",type:Constants.SkinParamTypes.COLOR,defaultTheme:"color_15",lang:"WEATHER_BASIC_SKIN_TEXT_COLOR_LABEL",enableEdit:!0}]),b.html('<div skinpart="degreesBox">   <span skinpart="degreesValue"></span>   <span skinpart="degreesUnit"></span></div>'),b.css(["{ position: relative; }","%degreesBox% {   white-space: nowrap;   text-align : center;   color : [oneLineTextColor];}","%degreesUnit% {   [oneLineDegreesUnitFont];   margin-left : 13px;}","%degreesValue% {   [oneLineDegreesValueFont];}"])}),define.resource("weatherSkinMap",{"wysiwyg.common.components.weather.viewer.skins.WeatherBasicSkin":{description:"Basic skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:0},"wysiwyg.common.components.weather.viewer.skins.WeatherBoxesSkin":{description:"Boxes skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:3},"wysiwyg.common.components.weather.viewer.skins.WeatherFlatSkin":{description:"Flat skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:2},"wysiwyg.common.components.weather.viewer.skins.WeatherGradientSkin":{description:"Gradient skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:1},"wysiwyg.common.components.weather.viewer.skins.WeatherOneLineSkin":{description:"One line skin for weather indicator",iconUrl:"/images/wysiwyg/skinIcons/forms/formonecollabelleft.png",hidden:!1,index:4}}),define.component("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",function(a){var b=a;b.inherits("core.components.base.BaseComp"),b.traits(["wysiwyg.viewer.components.traits.CustomPreviewBehavior"]),b.propertiesSchemaType("YouTubeSubscribeButtonProperties"),b.dataTypes(["YouTubeSubscribeButton"]),b.resources(["topology","W.Config"]),b.skinParts({youtubeIframe:{type:"htmlElement"}}),b.statics({_defaultLayoutWidth:200,_defaultLayoutHeight:66,_fullLayoutWidth:280,_fullLayoutHeight:66,_toolTipExtraSpace:50}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this._resizableSides=[Constants.BaseComponent.ResizeSides.RIGHT,Constants.BaseComponent.ResizeSides.LEFT],this.EDITOR_META_DATA={general:{settings:!0,design:!1}},this.setMinW(this._defaultLayoutWidth),this.setMinH(this._defaultLayoutHeight)},isRenderNeeded:function(a){var b=[this.INVALIDATIONS.SKIN_CHANGE,this.INVALIDATIONS.DATA_CHANGE];return a.isInvalidated(b)},_onRender:function(){this._createIframe(),this._createClickOverlayForPreviewMode("Social_Widgets_Only_On_Public")},_getIframeDimensions:function(){var a,b,c=this.resources.W.Config.env.$viewingDevice,d=this.getComponentProperties().getData();return"default"===d.layout?(a=this._defaultLayoutWidth,b=this._defaultLayoutHeight,c===Constants.ViewerTypesParams.TYPES.DESKTOP&&(b+=this._toolTipExtraSpace)):(a=this._fullLayoutWidth,b=this._fullLayoutHeight,c===Constants.ViewerTypesParams.TYPES.DESKTOP&&(b+=this._toolTipExtraSpace)),{width:a+"px",height:b+"px"}},_getIframeUrl:function(){var a=this.resources.topology.wysiwyg+"/html/external/youtubeSubscribeButton.html",b=this.getDataItem().getData(),c=this.getComponentProperties().getData();return a+"?channel="+b.youtubeChannelId+"&layout="+c.layout+"&theme="+c.theme},_createIframe:function(){var a=this._getIframeDimensions();this._iframe=new IFrame({src:this._getIframeUrl(),webkitAllowFullScreen:"true",mozallowfullscreen:"true",allowfullscreen:"allowfullscreen",frameborder:"0",width:"100%",height:"100%"}),this._skinParts.youtubeIframe.empty(),this._skinParts.youtubeIframe.style.height=a.height,this._iframe.insertInto(this._skinParts.youtubeIframe)}})}),define.dataSchema("YouTubeSubscribeButton",{youtubeChannelId:{type:"string","default":"wix",description:"youtube channel id"}}),define.dataSchema("YouTubeSubscribeButtonProperties",{layout:{type:"string","enum":["default","full"],"default":"default",description:"the layout of the youtube subscribe button"},theme:{type:"string","enum":["light","dark"],"default":"light",description:"the theme of the youtube subscribe button"}}),define.skin("wysiwyg.common.components.youtubesubscribebutton.viewer.skins.YouTubeSubscribeButtonSkin",function(a){var b=a;b.inherits("core.managers.skin.BaseSkin2"),b.skinParams([]),b.html('<div skinPart="youtubeIframe"></div>'),b.css(["%youtubeIframe% {height: 66px;}"])}),define.resource("youtubesubscribebuttonSkinMap",{"wysiwyg.common.components.youtubesubscribebutton.viewer.skins.YouTubeSubscribeButtonSkin":{}}),define.Class("wysiwyg.managers.WCookiesManager",function(a){var b=a;b.inherits("bootstrap.managers.BaseManager"),b.methods({_initializeExtra:function(){},setCookieParam:function(a,b){var c,d=this.getCookie(a);if(d){if(this.getCookieParams(a).indexOf(b)>=0)return;c=a+"="+d+","+b}else c=a+"="+b;var e=this.writeCookie(c);return e},getCookieParams:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b)){var f=e.substring(b.length,e.length);return f.split(",")}}return[]},removeCookieParam:function(a,b){var c=this.getCookieParams(a);if(0!==c.length&&void 0!==c.length){var d=c.indexOf(b);if(!(0>d)){c.splice(d,1);var e=a+"="+c.toString();return this.writeCookie(e)}}},removeCookie:function(a){this.writeCookie(a+"=")},writeCookie:function(a,b,c,d){var e;if(b)e=new Date((new Date).getTime()+b);else{var f=new Date;f.setYear((new Date).getFullYear()+1),e=f}return a+=";expires="+e.toGMTString(),a+=";path="+(d||"/"),c&&(a+=";domain="+c),document.cookie=a,a},getCookie:function(a){if(document.cookie)for(var b=document.cookie.split(/;\s*/),c=0,d=b.length;d>c;c++){var e=b[c],f=a+"=";if(0===e.indexOf(f))return e.substring(f.length,e.length)}return!1},isReady:function(){return!0},clone:function(a){return this.parent(a)}})}),define.Class("wysiwyg.managers.appdata.AppDataHandler",function(a){var b=a,c=null;b.methods({getOriginalAppsData:function(){return c},getAppsData:function(){return window.rendererModel||(window.rendererModel={}),window.rendererModel.clientSpecMap||(window.rendererModel.clientSpecMap={}),c||(c=Object.clone(window.rendererModel.clientSpecMap)),window.rendererModel.clientSpecMap},registerAppData:function(a){this.getAppsData()[a.applicationId]=a},getAppData:function(a){return this.getAppsData()[a]||{}},getAppDataByAppDefinitionId:function(a){return this.getAppDataByAppDefinitionIdOrNull(a)||{}},getAppDataByAppDefinitionIdOrNull:function(a){var b=this.getAppsData();return _.find(b,function(b){return b.appDefinitionId===a})},getApplicationId:function(a){var b=this.getAppsData();return _.findKey(b,function(b){return b.appDefinitionId===a})},getWidgetData:function(a,b){var c=this.getAppData(a).widgets||{};return c[b]||{}},getSiteMembersData:function(){var a=Object.filter(this.getAppsData(),function(a){return a&&a.type&&"sitemembers"==a.type.toLowerCase()}),b=Object.values(a);return b&&b.length>0?b[0]:null},getWidgetProperty:function(a,b,c){return this.getWidgetData(a,b)[c]},getLargestApplicationId:function(){var a=this.getAppsData(),b=function(a){return parseInt(a,10)};return _(a).keys().map(b).filter().concat(0).max().value()}})}),define.Class("wysiwyg.common.managers.classdata.Anchor",function(a){var b=a;b.fields({ANCHOR_TOP_TOP:"TOP_TOP",ANCHOR_BOTTOM_TOP:"BOTTOM_TOP",ANCHOR_BOTTOM_BOTTOM:"BOTTOM_BOTTOM",ANCHOR_BOTTOM_PARENT:"BOTTOM_PARENT",ANCHOR_LOCK_BOTTOM:"LOCK_BOTTOM",type:"BOTTOM_TOP",distance:0,topToTop:0,locked:!1,fromComp:null,toComp:null,originalValue:0/0})}),define.dataSchema("AudioPlayer",{uri:{type:"string","default":""},autoPlay:{type:"Boolean","default":!1},loop:{type:"Boolean","default":!1},visible:{type:"Boolean","default":!0},volume:{type:"number","default":100},title:{type:"string","default":""},description:{type:"string","default":""},icon_uri:{type:"string","default":""},originalFileName:{type:"string","default":""}}),define.dataSchema("Boolean",{value:"boolean"}),define.dataSchema("ContactForm",{toEmailAddress:{type:"string","default":""},bccEmailAddress:{type:"string","default":""},nameFieldLabel:{type:"string","default":"Name"},emailFieldLabel:{type:"string","default":"Email"},phoneFieldLabel:{type:"string","default":"Phone"},addressFieldLabel:{type:"string","default":"Address"},subjectFieldLabel:{type:"string","default":"Subject"},messageFieldLabel:{type:"string","default":"Message"},submitButtonLabel:{type:"string","default":"Send"},successMessage:{type:"string","default":"Your details were sent successfully!"},errorMessage:{type:"string","default":"Please provide a valid email"},textDirection:{type:"string","default":"left","enum":["left","right"]},validationErrorMessage:{type:"string","default":"Please fill in all required fields."}}),define.dataSchema("EbayItemsBySeller",{sellerId:"string",registrationSite:"string"}),define.dataSchema("EditorSettings",{palletsFilterTags:"array",fontsFilterTags:"array",pagesFilterTags:"array"}),define.dataSchema("FacebookShareButton",{urlChoice:{type:"string","enum":["Current page","Site"],"default":"Current page",description:"Share: current/site url"},label:{type:"string","default":"Share",description:""}}),define.dataSchema("FlashComponent",{"extends":"Link",title:"string",uri:"string",description:"string",height:"number",width:"number",placeHolderImage:"ref"}),define.dataSchema("FlickrBadgeWidget",{userId:{type:"string","default":"74009459@N07"},userName:"string",tag:"string",imageCount:{type:"number","default":3},whichImages:{type:"string","default":"latest"},imageSize:{type:"string","default":"t"},layoutOrientation:{type:"string","default":"v"}}),define.dataSchema("GeoMap",{address:{type:"string","default":"2601 Mission St. San Francisco, CA 94110"},latitude:{type:"number","default":"37.7552464"},longitude:{type:"number","default":"-122.4185384"},addressInfo:{type:"string","default":"Wix Office"}}),define.dataSchema("HomePageLogin",{postLoginUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},postSignUpUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},startWith:{type:"string","enum":["login","createUser"],"default":"login",description:"some amazing description"}}),define.dataSchema("HtmlComponent",{sourceType:"string",url:"string",freezeFrame:"boolean"}),define.dataSchema("ItunesButton",{downloadUrl:{type:"string","default":"",description:"Insert band URL"}}),define.dataSchema("LinkableFlashComponent",{link:"ref",title:"string",uri:"string",description:"string",height:"number",width:"number",placeHolderImage:"ref"}),define.dataSchema("LinkableButton",{link:{type:"ref","default":null},label:{type:"string","default":"MY BUTTON"}}),define.dataSchema("list",{items:"array"}),define.dataSchema("MenuData",{menuButton:"ref",pages:"ref"}),define.dataSchema("PayPalButton",{merchantID:{type:"string","default":"",description:"some amazing description"}}),define.dataSchema("PermaLink",{appType:{type:"string","enum":["ListsApps","ThirdPartyApps"]},dataItemRef:"ref",mutableSeoTitle:"string",correctPermaLinkRef:"ref"}),define.dataSchema("PinterestFollow",{urlChoice:{type:"string","default":"pinterest/",description:""},label:{type:"string","default":"Pinterest",description:""}}),define.dataSchema("SelectOption",{value:"string",text:"string",enabled:{type:"boolean","default":"true"},description:"string"}),define.dataSchema("SelectableList",{items:{type:"refList",description:"a list of data items or data queries to select from","default":[]},selected:{type:"ref",description:"the selected data item/query","default":null}}),define.dataSchema("SiteButton",{"extends":"Link",label:{type:"string","default":"MY BUTTON"}}),define.dataSchema("SoundCloudWidget",{url:{type:"string","default":""},showArtWork:{type:"Boolean","default":!0},autoPlay:{type:"Boolean","default":!1},embedSource:{type:"string","default":""}}),define.dataSchema("StyledText",{text:"string",stylesMapId:"string",linkList:"refList"}),define.dataSchema("StyledTextLinkHelper",{link:"ref"}),define.dataSchema("Table",{items:"refList",header:"refList",footer:"refList"}),define.dataSchema("VKShareButton",{style:{type:"string","enum":["Button","ButtonWithoutCounter","Link","LinkWithoutIcon","Icon"],"default":"Button",description:"the layout of the button"},text:{type:"string","default":"Share",description:"the text of the Button"}}),define.dataSchema("Video",{videoId:"string",videoType:"string"}),define.dataSchema("WixHomepageMenu",{menuDataSource:{type:"string","enum":["topMenu","bottomMenu"],"default":"topMenu",description:"some amazing description"}}),define.dataSchema("BgImageStripProperties",{bgUrl:{type:"string","default":"",description:"Set image background"},bgSize:{type:"string","enum":[{label:"Actual Size",value:"auto"},{label:"Crop       ",value:"cover"},{label:"Fit        ",value:"contain"}],"default":"auto",description:"Set background mode"},bgRepeat:{type:"string","enum":[{label:"No Tiling",value:"no-repeat"},{label:"Tile Horizontal",value:"repeat-x "},{label:"Tile Vertical",value:"repeat-y "},{label:"Tile All",value:"repeat"}],"default":"repeat",description:"Set background tile direction"},bgPosition:{type:"string","enum":["top left","top center","top right","center left","center","center right","bottom left","bottom center","bottom right"],"default":"center",description:"Set background position"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("ComboBoxInputProperties",{hasPrompt:{type:"boolean","default":!1,description:"Display prompt in combo"},promptText:{type:"string","default":"",description:"The text that will be displayed in the prompt"},promptValue:{type:"number","default":-1,description:"Data of prompt option"}}),define.dataSchema("ContactFormProperties",{hidden_emailFieldLabel:{type:"boolean","default":!0},hidden_nameFieldLabel:{type:"boolean","default":!0},hidden_phoneFieldLabel:{type:"boolean","default":!1},hidden_addressFieldLabel:{type:"boolean","default":!1},hidden_subjectFieldLabel:{type:"boolean","default":!0},hidden_messageFieldLabel:{type:"boolean","default":!0},required_emailFieldLabel:{type:"boolean","default":!0},required_nameFieldLabel:{type:"boolean","default":!0},required_phoneFieldLabel:{type:"boolean","default":!1},required_addressFieldLabel:{type:"boolean","default":!1},required_subjectFieldLabel:{type:"boolean","default":!1},required_messageFieldLabel:{type:"boolean","default":!1},useCookie:{type:"boolean","default":!0}}),define.dataSchema("DocumentMediaProperties",{showTitle:{type:"boolean","default":!0,description:"Toggle Document Title Display"}}),define.dataSchema("EbayItemsBySellerProperties",{headerImage:{type:"string","enum":["0","2","3","4","5","6","7","8","9","10","11"],"default":0,description:"The widget's header"}}),define.dataSchema("FiveGridLineProperties",function(){return{fullScreenModeOn:{type:"boolean","default":!1,description:"Toggle full screen mode"}}}),define.dataSchema("FlashComponentProperties",{displayMode:{type:"string","enum":["original","fit","stretch"],"default":"original",description:"displayMode of the movie"}}),define.dataSchema("GalleryExpandProperties",{expandEnabled:{type:"boolean","default":!0},goToLinkText:{type:"string","default":"Go to link"},galleryImageOnClickAction:{type:"string","default":"unset","enum":["disabled","zoomMode","goToLink"]}}),define.dataSchema("GoogleMapProperties",{showZoom:{type:"boolean","default":!0,description:"show zoom control"},showPosition:{type:"boolean","default":!0,description:"show position control"},showStreetView:{type:"boolean","default":!0,description:"show Street View control"},showMapType:{type:"boolean","default":!0,description:"show map type control"},mapDragging:{type:"boolean","default":!0,description:"show map type control"},mapType:{type:"string","enum":["ROADMAP","TERRAIN","SATELLITE","HYBRID"],"default":"ROADMAP",description:"show zoom control"}}),define.dataSchema("HorizontalMenuProperties",{alignButtons:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons"},alignText:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons' text"},sameWidthButtons:{type:"boolean","default":!1,description:"Keep buttons the same size"},moreButtonLabel:{type:"string","default":"More",description:'Label to use for "more button"'},moreItemHeight:{type:"number","default":15,description:"height of items in the more menu"},stretchButtonsToMenuWidth:{type:"boolean","default":!0,description:""}}),define.dataSchema("ItunesButtonProperties",{language:{type:"string","enum":["en","fr","de","it","jp","pt","ru","pl","es"],"default":"en",description:"Language of the button"},openIn:{type:"string","enum":["_self","_blank"],"default":"_blank",description:"Where the link will be opened"}}),define.dataSchema("LayoutProperties",{x:{type:"number","default":0,description:"x position"},y:{type:"number","default":0,description:"y position"},w:{type:"number","default":100,description:"width"},h:{type:"number","default":100,description:"height"},anchors:{type:"array",description:"list of anchors"}}),define.dataSchema("LinkBarProperties",{gallery:{type:"string","default":"clipart",description:"gallery type (photos, icons, backgrounds, etc..)"},iconSize:{type:"number","default":30,description:"Icon Size",minimum:16,maximum:128},spacing:{type:"number","default":5,description:"Spacing",minimum:1,maximum:50},bgScale:{type:"number","default":1,description:"Background scale",minimum:0,maximum:2},orientation:{type:"string","enum":["HORIZ","VERT"],"default":"HORIZ",description:"Orientation"}}),define.dataSchema("MatrixGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidthFixed"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":2,description:"Maximum number of rows",minimum:1,maximum:10},incRows:{type:"number","default":2,description:"Row number increase",minimum:1,maximum:10},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250},alignText:{type:"string","default":"left","enum":["left","center","right"]},showMoreLabel:{type:"string","default":"Show More",description:"Show More"}}),define.dataSchema("NumberInputProperties",{minValue:{type:"number","default":0,description:"minimum allowed value"},maxValue:{type:"number","default":999,description:"maximum allowed value"}}),define.dataSchema("PageGroupProperties",{transition:{type:"string","enum":["none","swipeHorizontalFullScreen","swipeVerticalFullScreen","crossfade","outIn"],"default":"slide",description:"page transition"}}),define.dataSchema("PaginatedGridGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":3,description:"Maximum number of rows",minimum:1,maximum:10},margin:{type:"number","default":0,description:"Margin around each item",minimum:0,maximum:250},transition:{type:"string","default":"seq_crossFade_All","enum":["none","seq_crossFade_All","seq_shrink_All","swipe_horiz_All","swipe_vert_All","seq_random"]},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},autoplayInterval:{type:"number","default":3,minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("PayPalButtonProperties",{buttonType:{type:"string","enum":["buy","donate"],"default":"buy",description:"buy or donate button"},itemName:{type:"string","default":"",description:"some amazing description"},itemID:{type:"string","default":"",description:"some amazing description"},organizationName:{type:"string","default":"",description:"some amazing description"},organizationID:{type:"string","default":"",description:"some amazing description"},amount:{type:"string","default":"",description:"some amazing description"},currencyCode:{type:"string","enum":["USD","GBP","NIS"],"default":"USD",description:"Currency Code"},target:{type:"string","enum":["_self","_blank"],"default":"_blank",description:"Currency Code"},showCreditCards:{type:"boolean","default":!0,description:"Show credit card symbols"},smallButton:{type:"boolean","default":!1,description:"use small button"}}),define.dataSchema("SiteSegmentContainerProperties",{fixedPosition:{type:"boolean","default":!1,description:"fixed positioning for components that inherit from SiteSegmentContainers"}}),define.dataSchema("SlideShowGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleHeight","flexibleWidthFixed"]},transition:{type:"string","enum":["none","swipeVertical","swipeHorizontal","crossfade","outIn"],"default":"swipeHorizontal",description:"Transition between items of the gallery"},autoplayInterval:{type:"number","default":"5",minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},bidirectional:{type:"boolean","default":!0,description:"Decides whether the transition direction reflects Prev/Next"},reverse:{type:"boolean","default":!1,description:"If bidirectional, inverts the direction of transitions"},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("SliderGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidth"]},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250},maxSpeed:{type:"number","default":"5",minimum:1,maximum:30,description:"Speed"},aspectRatio:{type:"number",minimum:.1,maximum:3,"default":1,description:""},aspectRatioPreset:{type:"string","enum":["16:9","4:3","1:1","3:4","9:16"],"default":"4:3"},loop:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("SvgShapeProperties",function(){return{maintainAspectRatio:{type:"boolean","default":!0,description:"Maintain aspect ratio"}}}),define.dataSchema("TableComponentProperties",{minHeight:{type:"number","default":void 0,description:"minimum allowed value"}}),define.dataSchema("TwitterFeedProperties",{numOfTweets:{type:"number","default":"5",description:"Number of tweets in feed"},subject:{type:"string","default":"What's being said about...",description:"subject line"},title:{type:"string","default":"Me...",description:"title line"}}),define.dataSchema("VKShareProperties",{rightAngles:{type:"boolean","default":!1,description:"Button Right angles"}}),define.dataSchema("VideoProperties",{autoplay:{type:"boolean","default":!1,description:"video autoplay on load"},loop:{type:"boolean","default":!1,description:"play video in a loop"},showinfo:{type:"boolean","default":!1,description:"show video title and author"},lightTheme:{type:"boolean","default":!1,description:"show video with light theme"},showControls:{type:"string","enum":["always_show","always_hide","temp_show"],"default":"always_show",description:"show / hide controls"}}),define.dataSchema("WFacebookCommentProperties",{numPosts:{type:"number","default":2,minimum:0,maximum:10,description:"the number of posts display by default"},width:{type:"number","default":"555",description:"the width of the plugin, in pixels"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme of the plugin"},canBeShownOnAllPagesBug:{type:"boolean","default":!1,description:"The component was added after the bug who-145 fix, and will be shown on all pages"}}),define.dataSchema("WFacebookLikeProperties",{layout:{type:"string","enum":["standard","button_count","box_count"],"default":"standard",description:"the layout of the button"},send:{type:"boolean","default":!1,description:"enable/disable the send button"},show_faces:{type:"boolean","default":!1,description:"show the faces of your friends that liked this item"},width:{type:"string","default":"225",description:"the width of the Like button"},action:{type:"string","enum":["like","recommend"],"default":"like",description:" the verb to display on the button. Options: *like*, *recommend*"},font:{type:"string","enum":["helvetica","arial","lucida grande","segoe ui","tahoma","trebuchet ms","verdana"],"default":"helvetica",description:"the font to display in the button"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme for the like button"}}),define.dataSchema("WGooglePlusOneProperties",{size:{type:"string","enum":["small","medium","standard","tall"],"default":"standard",description:"The button size to render"},annotation:{type:"string","enum":["none","bubble","inline"],"default":"inline",description:"The annotation to display next to the button."},width:{type:"string","default":"",description:"If annotation is set to *inline*, the width in pixels to use for the button and its inline annotation. If omitted, a button and its inline annotation use 450px."}}),define.dataSchema("WPhotoProperties",{displayMode:{type:"string","enum":["fill","full","stretch","fitWidth","fitWidthStrict","fitHeightStrict"],"default":"fill",description:"displayMode of the photo"},onClickBehavior:{type:"string","enum":["disabled","goToLink","zoomMode","zoomAndPanMode"],"default":"goToLink",description:"goToLink"}}),define.dataSchema("WTwitterFollowProperties",{showCount:{type:"boolean","default":!0,description:"Followers count display"},showScreenName:{type:"boolean","default":!0,description:"Show screen name"},textColor:{type:"hexcolor","default":"",description:"HEX color code for the text color"},linkColor:{type:"hexcolor","default":"",description:"HEX color code for the Username link color"},width:{type:"number","default":"100",description:"width of the Follow Button"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.dataSchema("WTwitterTweetProperties",{dataCount:{type:"string","enum":["none","horizontal","vertical"],"default":"horizontal",description:"Count box position"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.Class("wysiwyg.common.utils.LinkRenderer",function(a){var b=a;b.resources(["W.Config","W.Commands","W.Utils","W.Data"]),b.statics({KNOWN_LINK_TYPES:["externallink","pagelink","anchorlink","emaillink","documentlink","logintowixlink"],SAME_TAB_TARGET:"_self",NEW_TAB_TARGET:"_blank",PAGE_LINK_PREFIX:"#!",MAILTO_PREFIX:"mailto:",MEDIA_STATIC_URL:""}),b.binds(["_disableLinkClickPropagation","_pageLinkOnClickHandler","_anchorLinkOnClickHandler","_externalLinkInPreviewClickHandler"]),b.methods({initialize:function(){this.MEDIA_STATIC_URL=this.resources.W.Config.getServiceTopologyProperty("staticDocsUrl")+"/"},renderLink:function(a,b,c){if(!this._verifyNodeAndData(a,b,c))return!1;this.removeRenderedLinkFrom(a,c);var d=this.renderLinkDataItem(b);d&&a.setAttribute("href",d),this._setLinkTarget(a,b),this._setLinkState(!!d,a,c),c&&c._NO_LINK_PROPAGATION&&a.addEvent("click",this._disableLinkClickPropagation)},_setLinkState:function(a,b,c){c&&c.hasState&&(a?(b.setStyle("cursor","pointer"),c.hasState("noLink","linkableComponent")&&c.setState("link","linkableComponent")):(b.setStyle("cursor","default"),c.hasState("link","linkableComponent")&&c.setState("noLink","linkableComponent")))},_disableLinkClickPropagation:function(a){a.stopPropagation()},_verifyNodeAndData:function(a,b,c){var d={compName:c?c.className:"Comp logic NA",skinName:c?c.getSkin().className:"",data:b&&b.getData?b.getData():"No data",message:""};if(!a)return d.message="Link DOM element not valid",LOG.reportError(wixErrors.LINK_RENDERING_FAILED,"wysiwyg.common.utils.LinkRenderer","_verifyNodeAndData",JSON.stringify(d)),!1;if(!b)return d.message="Data item not provided",LOG.reportError(wixErrors.LINK_RENDERING_FAILED,"wysiwyg.common.utils.LinkRenderer","_verifyNodeAndData",JSON.stringify(d)),!1;if("function"!=typeof b.getType)return d.message="Data item not valid (no getType method)",LOG.reportError(wixErrors.LINK_RENDERING_FAILED,"wysiwyg.common.utils.LinkRenderer","_verifyNodeAndData",JSON.stringify(d)),!1;var e=b.getType().toLowerCase();return"textlink"!==e||b.get("href")?-1===this.KNOWN_LINK_TYPES.indexOf(e)?(d.message="Unknown link type: "+e,LOG.reportError(wixErrors.LINK_RENDERING_FAILED,"wysiwyg.common.utils.LinkRenderer","_verifyNodeAndData",JSON.stringify(d)),!1):!0:!1},renderLinkDataItemForPropertyPanel:function(a){var b=a&&a.getType?a.getType().toLowerCase():"",c=this._getPreviewDataManager();switch(b){case"externallink":return this._renderExternalLinkForPropertyPanel(a,c);case"pagelink":return this._renderPageLinkForPropertyPanel(a,c);case"anchorlink":return this._renderAnchorLinkForPropertyPanel(a,c);case"emaillink":return this._renderEmailLinkForPropertyPanel(a,c);case"documentlink":return this._renderDocumentLinkForPropertyPanel(a,c);case"logintowixlink":return this._renderLoginToWixLinkForPropertyPanel(a,c);default:return""}},renderLinkDataItem:function(a){var b=a&&a.getType?a.getType().toLowerCase():"",c="";switch(b){case"externallink":c=this.renderExternalLink(a);break;case"pagelink":c=this.renderPageLink(a);break;case"anchorlink":c=this.renderAnchorLink(a);break;case"emaillink":c=this.renderEmailLink(a);break;case"documentlink":c=this.renderDocumentLink(a);break;case"logintowixlink":c=this._renderLoginToWixLink(a)}return c},removeRenderedLinkFrom:function(a,b){a.removeAttribute("href"),a.removeAttribute("target"),a.removeEvent(Constants.CoreEvents.CLICK,this._pageLinkOnClickHandler),a.removeEvent(Constants.CoreEvents.CLICK,this._disableLinkClickPropagation),a.removeEvent(Constants.CoreEvents.CLICK,this._externalLinkInPreviewClickHandler),this._setLinkState(!1,a,b)},renderExternalLink:function(a){return a.get("url")||""},_renderExternalLinkForPropertyPanel:function(a){return this.renderExternalLink(a)},renderPageLink:function(a,b){var c,d,e,f=a.get("pageId"),g=this._getSiteUrl();if(!f){var h='Link with id "'+a.get("id")+'" refers to a non existing page';return LOG.reportError(wixErrors.LINK_RENDERING_FAILED,"LinkRenderer","renderPageLink",h),void 0}return this._isHomePage(f)&&g&&!b?g:(d=this.resources.W.Data.getDataByQuery(f),d?c=d.get("pageUriSEO"):(f=0===f.indexOf(this.PAGE_LINK_PREFIX)?f.substr(2):f,e=f.lastIndexOf("|"),f=f.substr(e+1),f&&0===f.indexOf("#")&&(f=f.substr(1)),d=this.resources.W.Data.getDataByQuery("#"+f),d&&(c=d.get("pageUriSEO"))),f&&0===f.indexOf("#")&&(f=f.substr(1,f.length)),this.PAGE_LINK_PREFIX+(c?c+"/":"")+f)
},renderAnchorLink:function(a){var b=a.get("pageId")||"",c=a.get("anchorDataId")||"",d=c.indexOf("SCROLL")<0&&this.resources.W.Data.getDataByQuery(c),e=!!d&&d.get("name")||a.get("anchorName")||"",f=this.resources.W.Data.getDataByQuery(b),g=!!f&&f.get("pageUriSEO")||"Master";if(b)return b&&0===b.indexOf("#")&&(b=b.substr(1,b.length)),c&&0===c.indexOf("#")&&(c=c.substr(1,c.length)),this.PAGE_LINK_PREFIX+(g?g+"/":"")+b+"/"+e+"/"+c},_renderPageLinkForPropertyPanel:function(a,b){var c=a.get("pageId"),d=b.getDataByQuery(c);return d?"Page - "+d.get("title"):this.renderPageLink(a)},_renderAnchorLinkForPropertyPanel:function(a,b){var c=a.get("pageId"),d=a.get("anchorDataId"),e=d.indexOf("SCROLL")<0&&b.getDataByQuery(d),f=!!e&&e.get("name")||a.get("anchorName"),g=b.getDataByQuery(c),h=!!c&&g.get("title");return c?"Anchor ("+f+(h?", Page: "+h:"")+")":""},renderEmailLink:function(a){var b=a.get("recipient")||"",c=a.get("subject"),d=a.get("body");return b&&0!=b.indexOf(this.MAILTO_PREFIX)&&(b=this.MAILTO_PREFIX+b),b&&c&&(b+="?subject="+c),b&&d&&(b+=(c?"&":"?")+"body="+d),b},_renderEmailLinkForPropertyPanel:function(a){var b=a.get("recipient");return b?"Email - "+b:""},renderDocumentLink:function(a){var b=a.get("docId"),c=this._isPdfDocument(b);return this.MEDIA_STATIC_URL+b+(c?"":"?dn=%22"+a.get("name")+"%22")},_renderDocumentLinkForPropertyPanel:function(a){return"Document - "+a.get("name")},_renderLoginToWixLink:function(){return"#"},_renderLoginToWixLinkForPropertyPanel:function(){return"Login / Signup Dialog"},_setLinkTarget:function(a,b){var c=null,d=b.getType();d=d?d.toLowerCase():"";var e=this._isViewerInsideEditor();switch(d){case"externallink":e&&this._isExternalLinkWithSameTabTarget(b)?this._handleExternalLinkInPreviewFrame(a):c=b.get("target")||this.NEW_TAB_TARGET;break;case"pagelink":this._handlePageLink(a,b),c=this.SAME_TAB_TARGET;break;case"anchorlink":this._handleAnchorLink(a,b);break;case"emaillink":c=this.NEW_TAB_TARGET;break;case"documentlink":c=this.NEW_TAB_TARGET;break;case"logintowixlink":this._handleLoginToWixLink(a,b)}null!==c&&this._setNodeTarget(a,c)},_handlePageLink:function(a){a.addEvent(Constants.CoreEvents.CLICK,this._pageLinkOnClickHandler)},_handleAnchorLink:function(a){a.addEvent(Constants.CoreEvents.CLICK,this._anchorLinkOnClickHandler)},_pageLinkOnClickHandler:function(a){var b=this._getViewerManager(),c=a.event.currentTarget?a.event.currentTarget:this._getParentLinkNode(a.target);if(!c||!c.getAttribute)return!0;var d,e=c.getAttribute("href"),f=this._getSiteUrl();e===f?d=b.getHomePageId():e&&0===e.indexOf("#!")&&(d=e.indexOf("/")>-1?e.substr(e.lastIndexOf("/")+1):e.indexOf("|")>-1?e.substr(e.lastIndexOf("|")+1):e.substr(2)),d&&("#"===d[0]&&(d=d.substr(1)),b.goToPage(d)),a.preventDefault()},_anchorLinkOnClickHandler:function(a){var b=this._getViewerManager(),c=a.event.currentTarget||this._getParentLinkNode(a.target);if(!c||!c.getAttribute)return!0;var d,e,f,g=c.getAttribute("href"),h=this._getSiteUrl(),i=this._getViewerManager().getCurrentPageId();g===h?d=b.getHomePageId():g&&0===g.indexOf("#!")&&(f=g.split("/"),4===f.length?(d=f[1],e=f[3]):d=f[0].substr(2)),d&&("#"===d[0]&&(d=d.substr(1)),sessionStorage.setItem("anchorDataId",e),d===i||"SITE_STRUCTURE"===d?this.resources.W.Commands.executeCommand("WViewerCommands.SamePageScrollAnchor",{}):b.goToPage(d)),a.preventDefault()},_getParentLinkNode:function(a){for(var b=a;!b.getAttribute("href");)b=b.parentNode;return b},_handleLoginToWixLink:function(a,b){a.addEvent("click",function(){if(window.animateForm){var a=b.get("postLoginUrl")||"",c=b.get("postSignupUrl")||"",d=b.get("dialog"),e="HTML";if(-1!==c.indexOf("ifcontext")){var f=this.resources.W.Utils.getQueryStringParamsAsObject(),g="";_.forOwn(f,function(a,b){"ifcontext"===b.toLowerCase()&&(g=a.replace("#",""),c=/^[a-zA-Z0-9]+$/.test(g)?c.replace("{ifcontext}",g):c.replace("{ifcontext}","illegalContextValue"))})}var h=window.userApi?window.userApi.isSessionValid():!1;h?a&&(window.location.href=a):window.animateForm.callForm([c,a,d,e])}}.bind(this))},_handleExternalLinkInPreviewFrame:function(a){a.removeAttribute("href"),a.removeAttribute("target"),a.addEvent("click",this._externalLinkInPreviewClickHandler)},_externalLinkInPreviewClickHandler:function(a){a.preventDefault();var b={component:a.target};this.resources.W.Commands.executeCommand("linkableComponent.navigateSameWindow",b,this)},_isViewerInsideEditor:function(){return this.resources.W.Config.env.$isEditorViewerFrame},_getPreviewDataManager:function(){return W.Preview.getPreviewManagers().Data},_getViewerManager:function(){return this.resources.W.Config.env.$isEditorFrame?W.Preview.getPreviewManagers().Viewer:W.Viewer},_getSiteUrl:function(){return this.resources.W.Config.getExternalBaseUrl()},_isExternalLinkWithSameTabTarget:function(a){var b=a.getType()||"";b=b.toLowerCase();var c=a.get("target");return"externallink"===b&&c===this.SAME_TAB_TARGET},_setNodeTarget:function(a,b){a.setAttribute("target",b)},_isPdfDocument:function(a){var b=a.split("."),c=b[b.length-1];return c&&"pdf"===c.toLowerCase()},_isHomePage:function(a){var b=this._getViewerManager(),c=0===a.indexOf("#")?a.substr(1):a;return b.getHomePageId()===c},sanitizeExternalLink:function(a){var b=a.get("href");b&&0!==b.indexOf("http://")&&0!==b.indexOf("https://")&&0!==b.indexOf("telnet://")&&0!==b.indexOf("ftp://")&&0!==b.indexOf("mailto:")&&(b.indexOf("@")>0?a.set("href","mailto:"+b):(0===b.indexOf("www")||0!==b.indexOf("www")&&0!==b.indexOf("#"))&&a.set("href","http://"+b))}})}),define.Class("wysiwyg.common.utils.OpenPanelByQuery",function(a,b){var c=a;c.binds(["_executeCommandByQueryValue"]),c.resources(["W.Commands","W.Utils"]),c.methods({initialize:function(){this._query=null,this._previewReadyCommand=this.resources.W.Commands.registerCommandAndListener("PreviewIsReady",this,this._openPanelByQueryValue,null,!0),this._mobileViewModeReadyCommand=this.resources.W.Commands.registerCommandAndListener("WEditorCommands.SecondaryPreviewReady",this,this._onMobileViewModeReady,null,!0)},_openPanelByQueryValue:function(){this._previewReadyCommand.unregisterListener(this);var a=this._getValueByQueryParam("openpanel");0===a.indexOf("mobile")?this._openMobileViewMode():(this._mobileViewModeReadyCommand.unregisterListener(this),this._executeCommandByQueryValue(a))},_onMobileViewModeReady:function(){this._mobileViewModeReadyCommand.unregisterListener(this);var a=this._getValueByQueryParam("openpanel");a.length>"mobile".length&&_.defer(this._executeCommandByQueryValue,a)},_filterQueryValue:function(a){return a},_executeCommandByQueryValue:function(a){switch(a=this._filterQueryValue(a)){case"pages":this._executeCommand("pagesPanel","Pages");break;case"add":this._executeCommand("addPanel","ShowComponentCategories");break;case"gallery":this._executeCommand("gallery","ShowComponentCategory","ShowComponentCategories");break;case"buttons_menus":this._executeCommand("buttons","ShowComponentCategory","ShowComponentCategories");break;case"ecom":this._executeCommand("ecom","ShowComponentCategory","ShowComponentCategories");break;case"design":this._executeCommand("designPanel","Design");break;case"background":this._executeCommand("designPanel","ShowBackgroundDesignPanel","Design");break;case"colors":this._executeCommand("designPanel","ShowColorsPanel","Design");break;case"fonts":this._executeCommand("designPanel","ShowFontsPanel","Design");break;case"siteaddress":this._executeCommand("settingsPanel","ShowSiteName","Settings");break;case"seo":this._executeCommand("settingsPanel","ShowSEO","Settings");break;case"social":this._executeCommand("settingsPanel","ShowSocial","Settings");break;case"statistics":this._executeCommand("settingsPanel","ShowStatistics","Settings");break;case"favicon":this._executeCommand("settingsPanel","ShowFaviconAndThumbnail","Settings");break;case"market":this._executeMarketCommand();break;case"mobilehidden":this._executeCommand(null,"MobileHiddenElements");break;case"mobiledesign":this._executeCommand(null,"MobileDesign");break;case"mobilebkg":this._executeCommand(null,"ShowMobileBackgroundEditorPanel","MobileDesign");break;case"mobileview":this._executeCommand(null,"ShowMobileViewSelector","MobileSettings");break;case"mobileactionbar":this._executeCommand(null,"ShowMobileQuickActionsView","MobileSettings")}},_executeMarketCommand:function(){this.resources.W.Commands.executeCommand("WEditorCommands.Market")},_getValueByQueryParam:function(a){return this._query||(this._query=this.resources.W.Utils.getQueryStringAsObject()),this._query&&this._query[a]?this._query[a].toLowerCase():""},_executeCommand:function(a,b,c){c&&this.resources.W.Commands.executeCommand("WEditorCommands."+c,a),this.resources.W.Commands.executeCommand("WEditorCommands."+b,a)},_openMobileViewMode:function(){this.resources.W.Commands.executeCommand("WEditorCommands.SetViewerMode",{mode:"MOBILE",src:"queryParam"},this)}})}),define.Const("TransitionDefaults",{SWIPE_HORIZONTAL:{durationInSec:1.1},SWIPE_HORIZONTAL_FULLSCREEN:{durationInSec:1.1},SWIPE_VERTICAL:{durationInSec:1.1},SWIPE_VERTICAL_FULLSCREEN:{durationInSec:1.1},CROSS_FADE:{durationInSec:1.2},SHRINK_FADE:{durationInSec:1.1},OUT_IN:{durationInSec:1.5},NONE:{durationInSec:0}}),define.Const("TransitionTypes",{SWIPE_HORIZONTAL:"swipeHorizontal",SWIPE_HORIZONTAL_FULLSCREEN:"swipeHorizontalFullScreen",SWIPE_VERTICAL:"swipeVertical",SWIPE_VERTICAL_FULLSCREEN:"swipeVerticalFullScreen",CROSS_FADE:"crossfade",SHRINK_FADE:"shrinkfade",OUT_IN:"outIn",NONE:"none"}),define.dataSchema("map",{templates:"object"}),define.dataItem.multi({CK_EDITOR_FONT_STYLES:{type:"map",metaData:{isPreset:!0,isHidden:!1,description:"",isPersistent:!1},items:{font_0:{seoTag:"h1",label:"FONT_0_LABEL"},font_1:{seoTag:"h2",label:"FONT_1_LABEL"},font_2:{seoTag:"h2",label:"FONT_2_LABEL"},font_3:{seoTag:"h3",label:"FONT_3_LABEL"},font_4:{seoTag:"h4",label:"FONT_4_LABEL"},font_5:{seoTag:"h5",label:"FONT_5_LABEL"},font_6:{seoTag:"h6",label:"FONT_6_LABEL"},font_7:{seoTag:"p",label:"FONT_7_LABEL"},font_8:{seoTag:"p",label:"FONT_8_LABEL"},font_9:{seoTag:"p",label:"FONT_9_LABEL"},font_10:{seoTag:"p",label:"FONT_10_LABEL"}}}}),define.Const("Actions",{PAGE_IN:"pageIn",SCREEN_IN:"screenIn",PAGE_TRANSITION:"pageTransition"}),define.Class("wysiwyg.common.behaviors.Animations",function(a){var b=a;b.resources(["W.Config","W.Utils","W.Experiments"]),b.utilize(["wysiwyg.common.behaviors.TweenEngine"]),b.fields({_definitions:{animations:{}},_tweenEngine:null}),b.methods({initialize:function(a){a||(a=new this.imports.TweenEngine),this._tweenEngine=a},tween:function(){return this._tweenEngine.tween.apply(this._tweenEngine,arguments)},set:function(a,b,c){var d={delay:0,duration:0,to:_.cloneDeep(b)};return this.tween(a,d,c)},sequence:function(){return this._tweenEngine.sequence.apply(this._tweenEngine,arguments)},clear:function(){return this._tweenEngine.clear.apply(this._tweenEngine,arguments)},addTickerEvent:function(a){this._tweenEngine.addTickerEvent(a)},removeTickerEvent:function(a){this._tweenEngine.removeTickerEvent(a)},getAllAnimationDefinitions:function(){var a=define.getDefinition("animation");return _.forEach(a,function(a,b){this._definitions.animations[b]||this.getAnimationDefinition(b)},this),this._definitions.animations},getAnimationDefinition:function(a){var b,c;return this._definitions.animations[a]||(b=define.getDefinition("animation",a,!1),b&&(b.init(this),b=this.resources.W.Experiments.applyExperiments(a,b,"ExperimentAnimationPlugin",this),this.resources.W.Config.env.$isEditorFrame&&(c=define.getDefinition("animationEditorPart",a),c=this.resources.W.Experiments.applyExperiments(a,c,"ExperimentAnimationEditorPartPlugin"))),this._definitions.animations[a]=b,b&&c&&(this._definitions.animations[a].editorPart=c)),this._definitions.animations[a]||null},applyTween:function(a,b,c,d,e){var f=this.getAnimationDefinition(a);return f?f.animate(b,c,d,e):null},hideSingleElement:function(a,b){var c;this.isTweening(a)||this.isReady()&&(c=this.getAnimationDefinition(b),c&&c.options&&c.options.hideOnStart&&a.addClass("hideForAnimation"))},unHideSingleElement:function(a){a&&a.removeClass("hideForAnimation")},isReady:function(){return this._tweenEngine&&this._tweenEngine.isReady()},isTweening:function(a){return this._tweenEngine.isTweening(a)}})}),define.experimentPlugin("ExperimentAnimationEditorPartPlugin",function(a){function b(a,b){var c=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentStrategy"),d=a,e=b(c),f={};return f.iconUrl=c._mergeField_(d.iconUrl,e.iconUrl),f.displayName=c._mergeField_(d.displayName,e.displayName),f.previewParams=c._mergeObjects_(d.previewParams,e.previewParams),f.panelControls=c._mergeObjects_(d.panelControls,e.panelControls),f}function c(a,b){define.animationEditorPart(a,b())}var d=a;d.init("animationEditorPart","newAnimationEditorPart",b,c)}),define.experimentPlugin("ExperimentAnimationPlugin",function(a){function b(a,b){var c,d=b();return d.init(a._animations),c=_.defaults(d,a)}function c(a,b){define.animation(a,b)}var d=a;d.init("animation","newAnimation",b,c)}),define.experimentPlugin("ExperimentTransitionPlugin",function(a){function b(a,b){return b}function c(a,b){define.transition(a,b)}var d=a;d.init("transition","newTransition",b,c)}),define.Class("wysiwyg.common.behaviors.TweenEngine",function(a){var b=a;b.resources(["W.Commands","TweenMax"]),b.binds(["_onCompleteEvent","_onStartEvent","_onUpdateEvent"]),b.statics({_allowedTweenMaxParamsList:["ease","duration","delay","to","from","repeat","repeatDelay","easeParams","stagger","clearProps","paused","overwrite","transformOrigin","clearOnComplete","parseTransform","fireUpdateCommand","data","clearParams","perspective","transformPerspective"],_allowedTimelineMaxParamsList:["delay","stagger","repeat","repeatDelay","stagger","paused","align","tweens","clearOnComplete","fireUpdateCommand","data","clearParams"]}),b.methods({initialize:function(a){this.resources.W.Commands.registerCommand("TweenEngine.AnimationStart",!0),this.resources.W.Commands.registerCommand("TweenEngine.AnimationComplete",!0),this.resources.W.Commands.registerCommand("TweenEngine.AnimationInterrupted",!0),"undefined"==typeof a&&(a=this.resources.TweenMax),this._tweenResource=a},tween:function(a,b,c){return this.isReady()?(a.removeClass("hideForAnimation"),b=b||{},b=this._validateAnimationParams(_.cloneDeep(b),[c,this._allowedTweenMaxParamsList]),b.data={},b.onComplete=this._onCompleteEvent,b.onCompleteParams=["{self}"],b.onStart=this._onStartEvent,b.onStartParams=["{self}"],b.fireUpdateCommand&&(b.onUpdate=this._onUpdateEvent,b.onUpdateParams=["{self}"]),b.clearOnComplete&&(b.data.clearOnComplete=!0,delete b.clearOnComplete),this._saveCssText(a),b.from&&b.to?this._fromTo(a,b):b.from?this._from(a,b):b.to?this._to(a,b):(console.log("Missing to/from object in params. no tween started"),void 0)):null},sequence:function(a,b,c){if(!this.isReady())return null;b=b||{},b=this._validateAnimationParams(_.cloneDeep(b),[c,this._allowedTimelineMaxParamsList]),b.data={},b.onComplete=this._onCompleteEvent,b.onCompleteParams=["{self}"],b.onStart=this._onStartEvent,b.onStartParams=["{self}"],b.fireUpdateCommand&&(b.onUpdate=this._onUpdateEvent,b.onUpdateParams=["{self}"]),b.clearOnComplete&&(b.data.clearOnComplete=!0,delete b.clearOnComplete),b.data.params=_.cloneDeep(b);var d=new this._tweenResource.timeline(b);return d.add(a)},clear:function(a,b){var c=0;if(!this.isReady())return null;var d,e,f,g;if(b=!!b,_.isArray(a)){for(c=0;c<a.length;c++)this.clear(a[c],!0);return b||this.resources.W.Commands.executeCommand("TweenEngine.AnimationInterrupted",{type:"TweenEngine.AnimationInterrupted",src:a,timeline:g,tweens:f},"TweenEngine"),void 0}if(a instanceof this._tweenResource.timeline){for(g=a,g.pause(),f=g.getChildren(!0,!0,!1),f=_.uniq(f,!1,function(a){return a.target.id},this),c=0;c<f.length;c++)this.clear(f[c],!0);return b||this.resources.W.Commands.executeCommand("TweenEngine.AnimationInterrupted",{type:"TweenEngine.AnimationInterrupted",src:a,timeline:g,tweens:f},"TweenEngine"),g.clear(),void 0}return a instanceof HTMLElement?(d=a,f=this._tweenResource.tween.getTweensOf(d),this.clear(f,!0),b||this.resources.W.Commands.executeCommand("TweenEngine.AnimationInterrupted",{type:"TweenEngine.AnimationInterrupted",src:a,timeline:g,tweens:f},"TweenEngine"),void 0):(a instanceof this._tweenResource.tween&&(e=a,d=e.target,e.pause(),e.kill(),b||this.resources.W.Commands.executeCommand("TweenEngine.AnimationInterrupted",{type:"TweenEngine.AnimationInterrupted",src:a,timeline:null,tweens:[e]},"TweenEngine")),d&&this._resetElementStyles(d),void 0)},addTickerEvent:function(a){this._tweenResource.ticker.addEventListener("tick",a)},removeTickerEvent:function(a){this._tweenResource.ticker.removeEventListener("tick",a)},isTweening:function(a){return this._tweenResource.tween.isTweening(a)},isReady:function(){return!!this._tweenResource},_from:function(a,b){var c=_.defaults(_.cloneDeep(b),b.from),d=c.duration;return c.data=c.data||{},c.data.params=_.cloneDeep(b),delete c.from,delete c.duration,this._tweenResource.from(a,d,c)},_to:function(a,b){var c=_.defaults(_.cloneDeep(b),b.to),d=c.duration;return c.data=c.data||{},c.data.params=_.cloneDeep(b),delete c.to,delete c.duration,this._tweenResource.to(a,d,c)},_fromTo:function(a,b){var c=b.duration,d=_.clone(b.from),e=_.defaults(_.cloneDeep(b),b.to);return e.data=e.data||{},e.data.params=_.cloneDeep(b),delete e.to,delete e.from,delete e.duration,this._tweenResource.fromTo(a,c,d,e)},_validateAnimationParams:function(a,b){var c=_.union.apply(_,b);return _.forEach(a,function(a,d,e){"to"===d||"from"===d?this._validateAnimationParams(e[d],b):_.indexOf(c,d)<0&&delete e[d]},this),a},_resetElementStyles:function(a){var b=a._gsCssText,c=a.$logic;"undefined"!=typeof b&&(c&&(b=this._updateCssText(b,{top:c.getY()+"px"})),delete a._gsCssText,this._tweenResource.set(a,{clearProps:"all"}),a.style.cssText=b)},_onCompleteEvent:function(a){var b,c;a instanceof this._tweenResource.tween?(c=null,b=[a]):a instanceof this._tweenResource.timeline&&(c=a,b=c.getChildren(!0,!0,!1)),a.data.clearOnComplete&&this.clear(a,!0),this.resources.W.Commands.executeCommand("TweenEngine.AnimationComplete",{type:"TweenEngine.AnimationComplete",timeline:c,tweens:b},"TweenEngine")},_onStartEvent:function(a){var b,c;a instanceof this._tweenResource.tween?(c=null,b=[a]):a instanceof this._tweenResource.timeline&&(c=a,b=c.getChildren(!0,!0,!1)),this.resources.W.Commands.executeCommand("TweenEngine.AnimationStart",{type:"TweenEngine.AnimationStart",timeline:c,tweens:b},"TweenEngine")},_onUpdateEvent:function(a){var b,c;a instanceof this._tweenResource.tween?(c=null,b=[a]):a instanceof this._tweenResource.timeline&&(c=a,b=c.getChildren(!0,!0,!1)),this.resources.W.Commands.executeCommand("TweenEngine.AnimationUpdate",{type:"TweenEngine.AnimationUpdate",timeline:c,tweens:b},"TweenEngine")},_saveCssText:function(a){a=$(a),"undefined"==typeof a._gsCssText&&(a._gsCssText=a.style.cssText)},_updateCssText:function(a,b){return _.forEach(b,function(b,c){var d=new RegExp("((?:\\s|^)"+c+":\\s*)(.*?)(?=;)");a=a.replace(d,"$1"+b)}),a}})}),resource.getResourceValue("scriptLoader",function(a){var b=Date.now(),c="1.11.4",d=serviceTopology.staticServerUrl+"services/third-party/tweenmax/%version%/min/TweenMaxCustom.min.js".replace("%version%",c);deployStatus("TweenMax","TweenMax started to load"),a.loadResource({url:d,noBlob:!0},{onFailed:function(){define.resource("TweenMax",null)},onLoad:function(){define.resource("TweenMax",{timeline:window.TimelineMax,tween:window.TweenMax,set:window.TweenMax.set,fromTo:window.TweenMax.fromTo,from:window.TweenMax.from,to:window.TweenMax.to,staggerFromTo:window.TweenMax.staggerFromTo,staggerFrom:window.TweenMax.staggerFrom,staggerTo:window.TweenMax.staggerTo,ticker:window.TweenMax.ticker}),deployStatus("TweenMax","TweenMax Loaded Successfully "+Date.now()-b)}})}),define.animation("ExpandIn",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},this._animations.sequence([this._animations.applyTween("BaseFade",a,b,c,{from:{opacity:0},ease:"Cubic.easeIn"}),this._animations.applyTween("BaseScale",a,b,c,{from:{scale:0},ease:"Sine.easeOut"})],d)},group:["entrance"],options:{hideOnStart:!0,screenInThreshold:"15%",waitForPageTransition:!0}}}),define.animation("FadeIn",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},this._animations.sequence([this._animations.applyTween("BaseFade",a,b,c,{from:{opacity:0},ease:"Cubic.easeIn"})],d)},group:["entrance"],options:{hideOnStart:!0,screenInThreshold:"15%",waitForPageTransition:!0}}}),define.animation("FloatIn",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){d=d||{},d.direction=(d.direction||"").trim().toLowerCase();var e=d.direction in this._paramsMap?d.direction:this._defaults.direction,f=this._paramsMap[e],g={width:window.getSize().x,height:window.getSize().y},h=a.getBoundingClientRect(),i=f.dy*f.distance,j=f.dx*(f.dx>0?Math.max(0,Math.min(g.width-h.right,f.distance)):Math.max(0,Math.min(h.left,f.distance)));return this._animations.sequence([this._animations.applyTween("BaseFade",a,b,c,{from:{opacity:0},ease:"Cubic.easeIn"}),this._animations.applyTween("BasePosition",a,b,c,{from:{x:j,y:i},ease:"Sine.easeOut"})],d)},group:["entrance"],options:{hideOnStart:!0,screenInThreshold:"15%",waitForPageTransition:!0},_defaults:{direction:"right"},_paramsMap:{left:{dx:"-1",dy:"0",distance:"120"},right:{dx:"1",dy:"0",distance:"120"},top:{dx:"0",dy:"-1",distance:"60"},bottom:{dx:"0",dy:"1",distance:"60"}}}}),define.animation("FlyIn",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){d=d||{},d.direction=(d.direction||this._defaults.direction).trim().toLowerCase();var e=this._parseParams(d.direction.split(" ")),f={width:window.getSize().x,height:window.getSize().y},g=a.getBoundingClientRect(),h=e.dx>0?f.width-g.right:e.dx*g.left,i=e.dy>0?f.height-g.top:e.dy*g.bottom;return this._animations.sequence([this._animations.applyTween("BaseFade",a,b,c,{from:{opacity:0},ease:"Linear.easeIn"}),this._animations.applyTween("BasePosition",a,b,c,{from:{x:h,y:i},ease:"Sine.easeOut"})],d)},group:["entrance"],options:{hideOnStart:!0,screenInThreshold:"15%",waitForPageTransition:!0},_defaults:{direction:"right"},_paramsMap:{top:{dy:"-1"},bottom:{dy:"1"},left:{dx:"-1"},right:{dx:"1"}},_parseParams:function(a){var b={dx:0,dy:0};return _.forEach(a,function(a){this._paramsMap[a]&&_.assign(b,this._paramsMap[a])},this),b}}}),define.animation("SpinIn",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){d=d||{},d.direction=(d.direction||"").trim().toLowerCase(),d.cycles=isNaN(d.cycles)?this._defaults.cycles:d.cycles;var e=d.direction in this._paramsMap?d.direction:this._defaults.direction,f=_.clone(this._paramsMap[e]),g=(f.direction>0?"+=":"-=")+360*d.cycles;return this._animations.sequence([this._animations.applyTween("BaseFade",a,b,c,{from:{opacity:0},ease:"Sine.easeIn"}),this._animations.applyTween("BaseScale",a,b,c,{from:{scale:0},ease:"Sine.easeOut"}),this._animations.applyTween("BaseRotate",a,b,c,{from:{rotation:g}})],d)},group:["entrance"],options:{hideOnStart:!0,screenInThreshold:"15%",waitForPageTransition:!0},_defaults:{direction:"cw",cycles:"5"},_paramsMap:{cw:{direction:"-1"},ccw:{direction:"1"}}}}),define.animation("TurnIn",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){d=d||{},d.direction=(d.direction||"").trim().toLowerCase();var e=d.direction in this._paramsMap?d.direction:this._defaults.direction,f=this._paramsMap[e],g={width:window.getSize().x,height:window.getSize().y},h=a.getBoundingClientRect(),i=f.dx>0?g.width-h.right:f.dx*h.left,j=Math.min(-1.5*h.height,Math.max(-300,-5.5*h.height)),k=[{x:f.dx*h.width,y:j},{x:i,y:j}],l=(f.dx>0?"+=":"-=")+f.angle;return this._animations.sequence([this._animations.applyTween("BaseFade",a,b,c,{from:{opacity:0},ease:"Linear.easeIn"}),this._animations.applyTween("BasePosition",a,b,c,{from:{bezier:{values:k,type:"soft"}},ease:"Sine.easeOut"}),this._animations.applyTween("BaseRotate",a,b,c,{from:{rotation:l}})],d)},group:["entrance"],options:{hideOnStart:!0,screenInThreshold:"15%",waitForPageTransition:!0},_defaults:{direction:"right"},_paramsMap:{left:{dx:"-1",angle:"90"},right:{dx:"1",angle:"90"}}}}),define.animation("BaseFade",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},d.duration=_.isNumber(parseInt(b))?b:this._defaults.duration,d.delay=_.isNumber(parseInt(c))?c:this._defaults.delay,d=_.defaults(_.cloneDeep(d),this._defaults.params),this._animations.tween(a,d,this._allowedParams)},_defaults:{duration:1,delay:0,params:{}},_allowedParams:["opacity"],group:["base"]}}),define.animation("BasePosition",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},d.duration=_.isNumber(parseInt(b))?b:this._defaults.duration,d.delay=_.isNumber(parseInt(c))?c:this._defaults.delay,d=_.defaults(_.cloneDeep(d),this._defaults.params),this._animations.tween(a,d,this._allowedParams)},_defaults:{duration:1,delay:0,params:{}},_allowedParams:["left","top","x","y","bezier"],group:["base"]}}),define.animation("BaseRotate",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},d.duration=_.isNumber(parseInt(b))?b:this._defaults.duration,d.delay=_.isNumber(parseInt(c))?c:this._defaults.delay,d=_.defaults(_.cloneDeep(d),this._defaults.params),this._animations.tween(a,d,this._allowedParams)},_defaults:{duration:1,delay:0,params:{}},_allowedParams:["rotation"],group:["base"]}}),define.animation("BaseScale",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},d.duration=_.isNumber(parseInt(b))?b:this._defaults.duration,d.delay=_.isNumber(parseInt(c))?c:this._defaults.delay,d=_.defaults(_.cloneDeep(d),this._defaults.params),this._animations.tween(a,d,this._allowedParams)},_defaults:{duration:1,delay:0,params:{}},_allowedParams:["scale"],group:["base"]}}),define.animation("BaseSkew",function(){return{init:function(a){this._animations=a},animate:function(a,b,c,d){return d=d||{},d.duration=_.isNumber(parseInt(b))?b:this._defaults.duration,d.delay=_.isNumber(parseInt(c))?c:this._defaults.delay,d=_.defaults(_.cloneDeep(d),this._defaults.params),this._animations.tween(a,d,this._allowedParams)},_defaults:{duration:1,delay:0,params:{}},_allowedParams:["skewX","skewY"],group:["base"]}}),define.Class("external_apis.flickr.FlickrAPI",function(a){var b=a;b.fields({_apiKey:"0f1c119e0c156ac4b80052270d0a3202",_apiURL:"http://api.flickr.com/services/rest/?format=json",_callback:void 0}),b.methods({getUserID:function(a,b){var c;c={method:"flickr.people.findByUsername",username:a},this._callback=b,this._call(c,function(a){var c,d;c="fail"!=a.stat,d=a.message,c===!0?b(c,a.user.id):b(c,d)})},getTags:function(a,b){var c;c={method:"flickr.tags.getListUser",user_id:a},this._callback=b,this._call(c,function(a){var c,d;d="fail"!=a.stat,c=a.message,d===!0?b(d,a.who.tags.tag):b(d,c)})},_call:function(a,b){a.api_key=this._apiKey;var c=new Request.JSONP({url:this._apiURL,callbackKey:"jsoncallback",data:a,onComplete:b,timeout:5e3,onFailure:this._handleTimeout});c.send()},_handleTimeout:function(){this._callback&&this._callback(!1,"Failed connecting to Flickr. Please try again in a few minutes.")}})}),define.Class("external_apis.FacebookPixelScript",function(a){var b=a;b.resources(["W.Config"]),b.methods({initialize:function(){if(!this._thisSiteWasAlreadySaved()&&!this._userAlreadySavedOtherSites()){window.fb_param={},window.fb_param.pixel_id="6010554253282",window.fb_param.value="0.00",window.fb_param.currency="USD";var a=document.getElementsByTagName("script")[0];this._addFPScript(a)}},_addFPScript:function(a){var b=document.createElement("script");b.async=!0,b.src="//connect.facebook.net/en_US/fp.js",a.parentNode.insertBefore(b,a)},_thisSiteWasAlreadySaved:function(){return!this.resources.W.Config.siteNeverSavedBefore()},_userAlreadySavedOtherSites:function(){var a=this.resources.W.Config.getEditorModelProperty("usedMetaSiteNames");return _.isArray(a)?a.length>0:!1}})}),define.Class("external_apis.GoogleTagManager",function(a){var b=a;b.resources(["scriptLoader"]),b.methods({initialize:function(a){"viewer"===a?this._addGTM_script():this._addGTM_iframe()},_addGTM_script:function(){var a=document.getElementsByTagName("script")[0],b=document.createElement("script");b.async=!0,b.text="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');",a.parentNode.insertBefore(b,a)},_addGTM_iframe:function(){var a=document.createElement("iframe");a.style.display="none",a.src="http://static.wix.com/services/third-party/misc/GoogleTagManagerIframe.html?fromeditor",document.body.appendChild(a)}})});